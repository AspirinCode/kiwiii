{"version":3,"file":"kwdatagrid.js","sources":["../src/common/file.js","../src/datagrid/component.js","../src/datagrid/view.js","../src/datagrid/sort.js","../src/component/modal.js","../src/component/formListBox.js","../src/component/table.js","../src/dialog/fieldConfig.js","../src/common/mapper.js","../src/component/formBox.js","../src/dialog/formGroup.js","../src/common/legacySchema.js","../src/datagrid/datagridApp.js","../src/datagrid/newDatagrid.js","../src/common/KArray.js","../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/common/image.js","../src/component/button.js","../src/dialog/fieldFile.js","../src/dialog/networkgen.js","../src/dialog/rename.js","../src/datagrid/state.js","../src/dialog/search.js","../src/dialog/struct.js","../src/dialog/filter.js","../src/dialog/sdf.js","../src/datagrid.js"],"sourcesContent":["\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module datagrid/component */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as img} from '../common/image.js';\n\n\nfunction updateHeader(selection, state) {\n  selection.style('width', `${state.contentWidth}px`);\n  const header = selection.select('.dg-header')\n    .selectAll('.dg-hcell')\n      .data(state.visibleFields, d => d.key);\n  header.exit().remove();\n  header.enter().append('div')\n      .classed('dg-hcell', true)\n      .style('display', 'inline-block')\n    .merge(header)\n      .style('width', d => `${d.width}px`)\n      .text(d => d.name);\n}\n\n\nfunction updateViewport(selection, state) {\n  selection.select('.dg-body')\n    .style('height', `${state.bodyHeight}px`)\n    .style('position', \"relative\");\n  selection.select('.dg-viewport')\n    .style('overflow-y', 'auto')\n    .on('scroll', function () {\n      const scrollTop = d3.select(this).node().scrollTop;\n      const pos = Math.floor(scrollTop / state.rowHeight);\n      if (pos !== state.previousViewportTop) {\n        state.setScrollPosition(pos);\n        selection.call(updateRows, state);\n      }\n    })\n    .dispatch('scroll');\n}\n\n\nfunction updateRows(selection, state) {\n  const cData = state.visibleFields;\n  const rowSelection = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(state.recordsToShow(), state.keyFunc)\n      .style('height', `${state.rowHeight}px`);\n  rowSelection.exit().remove();\n  const rowEntered = rowSelection.enter().append('div')\n      .attr('class', 'dg-row')\n      .style('position', \"absolute\");\n  rowEntered.selectAll('.dg-cell')\n    .data(cData.map(e => e.width))\n    .enter().append('div')\n      .classed('dg-cell', true)\n      .classed('align-middle', true)\n      .style('display', 'inline-block')\n      .style('width', d => `${d}px`);\n  // TODO: need refactoring\n  rowEntered.merge(rowSelection)\n      .order()\n      .each(function(d, ri) {\n        const rowPos = (state.viewportTop + ri) * state.rowHeight;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (state.viewportTop + ri) % 2 === 0)\n        .selectAll('.dg-cell')\n          .html(function (_, i) {\n            d3.select(this).attr('id', `c${ri}-${i}`);\n            const value = d[cData[i].key];\n            if (value === undefined) return '';\n            if (cData[i].format === 'd3_format') {\n              return misc.formatNum(value, cData[i].d3_format);\n            }\n            if (cData[i].format === 'plot') return '';\n            if (cData[i].format === 'compound_id') {\n              return `<a href=\"profile.html?compound=${value}\" target=\"_blank\">${value}</a>`;\n            }\n            if (cData[i].format === 'image') {  // data URI\n              return `<img src=\"${value}\" width=\"180\" height=\"180\"/>`;\n            }\n            return value;\n          })\n          .each(function(_, i) {\n            if (cData[i].format !== 'plot') return;\n            if (!d.hasOwnProperty(cData[i].key)) return;\n            const value = d[cData[i].key];\n            img.showPlot(value, `#c${ri}-${i}`);\n          });\n    });\n}\n\nfunction resizeViewport(selection, state) {\n  // TODO: set width\n  selection.select('.dg-viewport').style('height', `${state.viewportHeight}px`);\n}\n\nexport default {\n  updateHeader, updateViewport, updateRows, resizeViewport\n};\n","\n/** @module datagrid/view */\n\nimport {default as component} from './component.js';\n\n\nfunction resize(selection, state) {\n  const viewport = selection.select('.dg-viewport');\n  const viewportTop = viewport.node().getBoundingClientRect().top;\n  state.viewportHeight = window.innerHeight - viewportTop - 5;\n  state.previousNumViewportRows = state.numViewportRows;\n  state.numViewportRows = Math.ceil(state.viewportHeight / state.rowHeight) + 1;\n  selection.call(component.resizeViewport, state);\n}\n\nfunction datagrid(selection, state) {\n  if (selection.selectAll('div').size()) {\n    selection.selectAll('div').remove();\n  }\n  selection.append('div')\n    .classed('dg-header', true);\n  selection.append('div')\n      .classed('dg-viewport', true)\n    .append('div')\n      .classed('dg-body', true);\n  selection.call(resize, state);\n  state.updateHeaderNotifier = () => {\n    selection.call(component.updateHeader, state);\n    selection.call(component.updateViewport, state);\n  };\n  selection.call(component.updateHeader, state);\n  selection.call(component.updateViewport, state);\n\n}\n\n\nexport default {\n  resize, datagrid\n};\n","\n/** @module datagrid/sort */\n\nimport d3 from 'd3';\nimport {default as misc} from '../common/misc.js';\nimport {default as component} from './component.js';\n\n\nfunction numericAsc(a, b) {\n  const fa = parseFloat(a);\n  const fb = parseFloat(b);\n  if (isNaN(fa) || isNaN(fb)) {\n    return String(b).localeCompare(String(a));\n  }\n  return fb - fa;\n}\n\n\nfunction numericDesc(a, b) {\n  return numericAsc(b, a);\n}\n\n\nfunction textAsc(a, b) {\n  return String(b).localeCompare(String(a));\n}\n\n\nfunction textDesc(a, b) {\n  return textAsc(b, a);\n}\n\n\nfunction setSort(selection, state) {\n  selection.select('.dg-header').selectAll('.dg-hcell')\n    .filter(d => misc.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n      const isNum = misc.sortType(d.format) === 'numeric';\n      const cmp = isAsc\n        ? (isNum ? numericAsc : textAsc)\n        : (isNum ? numericDesc : textDesc);\n      state.records = state.records.sort((a, b) => cmp(a[d.key], b[d.key]));\n      selection.call(component.updateRows, state);\n    });\n}\n\n\nexport default {\n  setSort\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/table */\n\n// Simple tables\n// use dataGrid.js for interactive and smooth datatable\n\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction render(selection, id, caption, fields, records) {\n  selection\n      .classed('table', true)\n      .classed('table-striped', true)\n      .classed('table-hover', true)\n      .attr('id', id);\n  if (caption) {\n  selection.append('caption')\n      .text(caption);\n  }\n  selection.append('thead')\n    .append('tr');\n  selection.append('tbody');\n  if (fields) {\n    selection.call(updateHeader, fields, records);\n  }\n}\n\n\nfunction updateHeader(selection, fields, records) {\n  const header = selection.select('thead tr')\n    .selectAll('th')\n      .data(fields);\n  header.exit().remove();\n  header.enter()\n    .append('th')\n      .text(d => d.name);\n  if (records) {\n    selection.call(updateContents, records, d => d.key, updateRowFunc(fields));\n  }\n}\n\n\nfunction updateContents(selection, records, keyFunc, rowFactory) {  // TODO: specify key\n  const rows = selection.select('tbody')\n    .selectAll('tr')\n      .data(records, keyFunc);\n  rows.exit().remove();\n  rows.enter()\n    .append('tr')\n    .merge(rows)\n    .each(function (d) {\n      d3.select(this)\n        .selectAll('td').remove();\n      d3.select(this)\n        .call(rowFactory, d);\n    });\n}\n\n\nfunction updateRowFunc(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const value = record[field.key];\n      const cell = selection.append('td')\n        .classed('align-middle', true);\n      if (value === undefined) return;\n      if (field.format === 'd3_format') {\n        cell.text(misc.formatNum(value, field.d3_format));\n      }\n      else if (field.format === 'plot') {\n        cell.text('[plot]');\n      }\n      else if (field.format === 'image') {\n        cell.text('[image]');\n      }\n      else if (field.format === 'control') {\n        cell.call(value);\n      } else {\n        cell.text(value);\n      }\n    });\n  };\n}\n\n\nexport default {\n  render, updateHeader, updateContents\n};\n","\n/** @module dialog/fieldConfig */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldconf-dialog';\nconst title = 'Field Setting';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction updateRowFunc(selection, record) {\n  selection.append('td')\n      .classed('name', true)\n      .text(record.name);\n  selection.append('td')\n      .classed('visible', true)\n    .append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record.visible);\n  const generalFormat = ['text', 'numeric', 'd3_format', 'raw', 'compound_id'];\n  const fs = generalFormat.includes(record.format) ? generalFormat : [record.format];\n  const items = fs.map(e => ({key: e, name: e}));\n  const format = selection.append('td')\n      .classed('format', true);\n  const formatSelect = format.append('select');\n  format.call(lbox.selectBoxItems, items);\n  formatSelect\n      .property('disabled', !generalFormat.includes(record.format))\n      .property('value', record.format);\n  selection.append('td')\n      .classed('d3format', true)\n    .append('input')\n      .attr('size', 10)\n      .property('disabled', record.format === 'd3_format' ? null : true)\n      .property('value', record.d3_format || null);\n  formatSelect\n      .on('change', function () {\n        selection.select('.d3format')\n          .select('input')\n            .property('disabled', this.value !== 'd3_format');\n      });\n}\n\n\nfunction tableRowValue(selection) {\n  const value = {};\n  value.visible = selection.select('.visible')\n    .select('input').property('checked');\n  value.format = selection.select('.format')\n    .select('select').property('value');\n  if (value.format === 'd3_format') {\n    value.d3_format = selection.select('.d3format')\n      .select('input').property('value');\n  }\n  return value;\n}\n\n\nfunction body(selection) {\n  const fields = misc.defaultFieldProperties([\n    {key: 'name', format: 'text'},\n    {key: 'visible', format: 'control'},\n    {key: 'format', format: 'control'},\n    {key: 'd3_format', format: 'control'}\n  ]);\n  selection\n      .call(modal.submitDialog, id, title)\n    .select('.modal-body')\n    .append('table')\n      .classed('field', true)\n      .call(table.render, null, null, fields);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.field')\n      .call(table.updateContents, state.fields, d => d.key, updateRowFunc);\n}\n\n\nfunction value(selection) {\n  const fields = [];\n  selection.select('tbody').selectAll('tr')\n    .each(function (d) {\n      const field = tableRowValue(d3.select(this));\n      field.key = d.key;\n      field.name = d.name;\n      fields.push(field);\n    });\n  return fields;\n}\n\n\nexport default {\n  menuLink, updateRowFunc, body, updateBody, value\n};\n","\n/** @module common/mapper */\n\nimport KArray from './KArray.js';\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields = KArray.from(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .unique('key').toArray();\n}\n\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module dialog/formGroup */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction queryMolGroup(selection, id, resources) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('format', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-format`, 'Format',\n            [\n              {key: 'molfile', name: 'MDL Molfile'},\n              {key: 'dbid', name: 'Compound ID'}\n            ], 'molfile');\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.append('div')\n      .classed('source', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-source`, 'Source', res, null);\n  selection.append('div')\n      .classed('textquery', true)\n      .classed('mb-1', true)\n      .call(box.textBox, `${id}-textquery`, 'Query', null, '');\n  selection.append('div')\n      .classed('areaquery', true)\n      .classed('mb-1', true)\n      .call(box.textareaBox, `${id}-areaquery`, 'Query', 6, null, '');\n  // Popover\n  $(function () {\n    $('[data-toggle=\"popover\"]')\n      .popover({html: true, trigger: 'focus'});\n  });\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('preview', true)\n      .attr('data-toggle', 'popover')\n      .attr('data-html', 'true')\n      .attr('data-content', '<div id=\"previmg\"></div>')\n      .call(button.menuButton, `${id}-preview`, 'Structure preview', 'primary');\n  selection.call(updateQueryMolGroup);\n}\n\nfunction updateQueryMolGroup(selection) {\n  selection.select('.format')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      selection.select('.source')\n        .select('select')\n          .property('disabled', value !== 'dbid');\n      selection.select('.textquery')\n          .property('hidden', value !== 'dbid');\n      selection.select('.areaquery')\n          .property('hidden', value !== 'molfile');\n    })\n    .dispatch('change');\n  selection.select('.preview')\n    .on('click', function () {\n      const query = queryMolGroupValue(selection);\n      return fetcher.get('strprev', query)\n        .then(fetcher.text)\n        .then(res => d3.select('#previmg').html(res), fetcher.error);\n    });\n}\n\nfunction queryMolGroupValue(selection) {\n  const format = lbox.selectBoxValue(selection.select('.format'));\n  const source = lbox.selectBoxValue(selection.select('.source'));\n  const textquery = box.textBoxValue(selection.select('.textquery'));\n  const areaquery = box.textareaBoxLines(selection.select('.areaquery'));\n  return {\n    format: format,\n    source: format === 'dbid' ? source : null,\n    value: format === 'molfile' ? areaquery : textquery\n  };\n}\n\n\nfunction simOptionGroup(selection, id) {\n  selection\n      .classed('mb-3', true)\n    .append('p')\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text('Optional parameters');\n  const collapse = selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true);\n  collapse.append('div')\n      .classed('ignoreh', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, `${id}-ignoreh`, 'Ignore explicit hydrogens', true);\n  collapse.append('div')\n      .classed('timeout', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-timeout`, 'Timeout (RDKit FMCS)', 1, 999, 1, 2);\n  collapse.append('div')\n      .classed('diam', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-diam`, 'Diameter (MCS-DR/GLS)', 4, 999, 1, 8);\n  collapse.append('div')\n      .classed('tree', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-tree`, 'Max tree size (MCS-DR/GLS)', 20, 999, 1, 40);\n  collapse.append('div')\n      .classed('skip', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-skip`, 'Mol size cutoff (MCS-DR/GLS)', 20, 999, 1, 500);\n  collapse.selectAll('label.col-form-label')\n      .classed('col-4', false)\n      .classed('col-6', true);\n  collapse.selectAll('input.form-control')\n      .classed('col-8', false)\n      .classed('col-6', true);\n}\n\nfunction simOptionGroupValue(selection) {\n  const timeout = selection.select('.timeout');\n  const diam = selection.select('.diam');\n  const tree = selection.select('.tree');\n  const skip = selection.select('.skip');\n  const query = {\n    ignoreHs: box.checkBoxValue(selection.select('.ignoreh'))\n  };\n  if (!timeout.select('input').property('disabled')) {\n    query.timeout = box.numberBoxValue(timeout);\n  }\n  if (!diam.select('input').property('disabled')) {\n    query.diameter = box.numberBoxValue(diam);\n  }\n  if (!tree.select('input').property('disabled')) {\n    query.maxTreeSize = box.numberBoxValue(tree);\n  }\n  if (!skip.select('input').property('disabled')) {\n    query.molSizeCutoff = box.numberBoxValue(skip);\n  }\n  return query;\n}\n\n\nexport default {\n  queryMolGroup, updateQueryMolGroup, queryMolGroupValue,\n  simOptionGroup, simOptionGroupValue\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module datagrid/datagridApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from '../common/core.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as fieldConfigDialog} from '../dialog/fieldConfig.js';\nimport {default as fieldFileDialog} from '../dialog/fieldFile.js';\nimport {default as networkgenDialog} from '../dialog/networkgen.js';\nimport {default as renameDialog} from '../dialog/rename.js';\n\nimport {default as view} from './view.js';\nimport {default as sort} from './sort.js';\nimport DatagridState from './state.js';\n\n\nfunction app(data, serverStatus) {\n  const state = new DatagridState(data);\n  state.serverStatus = serverStatus;\n  d3.select('#datagrid')\n    .call(view.datagrid, state)\n    .call(sort.setSort, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#datagrid').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  // Datagrid view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, 'View control', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .call(fieldConfigDialog.menuLink);\n  menu.append('a')\n      .call(fieldFileDialog.menuLink);\n  menu.append('a')\n      .call(networkgenDialog.menuLink);\n  menu.append('a')\n      .call(renameDialog.menuLink);\n  menu.append('a')\n      .classed('saveview', true)\n      .call(button.dropdownMenuItem, null, 'Save to local storage')\n      .on('click', function () {\n        if (state.data.storeID) {\n          return idb.updateItem(state.data.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.name;\n            item.fields = state.data.fields;\n            item.records = state.data.records;\n          })\n          .then(() => console.info('Datagrid saved'));\n        } else {\n          return idb.putItem(state.export())\n            .then(storeID => {\n              window.location = `datagrid.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .classed('exportjson', true)\n      .call(button.dropdownMenuItem, null, 'Export to JSON')\n      .on('click', () => {\n        const data = state.export();\n        hfile.downloadJSON(data, data.name);\n      });\n  menu.append('a')\n      .classed('exportexcel', true)\n      .call(button.dropdownMenuItem, null, 'Export to Excel worksheet')\n      .on('click', () => {\n        const data = state.export();\n        const formData = new FormData();\n        formData.append('contents', new Blob([JSON.stringify(data)]));\n        return fetcher.post('xlsx', formData)\n          .then(fetcher.blob)\n          .then(blob => hfile.downloadDataFile(blob, `${data.name}.xlsx`));\n      });\n  // Open control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.status);\n  if (ongoing) {\n  menubar.append('a')\n      .classed('refresh', true)\n      .call(button.menuButtonLink, null, 'Refresh', 'outline-secondary')\n      .on('click', function () {\n        return core.fetchProgress(state.data.storeID)\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => app(item, state.serverStatus));\n      });\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Abort server job', 'warning')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', '#abort-dialog');\n  menubar.append('span')\n      .classed('progress', true)\n    .append('progress')\n      .attr('max', 100)\n      .attr('value', state.data.progress)\n      .text(`${state.data.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.status} - ${state.data.records.length} records found in ${state.data.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('fieldconfd', true)\n      .call(fieldConfigDialog.body);\n  dialogs.append('div')\n      .classed('fieldfiled', true)\n      .call(fieldFileDialog.body);\n  dialogs.append('div')\n      .classed('netgend', true)\n      .call(networkgenDialog.body, serverStatus.rdkit);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  d3.select('#loading-icon').style('display', 'none');\n  // Title\n  d3.select('title').text(state.data.name);\n  d3.select('#menubar').select('.title').text(state.data.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.select('.fieldconfd')\n      .call(fieldConfigDialog.updateBody, state)\n      .on('submit', function () {\n        state.setFields(fieldConfigDialog.value(d3.select(this)));\n        state.updateHeaderNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.fieldfiled')\n      .on('submit', function () {\n        return fieldFileDialog.readFile(d3.select(this))\n          .then(data => {\n            state.joinFields(data);\n            state.updateHeaderNotifier();\n            updateApp(state);\n          });\n      });\n  dialogs.select('.netgend')\n      .on('submit', function () {\n        const formData = new FormData();\n        const params = networkgenDialog.queryParams(d3.select(this));\n        formData.append('params', JSON.stringify(params));\n        formData.append('contents', new Blob([JSON.stringify(state.export())]));\n        return fetcher.post(`${params.measure}net`, formData)\n          .then(fetcher.json)\n          .then(data => {\n            data.reference.nodes = state.data.storeID;\n            data.fields = misc.defaultFieldProperties(data.fields);\n            return data;\n          })\n          .then(idb.putItem)\n          .then(storeID => {\n            d3.select('#loading-icon').style('display', 'none');\n            window.open(`network.html?id=${storeID}`, '_blank');\n          });\n      });\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n  });\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.storeID, 'abort')\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => app(item, state.serverStatus));\n      });\n}\n\n\nexport default {\n  app, updateApp\n};\n","\n/** @module datagrid/newDatagrid */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\n\nimport {default as searchDialog} from '../dialog/search.js';\nimport {default as structDialog} from '../dialog/struct.js';\nimport {default as filterDialog} from '../dialog/filter.js';\nimport {default as sdfDialog} from '../dialog/sdf.js';\n\nimport {default as datagridApp} from './datagridApp.js';\n\n\nfunction registerWorkflow(fetched) {\n  return fetcher.json(fetched)\n    .then(data => {\n      data.fields = misc.defaultFieldProperties(data.fields);\n      return data;\n    })\n    .then(idb.putItem)\n    .then(storeID => {\n      window.location = `datagrid.html?id=${storeID}`;\n    });\n  }\n\n\nfunction app(serverStatus, schema) {\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  // New datagrid menu\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, '+ New datagrid', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .classed('searchd', true)\n      .call(searchDialog.menuLink);\n  menu.append('a')\n      .classed('structd', true)\n      .call(structDialog.menuLink);\n  menu.append('a')\n      .classed('filterd', true)\n      .call(filterDialog.menuLink);\n  menu.append('a')\n      .classed('sdfd', true)\n      .call(sdfDialog.menuLink);\n  menu.append('a')\n      .classed('import', true)\n      .call(button.dropdownMenuFile, 'import', 'Import view', '.ndc,.ndr,.json,.gz')\n      .on('change', function () {\n        const file = button.dropdownMenuFileValue(d3.select(this));\n        hfile.loadJSON(file)\n          .then(item => datagridApp.app(item, serverStatus, schema));\n      });\n  // Control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  if (!schema) {\n    menu.selectAll('.searchd, .structd, .filterd, .sdfd')\n      .property('disabled', true);\n    return;\n  }\n  const chemrsrc = schema.resources.filter(e => e.domain === 'chemical');\n  // ID search\n  dialogs.append('div')\n      .call(searchDialog.body, schema.compoundIDPlaceholder)\n      .on('submit', function () {\n        const targets = chemrsrc.map(e => e.id);\n        const query = searchDialog.query(d3.select(this), targets);\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);  // TODO: if err -> show err img\n      });\n  // Structure search\n  dialogs.append('div')\n      .call(structDialog.body, chemrsrc, serverStatus.rdkit)\n      .on('submit', function () {\n        const query = structDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Filter\n  dialogs.append('div')\n      .call(filterDialog.body, chemrsrc)\n      .on('submit', function () {\n        const query = filterDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Import SDFile\n  dialogs.append('div')\n      .call(sdfDialog.body, chemrsrc)\n      .on('submit', function () {\n        const formData = sdfDialog.queryFormData(d3.select(this));\n        return fetcher.post('sdfin', formData)\n          .then(registerWorkflow);\n      });\n}\n\n\nexport default {\n  app\n};\n","\n/** @module common/KArray */\n\n\nclass KArray extends Array {\n  /**\n   * Return array of object filtered by given unique key\n   */\n  unique(key) {\n    return this.reduce((a, b) => {\n      if (a.find(e => e[key] === b[key]) === undefined) a.push(b);\n      return a;\n    }, new KArray());\n  }\n\n\n  /**\n   * Merge arrays\n   */\n  extend() {\n    return this.reduce((a, b) => {\n      Array.prototype.push.apply(a, b);\n      return a;\n    }, new KArray());\n  }\n\n\n  // Merge arrays(Asynchronous)\n  extendAsync() {\n    return Promise.all(this).then(res => {\n      return res.reduce((a, b) => {\n        Array.prototype.push.apply(a, b);\n        return a;\n      }, new KArray());\n    });\n  }\n\n  toArray() {\n    return Array.from(this);\n  }\n\n  toObject() {\n    const obj = {};\n    this.forEach(kv => {\n      obj[kv[0]] = kv[1];\n    });\n    return obj;\n  }\n}\n\nexport default KArray;\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\n\nimport KArray from './KArray.js';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  return KArray.from(window.location.search.substring(1).split(\"&\"))\n    .map(e => e.split('=')).toObject();\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  fetchProgress\n};\n","\n/** @module common/image */\n\nimport vega from 'vega';\n\nfunction showPlot(vegaSpec, selector) {\n  new vega.View(vega.parse(vegaSpec))\n    .initialize(selector)\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nexport default {\n  showPlot, plotThumbnail\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, id, label, type, target) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, id, label, type) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, id, label) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, id, label, target) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, id, label, accept) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label)\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      })\n    .append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module dialog/fieldFile */\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as himg} from '../common/image.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldfile-dialog';\nconst title = 'Import fields from file';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldfile', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fileInput = dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'fieldfile-file', 'File', '.json,.csv');\n  const preview = dialog.select('.modal-body').append('div')\n      .classed('preview', true)\n      .call(table.render);\n  fileInput\n      .on('change', () => {\n        const file = box.fileInputBoxValue(fileInput);\n        const isCsv = file.name.split('.').pop() === 'csv';\n        hfile.readFile(file)\n          .then(res => {\n            const mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n            const tbl = mapper.mappingToTable(mapping);\n            preview.call(table.updateHeader, tbl.fields, tbl.records.slice(0, 5));\n          });\n      });\n}\n\n\nfunction readFile(selection) {\n  const file = box.fileInputBoxValue(selection.select('.file'));\n  const isCsv = file.name.split('.').pop() === 'csv';\n  return hfile.readFile(file)\n    .then(res => {\n      let mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n      if (mapping.hasOwnProperty('field')) {\n        mapping = mapper.singleToMulti(mapping);\n      }\n      const plotCols = [];\n      mapping.fields.forEach((e, i) => {\n        if (e.format === 'plot') {\n          mapping.fields[i].format = 'image';\n          plotCols.push(i);\n        }\n      });\n      if (plotCols.length > 0) {\n        const ps = [];\n        Object.entries(mapping.mapping).forEach(m => {\n          plotCols.forEach(e => {\n            const p = himg.plotThumbnail(m[1][e])\n              .then(img => {\n                mapping.mapping[m[0]][e] = img;\n              });\n            ps.push(p);\n          });\n        });\n        return Promise.all(ps).then(() => mapping);\n      } else {\n        return mapping;\n      }\n    });\n}\n\n\nexport default {\n  menuLink, body, readFile\n};\n","\n/** @module dialog/networkgen */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'networkgen-dialog';\nconst title = 'Generate similarity network';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction body(selection, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Similarity measure\n  const measures = [\n    {key: 'gls', name: 'Graph-based local similarity(GLS)'}\n  ];\n  if (rdk) {\n    measures.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    measures.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'networkgen-measure', 'Measure', measures, 'gls');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'networkgen-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'networkgen');\n  // Events\n  dialog.select('.measure')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        dialog.selectAll('.diam, .tree, .skip')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', value !== 'rdfmcs');\n      })\n      .dispatch('change');\n}\n\n\nfunction queryParams(selection) {\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  return params;\n}\n\n\n\nexport default {\n  menuLink, body, queryParams\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename view';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'rename', title, id);\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module datagrid/state */\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\nimport KArray from '../common/KArray.js';\n\n\nexport default class DatagridState {\n  constructor(data) {\n\n    // Import from legacy format data\n    this.data = legacy.convertTable(data);\n    this.fields = null;  // Working copy (set by setFields method)\n\n    this.defaultColumnWidth = {\n      numeric: 120,\n      text: 200,\n      none: 200\n    };\n    this.defaultColumnHeight = {\n      numeric: 40,\n      text: 40,\n      none: 200\n    };\n    this.scrollBarSpace = 20;\n\n    this.keyFunc = d => d.index;\n\n    this.visibleFields = null;\n    this.rowHeight = null;\n    this.contentWidth = null;\n    this.bodyHeight = null;\n\n    this.vieportTop = null;\n    this.previousVieportTop = null;\n    this.vieportBottom = null;\n\n    this.numViewportRows = null;\n    this.previousNumViewportRows = null;\n\n    this.updateHeaderNotifier = null;\n\n    // Initialize\n    this.setFields(this.data.fields);\n  }\n\n  setScrollPosition(position) {\n    this.previousVieportTop = this.viewportTop;\n    this.viewportTop = position;\n    this.viewportBottom = Math.min(\n      this.viewportTop + this.numViewportRows, this.data.records.length);\n  }\n\n  recordsToShow() {\n    return this.data.records.slice(this.viewportTop, this.viewportBottom);\n  }\n\n  setFields(fields) {\n    this.fields = fields.map(e => {\n      e.width = this.defaultColumnWidth[misc.sortType(e.format)];\n      e.height = this.defaultColumnHeight[misc.sortType(e.format)];\n      return e;\n    });\n    this.visibleFields = this.fields.filter(e => e.visible);\n    this.rowHeight = this.visibleFields\n      .reduce((a, b) => a.height > b.height ? a : b).height;\n    this.contentWidth = this.visibleFields\n      .reduce((a, b) => ({width: a.width + b.width})).width + this.scrollBarSpace;\n    this.bodyHeight = this.data.records.length * this.rowHeight;\n  }\n\n  joinFields(mapping) {\n    mapper.apply(this.data, mapping);\n    this.setFields(this.data.fields);\n  }\n\n  export() {\n    this.data.id = misc.uuidv4();\n    return this.data;\n  }\n\n}\n","\n/** @module dialog/search */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'search-dialog';\nconst title = 'Search by compound ID';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'search', title, id);\n}\n\n\nfunction body(selection, placeholder) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('ids', true)\n      .call(box.textareaBox, 'search-query', 'Query', 20, placeholder, '');\n}\n\n\nfunction query(selection, targets) {\n  return {\n    workflow: 'search',\n    targets: targets,\n    key: 'compound_id',\n    values: box.textareaBoxLines(selection.select('.ids'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/struct */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'struct-dialog';\nconst title = 'Search by structure';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'struct', title, id);\n}\n\n\nfunction body(selection, resources, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Query molecule\n  dialog.select('.modal-body').append('div')\n      .classed('qmol', true)\n      .call(group.queryMolGroup, 'struct', resources, null);\n  // Search type\n  const methodList = [\n    {key: 'exact', name: 'Exact match'},\n    {key: 'substr', name: 'Substructure'},\n    {key: 'supstr', name: 'Superstructure'},\n    {key: 'gls', name: 'MCS-DR/GLS'}\n  ];\n  if (rdk) {\n    methodList.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    methodList.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('method', true)\n      .call(lbox.selectBox, 'struct-method', 'Method', methodList, 'exact');\n  // Measure\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'struct-measure', 'Measure',\n            [\n              {key: 'sim', name: 'Similarity'},\n              {key: 'edge', name: 'Edge count'}\n            ], 'sim');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'struct-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'struct');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n\n  // Events\n  dialog.select('.method')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const mcs = ['gls', 'rdfmcs'].includes(value);\n        dialog.select('.measure')\n          .select('select')\n            .property('value', mcs ? undefined : 'sim')\n            .property('disabled', !mcs);\n        dialog.selectAll('.thld')\n          .select('input')\n            .property('disabled', ['exact', 'substr', 'supstr'].includes(value));\n        dialog.selectAll('.diam, .tree, .skip')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', value !== 'rdfmcs');\n      })\n      .dispatch('change');\n}\n\n\nfunction query(selection) {\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  const query = {\n    workflow: lbox.selectBoxValue(selection.select('.method')),\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    queryMol: group.queryMolGroupValue(selection.select('.qmol')),\n    params: params\n  };\n  return query;\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/filter */\n\nimport KArray from '../common/KArray.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'filter-dialog';\nconst title = 'Search by properties';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'prop', title, id);\n}\n\n\nfunction body(selection, resources) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fields = KArray.from(resources.map(e => e.fields))\n    .extend().unique('key').toArray()\n    .filter(e => e.hasOwnProperty('d3_format')\n                 || ['compound_id', 'numeric', 'text'].includes(e.format));\n  dialog.select('.modal-body').append('div')\n    .classed('key', true)\n    .call(lbox.selectBox, 'filter-field', 'Field', fields, null);\n  dialog.select('.modal-body').append('div')\n    .classed('operator', true)\n    .call(lbox.selectBox, 'filter-op', 'Operator',\n          [\n            {key: 'eq', name: '='},\n            {key: 'gt', name: '>'},\n            {key: 'lt', name: '<'},\n            {key: 'ge', name: '>='},\n            {key: 'le', name: '>='},\n            {key: 'lk', name: 'LIKE'}\n          ], 'eq');\n  dialog.select('.modal-body').append('div')\n    .classed('value', true)\n    .call(box.textBox, 'filter-value', 'Value', null, '');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n}\n\n\nfunction query(selection) {\n  return {\n    workflow: 'filter',\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    key: lbox.selectBoxValue(selection.select('.key')),\n    value: box.textBoxValue(selection.select('.value')),\n    operator: lbox.selectBoxValue(selection.select('.operator'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/sdf */\n\nimport d3 from 'd3';\n\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nfunction getSDFPropList(str) {\n  const re = />.*?<(\\S+)>/g;\n  const uniqCols = new Set();\n  let arr;\n  while ((arr = re.exec(str)) !== null) {\n    uniqCols.add(arr[1]);\n  }\n  return Array.from(uniqCols);\n}\n\n\nconst id = 'sdf-dialog';\nconst title = 'Import SDFile';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'sdf', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'sdf-file', 'File', '.mol,.sdf');\n  dialog.select('.modal-body').append('div')\n      .classed('field', true)\n      .call(lbox.checklistBox, 'sdf-fields', 'Fields', [], null);\n  dialog.select('.modal-body').append('div')\n      .classed('implh', true)\n      .call(box.checkBox, 'sdf-implh', 'Make hydrogens implicit', true);\n  dialog.select('.modal-body').append('div')\n      .classed('recalc', true)\n      .call(box.checkBox, 'sdf-recalc', 'Recalculate 2D coords', false);\n\n  dialog.select('.file')\n      .on('change', function () {\n        const file = box.fileInputBoxValue(d3.select(this));\n        // Scan only first 100mb of the file due to memory limit.\n        return hfile.readFile(file, 100 * 1024 * 1024, false)\n          .then(data => {\n            const fields = getSDFPropList(data)\n              .map(e => ({key: e, name: e}));\n            dialog.select('.field')\n              .call(lbox.checklistBoxItems, fields);\n          });\n      });\n}\n\n\nfunction queryFormData(selection) {\n  const params = {\n    fields: lbox.checklistBoxValue(selection.select('.field')),\n    implh: box.checkBoxValue(selection.select('.implh')),\n    recalc: box.checkBoxValue(selection.select('.recalc'))\n  };\n  const formData = new FormData();\n  formData.append('contents', box.fileInputBoxValue(selection.select('.file')));\n  formData.append('params', JSON.stringify(params));\n  return formData;\n}\n\n\n\nexport default {\n  menuLink, body, queryFormData\n};\n","\n/** @module datagrid */\n\nimport {default as core} from './common/core.js';\nimport {default as fetcher} from './common/fetcher.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as misc} from './common/misc.js';\n\nimport {default as view} from './datagrid/view.js';\nimport {default as sort} from './datagrid/sort.js';\nimport {default as datagridApp} from './datagrid/datagridApp.js';\nimport {default as newDatagrid} from './datagrid/newDatagrid.js';\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      response.server = {};\n      response.schema = {};\n    })\n    .then(() => {\n      console.info('Off-line mode is disabled for debugging');\n      const storeID = misc.URLQuery().id || null;\n      const dataURL = misc.URLQuery().location || null;\n      const error = misc.URLQuery().err || null;\n      if (error) {\n        console.error(decodeURI(error));\n      }\n      if (storeID) {\n        // Load from IndexedDB store\n        core.fetchProgress(storeID, 'update')\n          .then(() => idb.getItemByID(storeID))\n          .then(item => datagridApp.app(item, response.server))\n          .catch(err => {\n            window.location = `datagrid.html?err=${err}`;\n          });\n      } else if (dataURL) {\n        // Fetch via HTTP\n        hfile.fetchJSON(dataURL)\n          .then(item => datagridApp.app(item, response.server));\n      } else {\n        // New datagrid\n        newDatagrid.app(response.server, response.schema);\n      }\n    });\n}\n\n\nexport default {\n  run, view, sort\n};\n"],"names":["readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","text","pako","inflate","to","JSON","parse","downloadDataFile","name","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","e","updateRows","selection","state","cData","visibleFields","rowSelection","select","selectAll","recordsToShow","keyFunc","style","rowHeight","exit","remove","rowEntered","enter","append","attr","map","width","classed","d","merge","order","each","ri","rowPos","viewportTop","d3","this","html","_","i","value","key","undefined","format","misc","formatNum","d3_format","hasOwnProperty","img","showPlot","resize","node","getBoundingClientRect","top","viewportHeight","innerHeight","previousNumViewportRows","numViewportRows","Math","ceil","call","component","resizeViewport","numericAsc","b","fa","parseFloat","fb","isNaN","String","localeCompare","textAsc","dialogBase","id","selectBoxItems","items","options","updateSelectBox","property","checklistBoxItems","listitems","form","updateChecklistBox","values","includes","updateHeader","fields","records","header","updateContents","record","forEach","field","cell","updateRowFunc","rowFactory","rows","visible","generalFormat","formatSelect","lbox","on","singleToMulti","mapping","newMapping","Object","entries","m","created","updateTextBox","updateTextareaBox","updateCheckBox","checked","updateNumberBox","updateQueryMolGroup","selectBoxValue","dispatch","query","queryMolGroupValue","fetcher","get","then","res","source","textquery","box","textBoxValue","areaquery","textareaBoxLines","v07_to_v08_nodes","json","columns","sort","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","startDate","responseDate","v10_nodes","reference","app","serverStatus","DatagridState","datagrid","setSort","onresize","menubar","menu","button","dropdownMenuButton","fieldConfigDialog","menuLink","fieldFileDialog","networkgenDialog","renameDialog","dropdownMenuItem","storeID","idb","updateItem","item","uuidv4","console","info","putItem","export","location","hfile","downloadJSON","formData","FormData","stringify","post","menuButtonLink","core","fetchProgress","getItemByID","length","dialogs","body","rdkit","modal","confirmDialog","updateApp","updateBody","setFields","updateHeaderNotifier","joinFields","params","queryParams","measure","nodes","defaultFieldProperties","open","registerWorkflow","fetched","KArray","Array","[object Object]","reduce","find","push","prototype","apply","all","from","obj","kv","sortType","fmt","d3format","Number","partialMatch","toString","toUpperCase","indexOf","URLQuery","search","substring","split","toObject","replace","c","r","random","schema","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","first","deleteItem","delete","put","updateFunc","modify","reset","baseURL","q","keys","fetch","credentials","Error","statusText","response","formdata","method","command","workflow","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","compress","str","gzip","vegaSpec","selector","vega","View","initialize","run","plotThumbnail","toImageURL","contentWidth","updateViewport","bodyHeight","scrollTop","pos","floor","previousViewportTop","setScrollPosition","size","filter","isAsc","isNum","cmp","buttonBox","label","menuButton","menuModalLink","dropdownMenuModal","dropdownMenuFile","accept","click","dropdownMenuFileValue","files","message","base","footer","submitDialog","title","selectBox","checklistBox","checklistBoxValue","render","caption","table","tableRowValue","mappingToTable","mp","keyField","concat","entry","rcd","f","tableToMapping","ignore","Date","row","csvToMapping","csvString","lines","shift","now","headerIdx","h","line","k","fd","unique","textBox","readonlyBox","textareaBox","placeholder","textareaBoxValue","checkBox","checkBoxValue","numberBox","min","max","step","numberBoxValue","fileInputBox","fileInputBoxValue","dialog","fileInput","preview","isCsv","pop","mapper","tbl","plotCols","ps","p","himg","queryMolGroup","resources","$","popover","trigger","simOptionGroup","collapse","simOptionGroupValue","timeout","diam","tree","skip","ignoreHs","diameter","maxTreeSize","molSizeCutoff","rdk","measures","group","thld","threshold","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","convertTable","index","structure","_structure","_index","v08_nodes","$schema","convertNetwork","edges","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","column","domain","range","unknown","nodeContent","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","coords","v10_edges","legacy","defaultColumnWidth","numeric","none","defaultColumnHeight","scrollBarSpace","vieportTop","previousVieportTop","vieportBottom","position","viewportBottom","height","targets","methodList","mcs","queryMol","extend","operator","re","uniqCols","Set","arr","exec","add","getSDFPropList","queryFormData","implh","recalc","searchDialog","structDialog","filterDialog","sdfDialog","datagridApp","chemrsrc","compoundIDPlaceholder","protocol","navigator","onLine","server","dataURL","decodeURI","newDatagrid"],"mappings":"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"}