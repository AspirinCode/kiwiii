{"version":3,"file":"kw-network.js","sources":["../src/common/misc.js","../src/common/legacySchema.js","../src/network/communityDetection.js","../src/common/scale.js","../src/component/formBox.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/button.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/component.js","../src/network/view.js","../src/network/interaction.js","../src/network/force.js","../src/network.js","../src/network/state.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module network/communityDetection */\n\nimport jLouvain from 'jLouvain';\n\n\nexport function communityDetection(nodes, edges, option) {\n  // TODO: partition resolution setting\n  // TODO: Error at edges.length 0\n  if (!edges.length) {\n    const community = {};\n    nodes.forEach(e => { community[e] = option.nulliso ? null : e; });\n    return community;\n  }\n  const clusters = {};\n  const community = jLouvain().nodes(nodes).edges(edges)();\n  Object.entries(community).forEach(e => {\n    if (!clusters.hasOwnProperty(e[1])) {\n      clusters[e[1]] = [];\n    }\n    clusters[e[1]].push(e[0]);\n  });\n  // Sort by cluster size\n  Object.entries(clusters)\n    .sort((a, b) => a[1].length < b[1].length)\n    .forEach((cluster, i) => {\n      if (cluster[1].length === 1) {\n        community[cluster[1][0]] = option.nulliso ? null : i;\n      } else {\n        cluster[1].forEach(e => {\n          community[e] = i;\n        });\n      }\n    });\n  return community;\n}\n\n\nexport default {\n  communityDetection\n};\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: d3.schemeCategory10, unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.call(updateColorRangeGroup, range);\n}\n\n\nfunction updateColorRangeGroup(selection, range) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const values = rbox.colorScaleBoxValue(selection.select('.range'));\n  if (!values.length) {\n    return scaledef.colorRangeTypes.find(e => e.key === type).range;\n  } else {\n    return values;\n  }\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values;\n      if (values.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values;\n        if (values.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module network */\n\n\nimport NetworkState from './network/state.js';\nimport {default as community} from './network/communityDetection.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as view} from './network/view.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nexport default {\n  NetworkState, community, control, view, force, interaction\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || ['#7fffd4'];\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || ['#333333'];\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n"],"names":["defaultFieldProperties","fields","map","e","hasOwnProperty","name","key","visible","format","sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","_","fromPairs","uuidv4","replace","c","r","Math","random","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","json","columns","sort","id","dataType","schemaVersion","revision","status","records","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","convertTable","data","forEach","i","index","structure","_structure","_index","v08_nodes","$schema","width","height","convertNetwork","edges","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","column","domain","range","unknown","size","text","nodeContent","label","nodeTableId","misc","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","communityDetection","option","length","community","nulliso","clusters","jLouvain","Object","entries","push","a","b","cluster","types","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","colorRangeTypes","schemeCategory10","schemePaired","concat","schemeSet2","schemePastel2","schemeSet3","presets","colorPalettes","scaleFunction","attr","sf","mid","clamp","d","result","undefined","updateTextBox","selection","select","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","textBox","classed","append","call","textBoxValue","readonlyBox","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","filter","checkBox","box","checkBoxValue","numberBox","min","max","step","numberBoxValue","fileInputBox","accept","fileInputBoxValue","selectBoxItems","items","options","selectAll","exit","remove","enter","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","values","each","this","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateRangeBox","updateColorScaleBox","rangeArray","style","rangeBox","f","t","rangeBoxValue","colorScaleBox","m","on","event","stopPropagation","colorScaleBoxValue","arr","buttonBox","type","menuButton","menuButtonLink","icon","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","node","click","dropdownMenuFileValue","files","updateColorRangeGroup","lbox","scaledef","p","rbox","dispatch","updateScaleBoxGroup","isLog","invalid","colorRangeGroup","palettes","rangeTypes","colorRangeGroupValue","scaleBoxGroup","scaleTypes","scaleBoxGroupValue","mainControlBox","state","viewModes","enableFocusedView","enableOverlookView","thldGroup","networkThresholdCutoff","forceBox","simulationOnLoad","updateMainControlBox","snapshotNotifier","fitNotifier","focusedView","updateComponentNotifier","overlookView","setForceNotifier","numEdges","weight","n","combinations","logD","log10","tickCallback","simulation","alpha","isStopped","alphaMin","parseInt","stickNotifier","relaxNotifier","restartNotifier","nodeColorControlBox","group","updateNodeColorControlBox","updateNodeAttrNotifier","nodeSizeControlBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","updateEdgeAttrNotifier","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","updateControlBox","svgWidth","svgHeight","updateNodes","showStruct","entered","updateNodeCoords","merged","merge","html","updateEdges","updateEdgeCoords","updateNodeAttrs","color","labelColor","d3_format","updateEdgeAttrs","x","y","sx","sy","tx","ty","updateAttrs","moveNode","moveEdge","updateComponents","nodesToRender","numNodes","focusedViewThreshold","overlookViewThreshold","edgesToRender","zoomListener","dragListener","move","datum","adjacency","num","transform","tk","resizeViewBox","resize","area","setViewBox","offsetWidth","offsetHeight","component","drag","setCoords","zoom","k","prevTransform","xMoved","yMoved","zoomIn","setTransform","fit","viewBox","getBBox","viewBoxRatio","boundaryHeight","boundary","bottom","top","boundaryWidth","right","left","zoomIdentity","translate","setInteraction","end","setAllCoords","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","NetworkState","[object Object]","legacy","JSON","parse","stringify","updateNodeNotifier","updateEdgeNotifier","snapShotNotifier","forceField","focusArea","setFocusArea","setBoundary","xs","ys","apply","coordsList","nbr","control","controlBox","tabs","content","view","networkViewFrame","networkView","transition","duration","forceSimulation","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","activate"],"mappings":"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"}