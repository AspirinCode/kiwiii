{"version":3,"file":"kw-network.js","sources":["../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/mapper.js","../src/common/collection.js","../src/common/scale.js","../src/component/formBox.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/button.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/component.js","../src/network/interaction.js","../src/network/force.js","../src/network.js","../src/network/state.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport _ from 'lodash';\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n// TODO: need package, view and dataset tables?\nconst schema = {\n  items: 'storeID, sessionStarted'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('sessionStarted')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Returns all views\n * @return {array} view objects\n */\nfunction getAllViews() {\n  return getAllItems()\n    .then(items => _.flatten(items.map(e => e.views)));\n}\n\n\n/**\n * Returns a view\n * @param {string} viewID - view ID\n * @return {array} view objects\n */\nfunction getView(viewID) {\n  return getAllViews()\n    .then(views => views.find(e => e.viewID === viewID));\n}\n\n\nfunction getPos(query, key, field) {\n  return getAllItems().then(items => {\n    let pos;\n    let storeID;\n    for (let item of items) {\n      const i = item[field].findIndex(e => e[key] === query);\n      if (i >= 0) {\n        storeID = item.storeID;\n        pos = i;\n        break;\n      }\n    }\n    return [storeID, pos];\n  });\n}\n\n\n/**\n * Append a view next to a specific view\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object\n */\nfunction appendView(viewID, viewObj) {\n  return getPos(viewID, 'viewID', 'views').then(pos => {\n    return updateItem(pos[0], item => {\n      item.views.splice(pos[1] + 1, 0, viewObj);\n    });\n  });\n}\n\n\n/**\n * Update view\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object or update function\n */\nfunction updateView(viewID, viewObj) {\n  return getPos(viewID, 'viewID', 'views').then(pos => {\n    return updateItem(pos[0], item => {\n      if (_.isFunction(viewObj)) {\n        viewObj(item.views[pos[1]]);\n      } else {\n        item.views[pos[1]] = viewObj;\n      }\n    });\n  });\n}\n\n\n/**\n * Returns all collections\n * @return {array} Collection objects\n */\nfunction getAllCollections() {\n  return getAllItems()\n    .then(items => _.flatten(items.map(e => e.dataset)));\n}\n\n\n/**\n * Returns a collection\n * @param {string} collID - Collection ID\n * @return {array} Collection objects\n */\nfunction getCollection(collID) {\n  return getAllCollections()\n    .then(colls => colls.find(e => e.collectionID === collID));\n}\n\n\n/**\n * Append a view next to a specific view\n * @param {string} collID - Collection ID\n * @param {object} collObj - Collection object\n */\nfunction appendCollection(collID, collObj) {\n  return getPos(collID, 'collectionID', 'dataset').then(pos => {\n    return updateItem(pos[0], item => {\n      item.dataset.splice(pos[1] + 1, 0, collObj);\n    });\n  });\n}\n\n\n/**\n * Update collection\n * @param {string} collID - Collection ID\n * @param {object} collObj - Collection object or update function\n */\nfunction updateCollection(collID, collObj) {\n  return getPos(collID, 'collectionID', 'dataset').then(pos => {\n    return updateItem(pos[0], item => {\n      if (_.isFunction(collObj)) {\n        collObj(item.dataset[pos[1]]);\n      } else {\n        item.dataset[pos[1]] = collObj;\n      }\n    });\n  });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4().slice(0, 8);\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItem, putItem, updateItem, deleteItem,\n  getAllViews, getView, appendView, updateView,\n  getAllCollections, getCollection, appendCollection, updateCollection,\n  reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\nfunction serverStatus() {\n  const response = {};\n  return get('server')\n    .then(json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => get('schema'))\n    .then(json)\n    .then(res => {\n      response.schema = res;\n    })\n    .then(() => response);\n}\n\n\nexport default {\n  get, json, text, blob, post, error, serverStatus\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: [keyField].concat(mp.fields),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: table.fields.filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key)),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: fields,\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(mp.fields)\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/collection */\n\nimport _ from 'lodash';\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as mapper} from './mapper.js';\n\n\nexport default class Collection {\n  /**\n   * Create Collection from a flashflood response datatable\n   * If data is not specified, put datatables later by this.append(data)\n   * @param {object} coll - Collection or response object\n   */\n  constructor(coll) {\n    // Settings\n    this.autoIndex = 'index';  // enumerate records\n\n    this.collectionID = coll.collectionID || null;\n    this.name = coll.name || null;\n    this.contents = coll.contents || [coll];\n    this.fields = [];\n    this.contents.forEach(content => {\n      content.fields.forEach(e => this.addField(e));\n    });\n  }\n\n  /**\n   * Add fields\n   * @param {array} fs - list of fields\n   */\n  addField(field) {\n    if (this.fields.find(e => e.key === field.key)) return;\n    if (!field.hasOwnProperty('name')) field.name = field.key;\n    if (!field.hasOwnProperty('visible')) field.visible = true;\n    if (field.hasOwnProperty('d3_format')) field.format = 'd3_format';\n    if (!field.hasOwnProperty('format')) field.format = 'raw';\n    this.fields.push(field);\n  }\n\n  /**\n   * Update fields properties\n   * @param {array} fs - list of fields\n   */\n  updateFields(fs) {\n    this.fields = [];\n    fs.forEach(e => this.addField(e));\n  }\n\n  /**\n   * Join fields\n   * @param {object} mapping - column mapper object\n   */\n  joinFields(mapping) {\n    this.contents.forEach(c => {\n      mapper.apply(c, mapping);\n    });\n    if (mapping.hasOwnProperty('fields')) {\n      mapping.fields.forEach(e => this.addField(e));\n    } else {\n      this.addField(mapping.field);\n    }\n  }\n\n  /**\n   * Return all records of the collection\n   * @return {array} records\n   */\n  records() {\n    return _.flatten(this.contents.map(e => e.records));\n  }\n\n  fetch(command) {\n    const fs = this.contents\n      .filter(e => ['running', 'ready', 'interrupted', 'queued'].includes(e.status))\n      .map(content => {\n        const query = {id: content.workflowID, command: command};\n        return fetcher.get('progress', query)\n          .then(fetcher.json)\n          .then(data => {\n            if (data.status === 'failure') {  // No data found on server\n              return idb.updateCollection(this.collectionID, coll => {\n                const c = coll.contents.find(e => e.workflowID === query.id);\n                c.status = 'failure';\n              });\n            }\n            return idb.updateCollection(this.collectionID, coll => {\n              const i = coll.contents.findIndex(e => e.workflowID === query.id);\n              coll.contents[i] = data;\n            });\n          });\n      });\n    return Promise.all(fs)\n      .then(() => idb.getCollection(this.collectionID))\n      .then(coll => {\n        this.contents = coll.contents;\n      });\n  }\n\n  /**\n   * Retrieve workflows and store it into a local store.\n   * @return {Promise}\n   */\n  pull() {\n    return this.fetch('pull');\n  }\n\n  /**\n   * Retrieve workflows, abort all ongoing workflow task\n   * and store it into a local store.\n   * @return {Promise}\n   */\n  abort() {\n    return this.fetch('abort');\n  }\n\n  /**\n   * Return total number of records\n   * @return {float} total number of records\n   */\n  size() {\n    return _.sum(this.contents.map(e => e.records.length));\n  }\n\n  /**\n   * Return status\n   * @return {string} status\n   */\n  status() {\n    if (this.contents.some(e => e.status === 'interrupted')) return 'interrupted';\n    if (this.contents.some(e => e.status === 'running')) return 'running';\n    if (this.contents.some(e => e.status === 'queued')) return 'queued';\n    if (this.contents.some(e => e.status === 'ready')) return 'ready';\n    if (this.contents.some(e => e.status === 'aborted')) return 'aborted';\n    return 'done';\n  }\n\n  /**\n   * Return ongoing or not\n   * @return {bool} ongoing or not\n   */\n  ongoing() {\n    const s = ['ready', 'queued', 'running', 'interrupted'];\n    return s.includes(this.status());\n  }\n\n  /**\n   * Return percentage of workflow progress\n   * @return {float} progress in percent\n   */\n  progress() {\n    return _.min(this.contents.map(e => e.progress));\n  }\n\n  /**\n   * Return total execution time\n   * @return {float} total time\n   */\n  execTime() {\n    return _.sum(this.contents.map(e => e.execTime));\n  }\n\n  /**\n   * Export collection object as JSON\n   * @return {object} collection JSON\n   */\n  export() {\n    return {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: this.collectionID,\n      name: this.name,\n      fields: this.fields,\n      contents: this.contents\n    };\n  }\n}\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: ['#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462',\n    '#b3de69','#fccde5','#bc80bd','#ccebc5'], unknown: '#f0f0f0'},\n  {key: 'cbsafe', name: 'Colorblind safe', size: 10,\n   range: ['#543005','#8c510a','#bf812d','#dfc27d','#f6e8c3','#c7eae5',\n   '#80cdc1','#35978f','#01665e','#003c30'], unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module component/formBox */\n\n\nimport d3 from 'd3';\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorBox(selection, label, value) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n    .append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .attr('type', 'color');\n  selection\n      .call(updateColorBox, value)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\n\nfunction colorBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  colorBox, updateColorBox, colorBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range, unknown) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.append('div')\n      .classed('unknown', true)\n      .classed('mb-1', true)\n      .call(box.colorBox, 'Unknown', unknown);\n  selection.call(updateColorRangeGroup, range, unknown);\n}\n\n\nfunction updateColorRangeGroup(selection, range, unknown) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n  selection.select('.unknown')\n      .call(box.updateColorBox, unknown)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const range = rbox.colorScaleBoxValue(selection.select('.range'));\n  const unknown = box.colorBoxValue(selection.select('.unknown'));\n  const rvalue = range.length\n    ? range : scaledef.colorRangeTypes.find(e => e.key === type).range;\n  return {\n    range: rvalue,\n    unknown: unknown\n  };\n\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.es.filter(e => e.weight >= value).length;\n        const n = state.ns.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range, state.nodeColor.unknown\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range, state.nodeColor.unknown)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values.range;\n      state.nodeColor.unknown = values.unknown;\n      if (values.range.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range, state.nodeColor.unknown\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range, state.nodeColor.unknown)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values.range;\n        state.nodeLabelColor.unknown = values.unknown;\n        if (values.range.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  updateNodeColorControlBox,\n  controlBox, updateControlBox\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(updateComponents, state);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox,\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.ns.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.ns.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.es\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.ns)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.ns.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module network */\n\n\nimport NetworkState from './network/state.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as component} from './network/component.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nexport default {\n  NetworkState, control, component, force, interaction\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport Collection from '../common/collection.js';\nimport {default as idb} from '../common/idb.js';\n\n\nexport default class NetworkState {\n  constructor(view, nodes, edges) {\n    /* Settings */\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    this.fieldWidth = 1200;\n    this.fieldHeight = 1200;\n\n\n    /* Attributes */\n\n    this.viewID = view.viewID;\n    this.name = view.name;\n\n    this.nodes = new Collection(nodes);\n    this.edges = new Collection(edges);\n\n\n    /* Appearance */\n\n    this.nodeColor = {\n      field: null, scale: 'linear', domain: [0, 1],\n      range: ['#7fffd4', '#7fffd4'], unknown: '#7fffd4'\n    };\n    if (view.hasOwnProperty('nodeColor')) {\n      this.nodeColor.field = view.nodeColor.field;\n      this.nodeColor.scale = view.nodeColor.scale;\n      this.nodeColor.domain = view.nodeColor.domain;\n      this.nodeColor.range = view.nodeColor.range;\n      this.nodeColor.unknown = view.nodeColor.unknown;\n    }\n\n    this.nodeSize = {\n      field: null, scale: 'linear', domain: [1, 1],\n      range: [40, 40], unknown: 40\n    };\n    if (view.hasOwnProperty('nodeSize')) {\n      this.nodeSize.field = view.nodeSize.field;\n      this.nodeSize.scale = view.nodeSize.scale;\n      this.nodeSize.domain = view.nodeSize.domain;\n      this.nodeSize.range = view.nodeSize.range;\n      this.nodeSize.unknown = view.nodeSize.unknown;\n    }\n\n    this.nodeLabel = {\n      text: null, size: 12, visible: false\n    };\n    if (view.hasOwnProperty('nodeLabel')) {\n      this.nodeLabel.text = view.nodeLabel.text;\n      this.nodeLabel.size = view.nodeLabel.size;\n      this.nodeLabel.visible = view.nodeLabel.visible;\n    }\n\n    this.nodeLabelColor = {\n      field: null, scale: 'linear', domain: [1, 1],\n      range: ['#cccccc', '#cccccc'], unknown: '#cccccc'\n    };\n    if (view.hasOwnProperty('nodeLabelColor')) {\n      this.nodeLabelColor.field = view.nodeLabelColor.field;\n      this.nodeLabelColor.scale = view.nodeLabelColor.scale;\n      this.nodeLabelColor.domain = view.nodeLabelColor.domain;\n      this.nodeLabelColor.range = view.nodeLabelColor.range;\n      this.nodeLabelColor.unknown = view.nodeLabelColor.unknown;\n    }\n\n    this.edgeWidth = {\n      scale: 'linear', domain: [0.5, 1],\n      range: [10, 10], unknown: 1\n    };\n    if (view.hasOwnProperty('edgeWidth')) {\n      this.edgeWidth.scale = view.edgeWidth.scale;\n      this.edgeWidth.domain = view.edgeWidth.domain;\n      this.edgeWidth.range = view.edgeWidth.range;\n      this.edgeWidth.unknown = view.edgeWidth.unknown;\n    }\n\n    this.edgeLabel = {\n      size: 12, visible: false\n    };\n    if (view.hasOwnProperty('edgeLabel')) {\n      this.edgeLabel.size = view.edgeLabel.size;\n      this.edgeLabel.visible = view.edgeLabel.visible;\n    }\n\n    // Edge threshold\n    this.networkThresholdCutoff = view.networkThresholdCutoff;\n    this.networkThreshold = view.networkThreshold || view.networkThresholdCutoff;\n\n    // Transform\n    this.transform = view.fieldTransform || {x: 0, y: 0, k: 1};\n\n\n    /* Event listener */\n\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n\n    this.snapShotNotifier = null;\n\n    this.fitNotifier = null;\n\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n\n    /* Working memory */\n\n    // Working copies\n    // D3.force does some destructive operations\n    this.ns = JSON.parse(JSON.stringify(this.nodes.records()));\n    this.es = JSON.parse(JSON.stringify(this.edges.records()));\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.ns.forEach(n => {\n      n.adjacency = [];\n    });\n    this.es.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.ns[e.source].adjacency.push([e.target, i]);\n      this.ns[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Drawing\n    this.forceField = {\n      top: 0, right: this.fieldWidth, bottom: this.fieldHeight, left: 0};\n    this.viewBox = {\n      top: 0, right: this.fieldWidth, bottom: this.fieldHeight, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (view.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(view.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.ns.map(e => e.x);\n    const ys = this.ns.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.ns.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.es can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.es[edge].sx = coordsList[n.index].x;\n          this.es[edge].sy = coordsList[n.index].y;\n        } else {\n          this.es[edge].tx = coordsList[n.index].x;\n          this.es[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.ns[n].x = x;\n    this.ns[n].y = y;\n    this.ns[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.es[edge].sx = x;\n        this.es[edge].sy = y;\n      } else {\n        this.es[edge].tx = x;\n        this.es[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.ns.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.es.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  save() {\n    return Promise.all([\n      idb.updateCollection(this.nodes.collectionID, this.nodes.export()),\n      idb.updateCollection(this.edges.collectionID, this.edges.export()),\n      idb.updateView(this.viewID, this.export())\n    ]);\n  }\n\n  export() {\n    // TODO: need deep copy?\n    return JSON.parse(JSON.stringify({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n      viewID: this.viewID,\n      name: this.name,\n      viewType: \"network\",\n      nodes: this.nodes.collectionID,\n      edges: this.edges.collectionID,\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.ns.map(e => ({x: e.x, y: e.y}))\n    }));\n  }\n\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n"],"names":["sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","format","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","map","e","_","fromPairs","uuidv4","replace","c","r","Math","random","schema","items","idb","Dexie","getAllItems","orderBy","reverse","toArray","getAllViews","then","flatten","views","getPos","key","field","pos","storeID","item","i","findIndex","getAllCollections","dataset","updateItem","updateFunc","where","equals","modify","catch","err","console","error","version","stores","getItem","first","putItem","data","misc","slice","put","deleteItem","delete","getView","viewID","find","appendView","viewObj","splice","updateView","isFunction","getCollection","collID","colls","collectionID","appendCollection","collObj","updateCollection","reset","baseURL","get","url","q","Object","keys","length","JSON","stringify","fetch","credentials","res","status","Promise","reject","Error","statusText","resolve","json","response","text","blob","post","formdata","method","body","serverStatus","server","singleToMulti","mapping","newMapping","entries","forEach","m","created","fields","mappingToTable","mp","hasOwnProperty","concat","records","entry","rcd","f","tableToMapping","table","ignore","Date","filter","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","push","line","values","k","Array","apply","fd","uniqBy","Collection","[object Object]","coll","this","autoIndex","name","contents","content","addField","visible","fs","mapper","command","id","workflowID","fetcher","all","sum","some","min","progress","execTime","$schema","types","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","colorRangeTypes","size","range","unknown","schemePaired","schemeSet2","schemePastel2","schemeSet3","presets","scale","domain","colorPalettes","scaleFunction","attr","sf","mid","clamp","d","result","undefined","updateTextBox","selection","select","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","updateColorBox","textBox","label","classed","append","call","textBoxValue","readonlyBox","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","checkBox","box","checkBoxValue","numberBox","max","step","numberBoxValue","colorBox","on","event","stopPropagation","colorBoxValue","fileInputBox","accept","fileInputBoxValue","selectBoxItems","options","selectAll","exit","remove","enter","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","each","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateRangeBox","updateColorScaleBox","rangeArray","style","rangeBox","t","rangeBoxValue","colorScaleBox","colorScaleBoxValue","arr","buttonBox","type","menuButton","menuButtonLink","icon","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","node","click","dropdownMenuFileValue","files","updateColorRangeGroup","lbox","scaledef","p","rbox","dispatch","updateScaleBoxGroup","isLog","invalid","colorRangeGroup","palettes","rangeTypes","colorRangeGroupValue","scaleBoxGroup","scaleTypes","scaleBoxGroupValue","mainControlBox","state","viewModes","enableFocusedView","enableOverlookView","thldGroup","networkThresholdCutoff","networkThreshold","forceBox","simulationOnLoad","updateMainControlBox","snapshotNotifier","fitNotifier","focusedView","updateComponentNotifier","overlookView","setForceNotifier","numEdges","es","weight","n","ns","combinations","logD","log10","tickCallback","simulation","alpha","isStopped","alphaMin","parseInt","stickNotifier","relaxNotifier","restartNotifier","nodeColorControlBox","nodes","nodeColor","group","updateNodeColorControlBox","updateNodeAttrNotifier","nodeSizeControlBox","nodeSize","updateNodeSizeControlBox","nodeLabelControlBox","nodeLabel","labelGroup","nodeLabelColor","updateNodeLabelControlBox","edgeControlBox","edgeLabel","widthGroup","edgeWidth","updateEdgeControlBox","updateEdgeAttrNotifier","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","updateControlBox","svgWidth","svgHeight","updateNodes","showStruct","index","entered","updateNodeCoords","merged","merge","html","structure","updateEdges","edges","source","updateEdgeCoords","updateNodeAttrs","color","labelColor","d3_format","updateEdgeAttrs","x","y","sx","sy","tx","ty","updateAttrs","updateComponents","nodesToRender","numNodes","focusedViewThreshold","overlookViewThreshold","edgesToRender","zoomListener","dragListener","moveNode","moveEdge","resizeViewBox","width","height","resize","area","setViewBox","offsetWidth","offsetHeight","move","datum","adjacency","num","transform","tk","networkViewFrame","networkView","viewBox","right","bottom","transition","duration","updateNodeNotifier","updateEdgeNotifier","drag","component","setCoords","zoom","prevTransform","xMoved","yMoved","zoomIn","setTransform","fit","getBBox","viewBoxRatio","boundaryHeight","boundary","top","boundaryWidth","left","zoomIdentity","translate","setInteraction","end","coords","setAllCoords","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","NetworkState","view","fieldWidth","fieldHeight","fieldTransform","snapShotNotifier","parse","forceField","focusArea","setFocusArea","setBoundary","xs","ys","coordsList","nbr","edge","export","viewType","control","controlBox","tabs","forceSimulation","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","activate"],"mappings":"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"}