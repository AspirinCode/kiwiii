{"version":3,"file":"kw-network.js","sources":["../src/common/misc.js","../src/common/legacySchema.js","../src/common/scale.js","../src/component/formBox.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/button.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/component.js","../src/network/view.js","../src/network/interaction.js","../src/network/force.js","../src/network.js","../src/network/state.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: d3.schemeCategory10, unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.call(updateColorRangeGroup, range);\n}\n\n\nfunction updateColorRangeGroup(selection, range) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const values = rbox.colorScaleBoxValue(selection.select('.range'));\n  if (!values.length) {\n    return scaledef.colorRangeTypes.find(e => e.key === type).range;\n  } else {\n    return values;\n  }\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values;\n      if (values.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values;\n        if (values.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module network */\n\n\nimport NetworkState from './network/state.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as view} from './network/view.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nexport default {\n  NetworkState, control, view, force, interaction\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || ['#7fffd4'];\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || ['#333333'];\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n"],"names":["defaultFieldProperties","fields","map","e","hasOwnProperty","name","key","visible","format","sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","_","fromPairs","uuidv4","replace","c","r","Math","random","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","json","columns","sort","id","dataType","schemaVersion","revision","status","records","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","convertTable","data","forEach","i","index","structure","_structure","_index","v08_nodes","$schema","width","height","convertNetwork","edges","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","column","domain","range","unknown","size","text","nodeContent","label","nodeTableId","misc","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","types","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","colorRangeTypes","schemeCategory10","schemePaired","concat","schemeSet2","schemePastel2","schemeSet3","presets","colorPalettes","scaleFunction","attr","sf","length","mid","clamp","d","result","undefined","updateTextBox","selection","select","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","textBox","classed","append","call","textBoxValue","readonlyBox","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","filter","checkBox","box","checkBoxValue","numberBox","min","max","step","numberBoxValue","fileInputBox","accept","fileInputBoxValue","selectBoxItems","items","options","selectAll","exit","remove","enter","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","values","each","this","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateRangeBox","updateColorScaleBox","rangeArray","style","rangeBox","f","t","rangeBoxValue","colorScaleBox","m","on","event","stopPropagation","colorScaleBoxValue","arr","push","buttonBox","type","menuButton","menuButtonLink","icon","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","node","click","dropdownMenuFileValue","files","updateColorRangeGroup","lbox","scaledef","p","rbox","dispatch","updateScaleBoxGroup","isLog","invalid","colorRangeGroup","palettes","rangeTypes","colorRangeGroupValue","scaleBoxGroup","scaleTypes","scaleBoxGroupValue","mainControlBox","state","viewModes","enableFocusedView","enableOverlookView","thldGroup","networkThresholdCutoff","forceBox","simulationOnLoad","updateMainControlBox","snapshotNotifier","fitNotifier","focusedView","updateComponentNotifier","overlookView","setForceNotifier","numEdges","weight","n","combinations","logD","log10","tickCallback","simulation","alpha","isStopped","alphaMin","parseInt","stickNotifier","relaxNotifier","restartNotifier","nodeColorControlBox","group","updateNodeColorControlBox","updateNodeAttrNotifier","nodeSizeControlBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","updateEdgeAttrNotifier","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","updateControlBox","svgWidth","svgHeight","updateNodes","showStruct","entered","updateNodeCoords","merged","merge","html","updateEdges","updateEdgeCoords","updateNodeAttrs","color","labelColor","d3_format","updateEdgeAttrs","x","y","sx","sy","tx","ty","updateAttrs","moveNode","moveEdge","updateComponents","nodesToRender","numNodes","focusedViewThreshold","overlookViewThreshold","edgesToRender","zoomListener","dragListener","move","datum","adjacency","num","transform","tk","resizeViewBox","resize","area","setViewBox","offsetWidth","offsetHeight","component","drag","setCoords","zoom","k","prevTransform","xMoved","yMoved","zoomIn","setTransform","fit","viewBox","getBBox","viewBoxRatio","boundaryHeight","boundary","bottom","top","boundaryWidth","right","left","zoomIdentity","translate","setInteraction","end","setAllCoords","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","NetworkState","[object Object]","legacy","JSON","parse","stringify","updateNodeNotifier","updateEdgeNotifier","snapShotNotifier","forceField","focusArea","setFocusArea","setBoundary","xs","ys","apply","coordsList","nbr","control","controlBox","tabs","content","view","networkViewFrame","networkView","transition","duration","forceSimulation","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","activate"],"mappings":"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"}