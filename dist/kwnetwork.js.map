{"version":3,"file":"kwnetwork.js","sources":["../src/common/file.js","../src/common/legacySchema.js","../src/network/component.js","../src/network/view.js","../src/network/interaction.js","../src/network/force.js","../src/common/mapper.js","../src/component/modal.js","../src/component/formBox.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/networkApp.js","../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/component/button.js","../src/network/state.js","../src/common/scale.js","../src/dialog/community.js","../src/dialog/rename.js","../src/network/communityDetection.js","../src/network.js"],"sourcesContent":["\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.filter(e => e.key === 'structure')\n    .forEach(e => {\n      e.format = 'svg';\n    });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.call(updateColorRangeGroup, range);\n}\n\n\nfunction updateColorRangeGroup(selection, range) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const values = rbox.colorScaleBoxValue(selection.select('.range'));\n  if (!values.length) {\n    return scaledef.colorRangeTypes.find(e => e.key === type).range;\n  } else {\n    return values;\n  }\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values;\n      if (values.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values;\n        if (values.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/networkApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from '../common/core.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\nimport {default as scale} from '../common/scale.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as communityDialog} from '../dialog/community.js';\nimport {default as renameDialog} from '../dialog/rename.js';\n\nimport {default as view} from './view.js';\nimport {default as control} from './controlBox.js';\nimport {default as interaction} from './interaction.js';\nimport {default as force} from './force.js';\nimport {default as community} from './communityDetection.js';\nimport NetworkState from './state.js';\n\n\nfunction getGraph(storeID) {\n  return idb.getItemByID(storeID)\n    .then(edges => {\n      return idb.getItemByID(edges.reference.nodes)\n        .then(nodes => {\n          return {edges: edges, nodes: nodes};\n        });\n    });\n}\n\n\nfunction app(data) {\n  // TODO: define field size according to the data size\n  const width = 1200;\n  const height = 1200;\n  const state = new NetworkState(data, width, height);\n  const simulation = force.forceSimulation(width, height);\n  const frame = d3.select('#nw-frame')\n      .call(view.networkViewFrame, state);\n  frame.select('.nw-view')\n      .call(view.networkView, state)\n      .call(interaction.setInteraction, state)\n      .call(force.activate, simulation, state);\n  d3.select('#nw-control')\n      .call(control.controlBox, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#nw-frame').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();\n  // Network view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, 'View control', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .classed('communityd', true)\n      .call(communityDialog.menuLink);\n  menu.append('a')\n      .classed('renamed', true)\n      .call(renameDialog.menuLink);\n  menu.append('a')\n      .classed('saveview', true)\n      .call(button.dropdownMenuItem, null, 'Save to local storage')\n      .on('click', function () {\n        if (state.data.edges.storeID) {\n          return idb.updateItem(state.data.edges.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.edges.name;\n            item.snapshot = state.snapshot();\n          })\n          .then(() => console.info('Snapshot saved'));\n        } else {\n          const data = state.export();\n          return idb.putItem(data.nodes)\n            .then(storeID => {\n              data.edges.reference.nodes = storeID;\n              return idb.putItem(data.edges);\n            })\n            .then(storeID => {\n              window.location = `network.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .call(button.dropdownMenuItem, null, 'Export to JSON')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.nodes.storeID;\n        delete data.edges.storeID;\n        delete data.edges.reference.nodes;\n        hfile.downloadJSON(data, data.edges.name);\n      });\n  if (state.data.nodes.storeID) {\n    // Node datagrid link\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Node datagrid', 'outline-secondary')\n        .attr('href', `datagrid.html?id=${state.data.nodes.storeID}`)\n        .attr('target', '_blank');\n  }\n  // Control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.edges.status);\n  if (ongoing) {\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Refresh', 'outline-secondary')\n        .on('click', function () {\n          core.fetchProgress(state.data.edges.storeID)\n            .then(() => getGraph(state.data.edges.storeID))\n            .then(app);\n        });\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Abort server job', 'warning')\n        .attr('data-toggle', 'modal')\n        .attr('data-target', '#abort-dialog');\n    menubar.append('span')\n        .classed('progress', true)\n      .append('progress')\n        .attr('max', 100)\n        .attr('value', state.data.edges.progress)\n        .text(`${state.data.edges.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.edges.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.edges.status} - ${state.data.edges.records.length} connections created in ${state.data.edges.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('communityd', true)\n      .call(communityDialog.body);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.edges.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  // Title\n  d3.select('title').text(state.data.edges.name);\n  d3.select('#menubar').select('.title').text(state.data.edges.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  // Rename dialog\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.edges.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n      });\n  // Abort dialog\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.edges.storeID, 'abort')\n          .then(() => getGraph(state.data.edges.storeID))\n          .then(app);\n      });\n  // Community dialog\n  dialogs.select('.communityd')\n      .on('submit', function () {\n        const value = communityDialog.value(d3.select(this));\n        const nodeIds = state.data.nodes.records.map(e => e.index);\n        const edges = state.data.edges.records\n          .filter(e => e.weight >= state.networkThreshold);\n        const comm = community.communityDetection(\n          nodeIds, edges, {nulliso: value.nulliso}\n        );\n        const mapping = {\n          key: 'index',\n          field: misc.defaultFieldProperties(\n            [{key: value.name, format: 'd3_format', d3_format: 'd'}]\n          )[0],\n          mapping: comm\n        };\n        mapper.apply(state.data.nodes, mapping);\n        state.nodeColor = {\n          field: value.name, scale: 'ordinal', domain: null,\n          range: scale.colorRangeTypes[3].range,\n          unknown: scale.colorRangeTypes[3].unknown\n        };\n        $('#community-dialog').modal('hide');  // TODO:\n        d3.select('#loading-icon').style('display', 'none');\n        app(state.export());\n      });\n}\n\n\nexport default {\n  getGraph, app, updateApp\n};\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  fetchProgress\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, id, label, type, target) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, id, label, type) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, id, label) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, id, label, target) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, id, label, accept) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .text(label)\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      })\n    .append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || ['#7fffd4'];\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || ['#333333'];\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: d3.schemeCategory10, unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module dialog/community */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'community-dialog';\nconst title = 'Comunity detection';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'community', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Name\n  dialog.select('.modal-body').append('div')\n      .classed('name', true)\n      .call(box.textBox, 'comm-name', 'New name', 40, 'comm_');\n  // Assign null to isolated nodes\n  dialog.select('.modal-body').append('div')\n      .classed('nulliso', true)\n      .call(box.checkBox, 'comm-nulliso', 'Assign null to isolated nodes', true);\n}\n\n\nfunction value(selection) {\n  return {\n    name: box.textBoxValue(selection.select('.name')),\n    nulliso: box.checkBoxValue(selection.select('.nulliso'))\n  };\n}\n\n\nexport default {\n  menuLink, body, value\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'rename', title, id);\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module network/communityDetection */\n\nimport jLouvain from 'jLouvain';\n\n\nexport function communityDetection(nodes, edges, option) {\n  // TODO: partition resolution setting\n  // TODO: Error at edges.length 0\n  if (!edges.length) {\n    const community = {};\n    nodes.forEach(e => { community[e] = option.nulliso ? null : e; });\n    return community;\n  }\n  const clusters = {};\n  const community = jLouvain().nodes(nodes).edges(edges)();\n  Object.entries(community).forEach(e => {\n    if (!clusters.hasOwnProperty(e[1])) {\n      clusters[e[1]] = [];\n    }\n    clusters[e[1]].push(e[0]);\n  });\n  // Sort by cluster size\n  Object.entries(clusters)\n    .sort((a, b) => a[1].length < b[1].length)\n    .forEach((cluster, i) => {\n      if (cluster[1].length === 1) {\n        community[cluster[1][0]] = option.nulliso ? null : i;\n      } else {\n        cluster[1].forEach(e => {\n          community[e] = i;\n        });\n      }\n    });\n  return community;\n}\n\n\nexport default {\n  communityDetection\n};\n","\n/** @module network */\n\nimport d3 from 'd3';\n\nimport {default as core} from './common/core.js';\nimport {default as hfile} from './common/file.js';\nimport {default as misc} from './common/misc.js';\n\nimport {default as button} from './component/button.js';\n\nimport NetworkState from './network/state.js';\nimport {default as view} from './network/view.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\nimport {default as networkApp} from './network/networkApp.js';\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const storeID = misc.URLQuery().id || null;\n  const dataURL = misc.URLQuery().location || null;\n  if (storeID) {\n    // Load from IndexedDB store\n    return core.fetchProgress(storeID, 'update')\n      .then(() => networkApp.getGraph(storeID))\n      .then(networkApp.app);\n  } else if (dataURL) {\n    // Fetch via HTTP\n    return hfile.fetchJSON(dataURL)\n      .then(networkApp.app);\n  } else {\n    // New network\n    const menubar = d3.select('#menubar');\n    menubar.selectAll('div,a').remove();\n    const menu = menubar.append('div')\n        .call(button.dropdownMenuButton, null, '+ New network', 'primary')\n        .select('.dropdown-menu');\n    menu.append('a')\n        .call(button.dropdownMenuFile, 'import', 'Import view', '.gfc,.gfr,.json,.gz')\n        .on('change', function () {\n          const file = button.dropdownMenuFileValue(d3.select(this));\n          hfile.loadJSON(file).then(networkApp.app);\n        });\n    menubar.append('a')\n        .call(button.menuButton, null, 'Control panel', 'outline-secondary')\n        .attr('href', 'control.html')\n        .attr('target', '_blank');\n  }\n}\n\n\nexport default {\n  NetworkState, view, force, interaction, run\n};\n"],"names":["readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","text","pako","inflate","to","JSON","parse","downloadDataFile","name","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","e","v07_to_v08_nodes","json","fields","columns","map","sort","format","id","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","records","query","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","updateNodes","selection","showStruct","nodes","selectAll","d","index","exit","remove","entered","enter","append","attr","call","updateNodeCoords","svgWidth","svgHeight","merged","merge","select","html","structure","updateEdges","edges","source","style","weight","updateEdgeCoords","updateNodeAttrs","state","each","color","scale","scaleFunction","nodeColor","field","size","nodeSize","labelColor","nodeLabelColor","d3","this","nodeLabel","find","key","misc","formatNum","d3_format","parseFloat","parseInt","visible","updateEdgeAttrs","edgeWidth","edgeLabel","x","y","sx","sy","tx","ty","updateAttrs","moveNode","moveEdge","resize","area","node","setViewBox","offsetWidth","offsetHeight","component","resizeViewBox","dragListener","drag","on","move","setCoords","zoomListener","zoom","t","transform","k","focusedView","p","prevTransform","xMoved","yMoved","zoomIn","setTransform","updateComponents","fit","viewBox","getBBox","viewBoxRatio","width","height","boundaryHeight","boundary","bottom","top","boundaryWidth","right","left","zoomIdentity","translate","end","simulation","coords","setAllCoords","stick","alpha","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","filter","networkThreshold","force","links","singleToMulti","mapping","newMapping","Object","entries","forEach","m","dialogBase","classed","updateTextBox","value","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","selectBoxItems","items","options","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","values","includes","updateRangeBox","range","updateColorScaleBox","rangeArray","length","updateColorRangeGroup","lbox","scaledef","colorRangeTypes","selectBoxValue","colorPalettes","rbox","dispatch","updateScaleBoxGroup","domain","presets","isLog","rangeBoxValue","invalid","isNaN","mainControlBox","button","buttonBox","viewModes","box","checkBox","enableFocusedView","enableOverlookView","thldGroup","numberBox","networkThresholdCutoff","readonlyBox","forceBox","simulationOnLoad","updateMainControlBox","snapshotNotifier","fitNotifier","checkBoxValue","updateComponentNotifier","overlookView","numberBoxValue","setForceNotifier","numEdges","n","combinations","logD","Math","log10","tickCallback","isStopped","alphaMin","stickNotifier","relaxNotifier","restartNotifier","nodeColorControlBox","selectBox","sortType","group","colorRangeGroup","scaleBoxGroup","types","updateNodeColorControlBox","updateNodeAttrNotifier","colorRangeGroupValue","scaleBoxGroupValue","nodeSizeControlBox","rangeBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","updateEdgeAttrNotifier","controlBoxFrame","navID","contentID","controlBoxNav","label","controlBoxItem","updateControlBox","getGraph","storeID","idb","getItemByID","then","app","NetworkState","forceSimulation","networkViewFrame","networkView","setInteraction","activate","control","controlBox","onresize","menubar","menu","dropdownMenuButton","communityDialog","menuLink","renameDialog","dropdownMenuItem","updateItem","item","uuidv4","snapshot","console","info","export","putItem","location","hfile","downloadJSON","menuButtonLink","core","fetchProgress","dialogs","body","modal","confirmDialog","updateApp","updateBody","nodeIds","comm","community","communityDetection","nulliso","defaultFieldProperties","mapper","apply","unknown","$","hasOwnProperty","fmt","d3format","undefined","Number","partialMatch","toString","toUpperCase","indexOf","URLQuery","pairs","search","substring","split","_","fromPairs","replace","c","r","random","schema","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","first","deleteItem","delete","put","updateFunc","modify","reset","baseURL","get","q","keys","stringify","fetch","credentials","res","Error","statusText","response","post","formdata","method","command","workflow","fetcher","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","compress","str","gzip","menuButton","menuModalLink","dropdownMenuModal","dropdownMenuFile","accept","click","dropdownMenuFileValue","files","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","convertTable","i","_structure","_index","v08_nodes","$schema","convertNetwork","nodeFields","snp","fieldTransform","nodePositions","edge","column","nodeContent","nodeTableId","v07_to_v08_edges","nodesID","idx_converter","v08_graph","nodeContentVisible","schemeCategory20","edgeVisible","threshold","params","v10_edges","[object Object]","focusedViewThreshold","overlookViewThreshold","legacy","adjacency","num","push","updateNodeNotifier","updateEdgeNotifier","snapShotNotifier","forceField","focusArea","setFocusArea","setBoundary","xs","ys","min","max","tk","coordsList","nbr","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","schemeCategory10","schemePaired","concat","schemeSet2","schemePastel2","schemeSet3","sf","mid","clamp","nodesToRender","numNodes","edgesToRender","datum","transition","duration","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","mappingToTable","mp","keyField","entry","rcd","f","tableToMapping","table","ignore","Date","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","line","Array","fd","uniqBy","message","base","footer","submitDialog","title","textBox","textBoxValue","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","step","fileInputBox","fileInputBoxValue","dialog","checklistBox","checklistBoxValue","colorScaleBox","stopPropagation","colorScaleBoxValue","arr","palettes","rangeTypes","scaleTypes","tabs","content","option","clusters","jLouvain","b","cluster","run","protocol","navigator","onLine","dataURL","networkApp"],"mappings":"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"}