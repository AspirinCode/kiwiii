{"version":3,"file":"kwdatagrid.js","sources":["../src/common/file.js","../src/common/legacySchema.js","../src/common/mapper.js","../src/datagrid/component.js","../src/datagrid/sort.js","../src/datagrid/view.js","../src/component/modal.js","../src/component/formListBox.js","../src/component/table.js","../src/dialog/fieldConfig.js","../src/component/formBox.js","../src/dialog/formGroup.js","../src/datagrid/datagridApp.js","../src/datagrid/newDatagrid.js","../src/common/KArray.js","../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/datagrid/state.js","../src/common/image.js","../src/component/button.js","../src/dialog/fieldFile.js","../src/dialog/networkgen.js","../src/dialog/rename.js","../src/dialog/search.js","../src/dialog/struct.js","../src/dialog/filter.js","../src/dialog/sdf.js","../src/datagrid.js"],"sourcesContent":["\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module common/mapper */\n\nimport KArray from './KArray.js';\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields = KArray.from(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .unique('key').toArray();\n}\n\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module datagrid/component */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as img} from '../common/image.js';\n\n\nfunction updateHeader(selection, state) {\n  selection.style('width', `${state.contentWidth}px`);\n  const header = selection.select('.dg-header')\n    .selectAll('.dg-hcell')\n      .data(state.visibleFields, d => d.key);\n  header.exit().remove();\n  header.enter().append('div')\n      .classed('dg-hcell', true)\n      .style('display', 'inline-block')\n    .merge(header)\n      .style('width', d => `${d.width}px`)\n      .text(d => d.name);\n}\n\n\nfunction updateViewport(selection, state) {\n  selection.select('.dg-body')\n    .style('height', `${state.bodyHeight}px`)\n    .style('position', \"relative\");\n  selection.select('.dg-viewport')\n    .style('overflow-y', 'auto')\n    .on('scroll', function () {\n      const scrollTop = d3.select(this).node().scrollTop;\n      const pos = Math.floor(scrollTop / state.rowHeight);\n      if (pos !== state.previousViewportTop) {\n        state.setScrollPosition(pos);\n        selection.call(updateRows, state);\n      }\n    })\n    .dispatch('scroll');\n}\n\n\nfunction updateRows(selection, state) {\n  const cData = state.visibleFields;\n  const rowSelection = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(state.recordsToShow(), state.keyFunc)\n      .style('height', `${state.rowHeight}px`);\n  rowSelection.exit().remove();\n  const rowEntered = rowSelection.enter().append('div')\n      .attr('class', 'dg-row')\n      .style('position', \"absolute\");\n  rowEntered.selectAll('.dg-cell')\n    .data(cData.map(e => e.width))\n    .enter().append('div')\n      .classed('dg-cell', true)\n      .classed('align-middle', true)\n      .style('display', 'inline-block')\n      .style('width', d => `${d}px`);\n  // TODO: need refactoring\n  rowEntered.merge(rowSelection)\n      .order()\n      .each(function(d, ri) {\n        const rowPos = (state.viewportTop + ri) * state.rowHeight;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (state.viewportTop + ri) % 2 === 0)\n        .selectAll('.dg-cell')\n          .html(function (_, i) {\n            d3.select(this).attr('id', `c${ri}-${i}`);\n            const value = d[cData[i].key];\n            if (value === undefined) return '';\n            if (cData[i].format === 'd3_format') {\n              return misc.formatNum(value, cData[i].d3_format);\n            }\n            if (cData[i].format === 'plot') return '';\n            if (cData[i].format === 'compound_id') {\n              return `<a href=\"profile.html?compound=${value}\" target=\"_blank\">${value}</a>`;\n            }\n            if (cData[i].format === 'image') {  // data URI\n              return `<img src=\"${value}\" width=\"180\" height=\"180\"/>`;\n            }\n            return value;\n          })\n          .each(function(_, i) {\n            if (cData[i].format !== 'plot') return;\n            if (!d.hasOwnProperty(cData[i].key)) return;\n            const value = d[cData[i].key];\n            img.showPlot(value, `#c${ri}-${i}`);\n          });\n    });\n}\n\nfunction resizeViewport(selection, state) {\n  // TODO: set width\n  selection.select('.dg-viewport').style('height', `${state.viewportHeight}px`);\n}\n\nexport default {\n  updateHeader, updateViewport, updateRows, resizeViewport\n};\n","\n/** @module datagrid/sort */\n\nimport d3 from 'd3';\nimport {default as misc} from '../common/misc.js';\nimport {default as component} from './component.js';\n\n\nfunction numericAsc(a, b) {\n  const fa = parseFloat(a);\n  const fb = parseFloat(b);\n  if (isNaN(fa) || isNaN(fb)) {\n    return String(b).localeCompare(String(a));\n  }\n  return fb - fa;\n}\n\n\nfunction numericDesc(a, b) {\n  return numericAsc(b, a);\n}\n\n\nfunction textAsc(a, b) {\n  return String(b).localeCompare(String(a));\n}\n\n\nfunction textDesc(a, b) {\n  return textAsc(b, a);\n}\n\n\nfunction setSort(selection, state) {\n  selection.select('.dg-header').selectAll('.dg-hcell')\n    .filter(d => misc.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n      const isNum = misc.sortType(d.format) === 'numeric';\n      const cmp = isAsc\n        ? (isNum ? numericAsc : textAsc)\n        : (isNum ? numericDesc : textDesc);\n      state.data.records = state.data.records.sort((a, b) => cmp(a[d.key], b[d.key]));\n      selection.call(component.updateRows, state);\n    });\n}\n\n\nexport default {\n  setSort\n};\n","\n/** @module datagrid/view */\n\nimport {default as component} from './component.js';\n\n\nfunction resize(selection, state) {\n  const viewport = selection.select('.dg-viewport');\n  const viewportTop = viewport.node().getBoundingClientRect().top;\n  state.viewportHeight = window.innerHeight - viewportTop - 5;\n  state.previousNumViewportRows = state.numViewportRows;\n  state.numViewportRows = Math.ceil(state.viewportHeight / state.rowHeight) + 1;\n  selection.call(component.resizeViewport, state);\n}\n\nfunction datagrid(selection, state) {\n  if (selection.selectAll('div').size()) {\n    selection.selectAll('div').remove();\n  }\n  selection.append('div')\n    .classed('dg-header', true);\n  selection.append('div')\n      .classed('dg-viewport', true)\n    .append('div')\n      .classed('dg-body', true);\n  selection.call(resize, state);\n  state.updateHeaderNotifier = () => {\n    selection.call(component.updateHeader, state);\n    selection.call(component.updateViewport, state);\n  };\n  selection.call(component.updateHeader, state);\n  selection.call(component.updateViewport, state);\n\n}\n\n\nexport default {\n  resize, datagrid\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/table */\n\n// Simple tables\n// use dataGrid.js for interactive and smooth datatable\n\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction render(selection, id, caption, fields, records) {\n  selection\n      .classed('table', true)\n      .classed('table-striped', true)\n      .classed('table-hover', true)\n      .attr('id', id);\n  if (caption) {\n  selection.append('caption')\n      .text(caption);\n  }\n  selection.append('thead')\n    .append('tr');\n  selection.append('tbody');\n  if (fields) {\n    selection.call(updateHeader, fields, records);\n  }\n}\n\n\nfunction updateHeader(selection, fields, records) {\n  const header = selection.select('thead tr')\n    .selectAll('th')\n      .data(fields);\n  header.exit().remove();\n  header.enter()\n    .append('th')\n      .text(d => d.name);\n  if (records) {\n    selection.call(updateContents, records, d => d.key, updateRowFunc(fields));\n  }\n}\n\n\nfunction updateContents(selection, records, keyFunc, rowFactory) {  // TODO: specify key\n  const rows = selection.select('tbody')\n    .selectAll('tr')\n      .data(records, keyFunc);\n  rows.exit().remove();\n  rows.enter()\n    .append('tr')\n    .merge(rows)\n    .each(function (d) {\n      d3.select(this)\n        .selectAll('td').remove();\n      d3.select(this)\n        .call(rowFactory, d);\n    });\n}\n\n\nfunction updateRowFunc(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const value = record[field.key];\n      const cell = selection.append('td')\n        .classed('align-middle', true);\n      if (value === undefined) return;\n      if (field.format === 'd3_format') {\n        cell.text(misc.formatNum(value, field.d3_format));\n      }\n      else if (field.format === 'plot') {\n        cell.text('[plot]');\n      }\n      else if (field.format === 'image') {\n        cell.text('[image]');\n      }\n      else if (field.format === 'control') {\n        cell.call(value);\n      } else {\n        cell.text(value);\n      }\n    });\n  };\n}\n\n\nexport default {\n  render, updateHeader, updateContents\n};\n","\n/** @module dialog/fieldConfig */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldconf-dialog';\nconst title = 'Field Setting';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction updateRowFunc(selection, record) {\n  selection.append('td')\n      .classed('name', true)\n      .text(record.name);\n  selection.append('td')\n      .classed('visible', true)\n    .append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record.visible);\n  const generalFormat = ['text', 'numeric', 'd3_format', 'raw', 'compound_id'];\n  const fs = generalFormat.includes(record.format) ? generalFormat : [record.format];\n  const items = fs.map(e => ({key: e, name: e}));\n  const format = selection.append('td')\n      .classed('format', true);\n  const formatSelect = format.append('select');\n  format.call(lbox.selectBoxItems, items);\n  formatSelect\n      .property('disabled', !generalFormat.includes(record.format))\n      .property('value', record.format);\n  selection.append('td')\n      .classed('d3format', true)\n    .append('input')\n      .attr('size', 10)\n      .property('disabled', record.format === 'd3_format' ? null : true)\n      .property('value', record.d3_format || null);\n  formatSelect\n      .on('change', function () {\n        selection.select('.d3format')\n          .select('input')\n            .property('disabled', this.value !== 'd3_format');\n      });\n}\n\n\nfunction tableRowValue(selection) {\n  const value = {};\n  value.visible = selection.select('.visible')\n    .select('input').property('checked');\n  value.format = selection.select('.format')\n    .select('select').property('value');\n  if (value.format === 'd3_format') {\n    value.d3_format = selection.select('.d3format')\n      .select('input').property('value');\n  }\n  return value;\n}\n\n\nfunction body(selection) {\n  const fields = misc.defaultFieldProperties([\n    {key: 'name', format: 'text'},\n    {key: 'visible', format: 'control'},\n    {key: 'format', format: 'control'},\n    {key: 'd3_format', format: 'control'}\n  ]);\n  selection\n      .call(modal.submitDialog, id, title)\n    .select('.modal-body')\n    .append('table')\n      .classed('field', true)\n      .call(table.render, null, null, fields);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.field')\n      .call(table.updateContents, state.fields, d => d.key, updateRowFunc);\n}\n\n\nfunction value(selection) {\n  const fields = [];\n  selection.select('tbody').selectAll('tr')\n    .each(function (d) {\n      const field = tableRowValue(d3.select(this));\n      field.key = d.key;\n      field.name = d.name;\n      fields.push(field);\n    });\n  return fields;\n}\n\n\nexport default {\n  menuLink, updateRowFunc, body, updateBody, value\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module dialog/formGroup */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction queryMolGroup(selection, id, resources) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('format', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-format`, 'Format',\n            [\n              {key: 'molfile', name: 'MDL Molfile'},\n              {key: 'dbid', name: 'Compound ID'}\n            ], 'molfile');\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.append('div')\n      .classed('source', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-source`, 'Source', res, null);\n  selection.append('div')\n      .classed('textquery', true)\n      .classed('mb-1', true)\n      .call(box.textBox, `${id}-textquery`, 'Query', null, '');\n  selection.append('div')\n      .classed('areaquery', true)\n      .classed('mb-1', true)\n      .call(box.textareaBox, `${id}-areaquery`, 'Query', 6, null, '');\n  // Popover\n  $(function () {\n    $('[data-toggle=\"popover\"]')\n      .popover({html: true, trigger: 'focus'});\n  });\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('preview', true)\n      .attr('data-toggle', 'popover')\n      .attr('data-html', 'true')\n      .attr('data-content', '<div id=\"previmg\"></div>')\n      .call(button.menuButton, `${id}-preview`, 'Structure preview', 'primary');\n  selection.call(updateQueryMolGroup);\n}\n\nfunction updateQueryMolGroup(selection) {\n  selection.select('.format')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      selection.select('.source')\n        .select('select')\n          .property('disabled', value !== 'dbid');\n      selection.select('.textquery')\n          .property('hidden', value !== 'dbid');\n      selection.select('.areaquery')\n          .property('hidden', value !== 'molfile');\n    })\n    .dispatch('change');\n  selection.select('.preview')\n    .on('click', function () {\n      const query = queryMolGroupValue(selection);\n      return fetcher.get('strprev', query)\n        .then(fetcher.text)\n        .then(res => d3.select('#previmg').html(res), fetcher.error);\n    });\n}\n\nfunction queryMolGroupValue(selection) {\n  const format = lbox.selectBoxValue(selection.select('.format'));\n  const source = lbox.selectBoxValue(selection.select('.source'));\n  const textquery = box.textBoxValue(selection.select('.textquery'));\n  const areaquery = box.textareaBoxLines(selection.select('.areaquery'));\n  return {\n    format: format,\n    source: format === 'dbid' ? source : null,\n    value: format === 'molfile' ? areaquery : textquery\n  };\n}\n\n\nfunction simOptionGroup(selection, id) {\n  selection\n      .classed('mb-3', true)\n    .append('p')\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text('Optional parameters');\n  const collapse = selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true);\n  collapse.append('div')\n      .classed('ignoreh', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, `${id}-ignoreh`, 'Ignore explicit hydrogens', true);\n  collapse.append('div')\n      .classed('timeout', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-timeout`, 'Timeout (RDKit FMCS)', 1, 999, 1, 2);\n  collapse.append('div')\n      .classed('diam', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-diam`, 'Diameter (MCS-DR/GLS)', 4, 999, 1, 8);\n  collapse.append('div')\n      .classed('tree', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-tree`, 'Max tree size (MCS-DR/GLS)', 20, 999, 1, 40);\n  collapse.append('div')\n      .classed('skip', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-skip`, 'Mol size cutoff (MCS-DR/GLS)', 20, 999, 1, 500);\n  collapse.selectAll('label.col-form-label')\n      .classed('col-4', false)\n      .classed('col-6', true);\n  collapse.selectAll('input.form-control')\n      .classed('col-8', false)\n      .classed('col-6', true);\n}\n\nfunction simOptionGroupValue(selection) {\n  const timeout = selection.select('.timeout');\n  const diam = selection.select('.diam');\n  const tree = selection.select('.tree');\n  const skip = selection.select('.skip');\n  const query = {\n    ignoreHs: box.checkBoxValue(selection.select('.ignoreh'))\n  };\n  if (!timeout.select('input').property('disabled')) {\n    query.timeout = box.numberBoxValue(timeout);\n  }\n  if (!diam.select('input').property('disabled')) {\n    query.diameter = box.numberBoxValue(diam);\n  }\n  if (!tree.select('input').property('disabled')) {\n    query.maxTreeSize = box.numberBoxValue(tree);\n  }\n  if (!skip.select('input').property('disabled')) {\n    query.molSizeCutoff = box.numberBoxValue(skip);\n  }\n  return query;\n}\n\n\nexport default {\n  queryMolGroup, updateQueryMolGroup, queryMolGroupValue,\n  simOptionGroup, simOptionGroupValue\n};\n","\n/** @module datagrid/datagridApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from '../common/core.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as fieldConfigDialog} from '../dialog/fieldConfig.js';\nimport {default as fieldFileDialog} from '../dialog/fieldFile.js';\nimport {default as networkgenDialog} from '../dialog/networkgen.js';\nimport {default as renameDialog} from '../dialog/rename.js';\n\nimport {default as view} from './view.js';\nimport {default as sort} from './sort.js';\nimport DatagridState from './state.js';\n\n\nfunction app(data, serverStatus) {\n  const state = new DatagridState(data);\n  state.serverStatus = serverStatus;\n  d3.select('#datagrid')\n    .call(view.datagrid, state)\n    .call(sort.setSort, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#datagrid').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  // Datagrid view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, 'View control', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .call(fieldConfigDialog.menuLink);\n  menu.append('a')\n      .call(fieldFileDialog.menuLink);\n  menu.append('a')\n      .call(networkgenDialog.menuLink);\n  menu.append('a')\n      .call(renameDialog.menuLink);\n  menu.append('a')\n      .classed('saveview', true)\n      .call(button.dropdownMenuItem, null, 'Save to local storage')\n      .on('click', function () {\n        if (state.data.storeID) {\n          return idb.updateItem(state.data.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.name;\n            item.fields = state.data.fields;\n            item.records = state.data.records;\n          })\n          .then(() => console.info('Datagrid saved'));\n        } else {\n          return idb.putItem(state.export())\n            .then(storeID => {\n              window.location = `datagrid.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .classed('exportjson', true)\n      .call(button.dropdownMenuItem, null, 'Export to JSON')\n      .on('click', () => {\n        const data = state.export();\n        hfile.downloadJSON(data, data.name);\n      });\n  menu.append('a')\n      .classed('exportexcel', true)\n      .call(button.dropdownMenuItem, null, 'Export to Excel worksheet')\n      .on('click', () => {\n        const data = state.export();\n        const formData = new FormData();\n        formData.append('contents', new Blob([JSON.stringify(data)]));\n        return fetcher.post('xlsx', formData)\n          .then(fetcher.blob)\n          .then(blob => hfile.downloadDataFile(blob, `${data.name}.xlsx`));\n      });\n  // Open control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.status);\n  if (ongoing) {\n  menubar.append('a')\n      .classed('refresh', true)\n      .call(button.menuButtonLink, null, 'Refresh', 'outline-secondary')\n      .on('click', function () {\n        return core.fetchProgress(state.data.storeID)\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => app(item, state.serverStatus));\n      });\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Abort server job', 'warning')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', '#abort-dialog');\n  menubar.append('span')\n      .classed('progress', true)\n    .append('progress')\n      .attr('max', 100)\n      .attr('value', state.data.progress)\n      .text(`${state.data.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.status} - ${state.data.records.length} records found in ${state.data.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('fieldconfd', true)\n      .call(fieldConfigDialog.body);\n  dialogs.append('div')\n      .classed('fieldfiled', true)\n      .call(fieldFileDialog.body);\n  dialogs.append('div')\n      .classed('netgend', true)\n      .call(networkgenDialog.body, serverStatus.rdkit);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  d3.select('#loading-icon').style('display', 'none');\n  // Title\n  d3.select('title').text(state.data.name);\n  d3.select('#menubar').select('.title').text(state.data.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.select('.fieldconfd')\n      .call(fieldConfigDialog.updateBody, state)\n      .on('submit', function () {\n        state.setFields(fieldConfigDialog.value(d3.select(this)));\n        state.updateHeaderNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.fieldfiled')\n      .on('submit', function () {\n        return fieldFileDialog.readFile(d3.select(this))\n          .then(data => {\n            state.joinFields(data);\n            state.updateHeaderNotifier();\n            updateApp(state);\n          });\n      });\n  dialogs.select('.netgend')\n      .on('submit', function () {\n        const formData = new FormData();\n        const params = networkgenDialog.queryParams(d3.select(this));\n        formData.append('params', JSON.stringify(params));\n        formData.append('contents', new Blob([JSON.stringify(state.export())]));\n        return fetcher.post(`${params.measure}net`, formData)\n          .then(fetcher.json)\n          .then(data => {\n            data.reference.nodes = state.data.storeID;\n            data.fields = misc.defaultFieldProperties(data.fields);\n            return data;\n          })\n          .then(idb.putItem)\n          .then(storeID => {\n            d3.select('#loading-icon').style('display', 'none');\n            window.open(`network.html?id=${storeID}`, '_blank');\n          });\n      });\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n  });\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.storeID, 'abort')\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => app(item, state.serverStatus));\n      });\n}\n\n\nexport default {\n  app, updateApp\n};\n","\n/** @module datagrid/newDatagrid */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\n\nimport {default as searchDialog} from '../dialog/search.js';\nimport {default as structDialog} from '../dialog/struct.js';\nimport {default as filterDialog} from '../dialog/filter.js';\nimport {default as sdfDialog} from '../dialog/sdf.js';\n\nimport {default as datagridApp} from './datagridApp.js';\n\n\nfunction registerWorkflow(fetched) {\n  return fetcher.json(fetched)\n    .then(data => {\n      data.fields = misc.defaultFieldProperties(data.fields);\n      return data;\n    })\n    .then(idb.putItem)\n    .then(storeID => {\n      window.location = `datagrid.html?id=${storeID}`;\n    });\n  }\n\n\nfunction app(serverStatus, schema) {\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  // New datagrid menu\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, '+ New datagrid', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .classed('searchd', true)\n      .call(searchDialog.menuLink);\n  menu.append('a')\n      .classed('structd', true)\n      .call(structDialog.menuLink);\n  menu.append('a')\n      .classed('filterd', true)\n      .call(filterDialog.menuLink);\n  menu.append('a')\n      .classed('sdfd', true)\n      .call(sdfDialog.menuLink);\n  menu.append('a')\n      .classed('import', true)\n      .call(button.dropdownMenuFile, 'import', 'Import view', '.ndc,.ndr,.json,.gz')\n      .on('change', function () {\n        const file = button.dropdownMenuFileValue(d3.select(this));\n        hfile.loadJSON(file)\n          .then(item => datagridApp.app(item, serverStatus, schema));\n      });\n  // Control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  if (!schema) {\n    menu.selectAll('.searchd, .structd, .filterd, .sdfd')\n      .property('disabled', true);\n    return;\n  }\n  const chemrsrc = schema.resources.filter(e => e.domain === 'chemical');\n  // ID search\n  dialogs.append('div')\n      .call(searchDialog.body, schema.compoundIDPlaceholder)\n      .on('submit', function () {\n        const targets = chemrsrc.map(e => e.id);\n        const query = searchDialog.query(d3.select(this), targets);\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);  // TODO: if err -> show err img\n      });\n  // Structure search\n  dialogs.append('div')\n      .call(structDialog.body, chemrsrc, serverStatus.rdkit)\n      .on('submit', function () {\n        const query = structDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Filter\n  dialogs.append('div')\n      .call(filterDialog.body, chemrsrc)\n      .on('submit', function () {\n        const query = filterDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Import SDFile\n  dialogs.append('div')\n      .call(sdfDialog.body, chemrsrc)\n      .on('submit', function () {\n        const formData = sdfDialog.queryFormData(d3.select(this));\n        return fetcher.post('sdfin', formData)\n          .then(registerWorkflow);\n      });\n}\n\n\nexport default {\n  app\n};\n","\n/** @module common/KArray */\n\n\nclass KArray extends Array {\n  /**\n   * Return array of object filtered by given unique key\n   */\n  unique(key) {\n    return this.reduce((a, b) => {\n      if (a.find(e => e[key] === b[key]) === undefined) a.push(b);\n      return a;\n    }, new KArray());\n  }\n\n\n  /**\n   * Merge arrays\n   */\n  extend() {\n    return this.reduce((a, b) => {\n      Array.prototype.push.apply(a, b);\n      return a;\n    }, new KArray());\n  }\n\n\n  // Merge arrays(Asynchronous)\n  extendAsync() {\n    return Promise.all(this).then(res => {\n      return res.reduce((a, b) => {\n        Array.prototype.push.apply(a, b);\n        return a;\n      }, new KArray());\n    });\n  }\n\n  toArray() {\n    return Array.from(this);\n  }\n\n  toObject() {\n    const obj = {};\n    this.forEach(kv => {\n      obj[kv[0]] = kv[1];\n    });\n    return obj;\n  }\n}\n\nexport default KArray;\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\n\nimport KArray from './KArray.js';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  return KArray.from(window.location.search.substring(1).split(\"&\"))\n    .map(e => e.split('=')).toObject();\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  fetchProgress\n};\n","\n/** @module datagrid/state */\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class DatagridState {\n  constructor(data) {\n\n    // Import from legacy format data\n    this.data = legacy.convertTable(data);\n    this.fields = null;  // Working copy (set by setFields method)\n\n    this.defaultColumnWidth = {\n      numeric: 120,\n      text: 200,\n      none: 200\n    };\n    this.defaultColumnHeight = {\n      numeric: 40,\n      text: 40,\n      none: 200\n    };\n    this.scrollBarSpace = 20;\n\n    this.keyFunc = d => d.index;\n\n    this.visibleFields = null;\n    this.rowHeight = null;\n    this.contentWidth = null;\n    this.bodyHeight = null;\n\n    this.vieportTop = null;\n    this.previousVieportTop = null;\n    this.vieportBottom = null;\n\n    this.numViewportRows = null;\n    this.previousNumViewportRows = null;\n\n    this.updateHeaderNotifier = null;\n\n    // Initialize\n    this.setFields(this.data.fields);\n  }\n\n  setScrollPosition(position) {\n    this.previousVieportTop = this.viewportTop;\n    this.viewportTop = position;\n    this.viewportBottom = Math.min(\n      this.viewportTop + this.numViewportRows, this.data.records.length);\n  }\n\n  recordsToShow() {\n    return this.data.records.slice(this.viewportTop, this.viewportBottom);\n  }\n\n  setFields(fields) {\n    this.fields = fields.map(e => {\n      e.width = this.defaultColumnWidth[misc.sortType(e.format)];\n      e.height = this.defaultColumnHeight[misc.sortType(e.format)];\n      return e;\n    });\n    this.visibleFields = this.fields.filter(e => e.visible);\n    this.rowHeight = this.visibleFields\n      .reduce((a, b) => a.height > b.height ? a : b).height;\n    this.contentWidth = this.visibleFields\n      .reduce((a, b) => ({width: a.width + b.width})).width + this.scrollBarSpace;\n    this.bodyHeight = this.data.records.length * this.rowHeight;\n  }\n\n  joinFields(mapping) {\n    mapper.apply(this.data, mapping);\n    this.setFields(this.data.fields);\n  }\n\n  export() {\n    this.data.id = misc.uuidv4();\n    return this.data;\n  }\n\n}\n","\n/** @module common/image */\n\nimport vega from 'vega';\n\nfunction showPlot(vegaSpec, selector) {\n  new vega.View(vega.parse(vegaSpec))\n    .initialize(selector)\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nexport default {\n  showPlot, plotThumbnail\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, id, label, type, target) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, id, label, type) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, id, label) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, id, label, target) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, id, label, accept) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label)\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      })\n    .append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module dialog/fieldFile */\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as himg} from '../common/image.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldfile-dialog';\nconst title = 'Import fields from file';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldfile', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fileInput = dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'fieldfile-file', 'File', '.json,.csv');\n  const preview = dialog.select('.modal-body').append('div')\n      .classed('preview', true)\n      .call(table.render);\n  fileInput\n      .on('change', () => {\n        const file = box.fileInputBoxValue(fileInput);\n        const isCsv = file.name.split('.').pop() === 'csv';\n        hfile.readFile(file)\n          .then(res => {\n            const mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n            const tbl = mapper.mappingToTable(mapping);\n            preview.call(table.updateHeader, tbl.fields, tbl.records.slice(0, 5));\n          });\n      });\n}\n\n\nfunction readFile(selection) {\n  const file = box.fileInputBoxValue(selection.select('.file'));\n  const isCsv = file.name.split('.').pop() === 'csv';\n  return hfile.readFile(file)\n    .then(res => {\n      let mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n      if (mapping.hasOwnProperty('field')) {\n        mapping = mapper.singleToMulti(mapping);\n      }\n      const plotCols = [];\n      mapping.fields.forEach((e, i) => {\n        if (e.format === 'plot') {\n          mapping.fields[i].format = 'image';\n          plotCols.push(i);\n        }\n      });\n      if (plotCols.length > 0) {\n        const ps = [];\n        Object.entries(mapping.mapping).forEach(m => {\n          plotCols.forEach(e => {\n            const p = himg.plotThumbnail(m[1][e])\n              .then(img => {\n                mapping.mapping[m[0]][e] = img;\n              });\n            ps.push(p);\n          });\n        });\n        return Promise.all(ps).then(() => mapping);\n      } else {\n        return mapping;\n      }\n    });\n}\n\n\nexport default {\n  menuLink, body, readFile\n};\n","\n/** @module dialog/networkgen */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'networkgen-dialog';\nconst title = 'Generate similarity network';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction body(selection, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Similarity measure\n  const measures = [\n    {key: 'gls', name: 'Graph-based local similarity(GLS)'}\n  ];\n  if (rdk) {\n    measures.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    measures.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'networkgen-measure', 'Measure', measures, 'gls');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'networkgen-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'networkgen');\n  // Events\n  dialog.select('.measure')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        dialog.selectAll('.diam, .tree, .skip')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', value !== 'rdfmcs');\n      })\n      .dispatch('change');\n}\n\n\nfunction queryParams(selection) {\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  return params;\n}\n\n\n\nexport default {\n  menuLink, body, queryParams\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename view';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'rename', title, id);\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module dialog/search */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'search-dialog';\nconst title = 'Search by compound ID';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'search', title, id);\n}\n\n\nfunction body(selection, placeholder) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('ids', true)\n      .call(box.textareaBox, 'search-query', 'Query', 20, placeholder, '');\n}\n\n\nfunction query(selection, targets) {\n  return {\n    workflow: 'search',\n    targets: targets,\n    key: 'compound_id',\n    values: box.textareaBoxLines(selection.select('.ids'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/struct */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'struct-dialog';\nconst title = 'Search by structure';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'struct', title, id);\n}\n\n\nfunction body(selection, resources, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Query molecule\n  dialog.select('.modal-body').append('div')\n      .classed('qmol', true)\n      .call(group.queryMolGroup, 'struct', resources, null);\n  // Search type\n  const methodList = [\n    {key: 'exact', name: 'Exact match'},\n    {key: 'substr', name: 'Substructure'},\n    {key: 'supstr', name: 'Superstructure'},\n    {key: 'gls', name: 'MCS-DR/GLS'}\n  ];\n  if (rdk) {\n    methodList.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    methodList.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('method', true)\n      .call(lbox.selectBox, 'struct-method', 'Method', methodList, 'exact');\n  // Measure\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'struct-measure', 'Measure',\n            [\n              {key: 'sim', name: 'Similarity'},\n              {key: 'edge', name: 'Edge count'}\n            ], 'sim');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'struct-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'struct');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n\n  // Events\n  dialog.select('.method')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const mcs = ['gls', 'rdfmcs'].includes(value);\n        dialog.select('.measure')\n          .select('select')\n            .property('value', mcs ? undefined : 'sim')\n            .property('disabled', !mcs);\n        dialog.selectAll('.thld')\n          .select('input')\n            .property('disabled', ['exact', 'substr', 'supstr'].includes(value));\n        dialog.selectAll('.diam, .tree, .skip')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', value !== 'rdfmcs');\n      })\n      .dispatch('change');\n}\n\n\nfunction query(selection) {\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  const query = {\n    workflow: lbox.selectBoxValue(selection.select('.method')),\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    queryMol: group.queryMolGroupValue(selection.select('.qmol')),\n    params: params\n  };\n  return query;\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/filter */\n\nimport KArray from '../common/KArray.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'filter-dialog';\nconst title = 'Search by properties';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'prop', title, id);\n}\n\n\nfunction body(selection, resources) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fields = KArray.from(resources.map(e => e.fields))\n    .extend().unique('key').toArray()\n    .filter(e => e.hasOwnProperty('d3_format')\n                 || ['compound_id', 'numeric', 'text'].includes(e.format));\n  dialog.select('.modal-body').append('div')\n    .classed('key', true)\n    .call(lbox.selectBox, 'filter-field', 'Field', fields, null);\n  dialog.select('.modal-body').append('div')\n    .classed('operator', true)\n    .call(lbox.selectBox, 'filter-op', 'Operator',\n          [\n            {key: 'eq', name: '='},\n            {key: 'gt', name: '>'},\n            {key: 'lt', name: '<'},\n            {key: 'ge', name: '>='},\n            {key: 'le', name: '>='},\n            {key: 'lk', name: 'LIKE'}\n          ], 'eq');\n  dialog.select('.modal-body').append('div')\n    .classed('value', true)\n    .call(box.textBox, 'filter-value', 'Value', null, '');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n}\n\n\nfunction query(selection) {\n  return {\n    workflow: 'filter',\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    key: lbox.selectBoxValue(selection.select('.key')),\n    value: box.textBoxValue(selection.select('.value')),\n    operator: lbox.selectBoxValue(selection.select('.operator'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/sdf */\n\nimport d3 from 'd3';\n\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nfunction getSDFPropList(str) {\n  const re = />.*?<(\\S+)>/g;\n  const uniqCols = new Set();\n  let arr;\n  while ((arr = re.exec(str)) !== null) {\n    uniqCols.add(arr[1]);\n  }\n  return Array.from(uniqCols);\n}\n\n\nconst id = 'sdf-dialog';\nconst title = 'Import SDFile';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'sdf', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'sdf-file', 'File', '.mol,.sdf');\n  dialog.select('.modal-body').append('div')\n      .classed('field', true)\n      .call(lbox.checklistBox, 'sdf-fields', 'Fields', [], null);\n  dialog.select('.modal-body').append('div')\n      .classed('implh', true)\n      .call(box.checkBox, 'sdf-implh', 'Make hydrogens implicit', true);\n  dialog.select('.modal-body').append('div')\n      .classed('recalc', true)\n      .call(box.checkBox, 'sdf-recalc', 'Recalculate 2D coords', false);\n\n  dialog.select('.file')\n      .on('change', function () {\n        const file = box.fileInputBoxValue(d3.select(this));\n        // Scan only first 100mb of the file due to memory limit.\n        return hfile.readFile(file, 100 * 1024 * 1024, false)\n          .then(data => {\n            const fields = getSDFPropList(data)\n              .map(e => ({key: e, name: e}));\n            dialog.select('.field')\n              .call(lbox.checklistBoxItems, fields);\n          });\n      });\n}\n\n\nfunction queryFormData(selection) {\n  const params = {\n    fields: lbox.checklistBoxValue(selection.select('.field')),\n    implh: box.checkBoxValue(selection.select('.implh')),\n    recalc: box.checkBoxValue(selection.select('.recalc'))\n  };\n  const formData = new FormData();\n  formData.append('contents', box.fileInputBoxValue(selection.select('.file')));\n  formData.append('params', JSON.stringify(params));\n  return formData;\n}\n\n\n\nexport default {\n  menuLink, body, queryFormData\n};\n","\n/** @module datagrid */\n\nimport {default as core} from './common/core.js';\nimport {default as fetcher} from './common/fetcher.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as misc} from './common/misc.js';\n\nimport DatagridState from './datagrid/state.js';\nimport {default as sort} from './datagrid/sort.js';\nimport {default as view} from './datagrid/view.js';\nimport {default as datagridApp} from './datagrid/datagridApp.js';\nimport {default as newDatagrid} from './datagrid/newDatagrid.js';\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      response.server = {};\n      response.schema = {};\n    })\n    .then(() => {\n      console.info('Off-line mode is disabled for debugging');\n      const storeID = misc.URLQuery().id || null;\n      const dataURL = misc.URLQuery().location || null;\n      const error = misc.URLQuery().err || null;\n      if (error) {\n        console.error(decodeURI(error));\n      }\n      if (storeID) {\n        // Load from IndexedDB store\n        core.fetchProgress(storeID, 'update')\n          .then(() => idb.getItemByID(storeID))\n          .then(item => datagridApp.app(item, response.server))\n          .catch(err => {\n            window.location = `datagrid.html?err=${err}`;\n          });\n      } else if (dataURL) {\n        // Fetch via HTTP\n        hfile.fetchJSON(dataURL)\n          .then(item => datagridApp.app(item, response.server));\n      } else {\n        // New datagrid\n        newDatagrid.app(response.server, response.schema);\n      }\n    });\n}\n\n\nexport default {\n  DatagridState, sort, view, run\n};\n"],"names":["readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","text","pako","inflate","to","JSON","parse","downloadDataFile","name","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","e","v07_to_v08_nodes","json","fields","columns","map","sort","format","id","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","records","query","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","singleToMulti","mapping","newMapping","Object","entries","forEach","m","field","key","updateRows","selection","state","cData","visibleFields","rowSelection","select","selectAll","recordsToShow","keyFunc","style","rowHeight","exit","remove","rowEntered","enter","append","attr","width","classed","d","merge","order","each","ri","rowPos","viewportTop","d3","this","html","_","i","value","undefined","misc","formatNum","d3_format","hasOwnProperty","img","showPlot","numericAsc","b","fa","parseFloat","fb","isNaN","String","localeCompare","textAsc","resize","node","getBoundingClientRect","top","viewportHeight","innerHeight","previousNumViewportRows","numViewportRows","Math","ceil","call","component","resizeViewport","dialogBase","selectBoxItems","items","options","updateSelectBox","property","checklistBoxItems","listitems","form","updateChecklistBox","values","includes","updateHeader","header","updateContents","record","cell","updateRowFunc","rowFactory","rows","visible","generalFormat","formatSelect","lbox","on","updateTextBox","updateTextareaBox","updateCheckBox","checked","updateNumberBox","updateQueryMolGroup","selectBoxValue","dispatch","queryMolGroupValue","fetcher","get","then","res","source","textquery","box","textBoxValue","areaquery","textareaBoxLines","app","serverStatus","DatagridState","datagrid","setSort","onresize","menubar","menu","button","dropdownMenuButton","fieldConfigDialog","menuLink","fieldFileDialog","networkgenDialog","renameDialog","dropdownMenuItem","storeID","idb","updateItem","item","uuidv4","console","info","putItem","export","location","hfile","downloadJSON","formData","FormData","stringify","post","menuButtonLink","core","fetchProgress","getItemByID","length","dialogs","body","rdkit","modal","confirmDialog","updateApp","updateBody","setFields","updateHeaderNotifier","joinFields","params","queryParams","measure","nodes","defaultFieldProperties","open","registerWorkflow","fetched","KArray","Array","[object Object]","reduce","find","push","prototype","apply","all","from","obj","kv","sortType","fmt","d3format","Number","partialMatch","toString","toUpperCase","indexOf","URLQuery","search","substring","split","toObject","replace","c","r","random","schema","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","first","deleteItem","delete","put","updateFunc","modify","reset","baseURL","q","keys","fetch","credentials","Error","statusText","response","formdata","method","command","workflow","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","compress","str","gzip","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","convertTable","index","structure","_structure","_index","v08_nodes","$schema","convertNetwork","edges","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","column","domain","range","unknown","size","nodeContent","label","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","v10_edges","mappingToTable","mp","keyField","concat","entry","rcd","f","tableToMapping","table","ignore","Date","filter","row","csvToMapping","csvString","lines","shift","now","headerIdx","h","line","k","fd","unique","legacy","defaultColumnWidth","numeric","none","defaultColumnHeight","scrollBarSpace","contentWidth","bodyHeight","vieportTop","previousVieportTop","vieportBottom","position","viewportBottom","min","height","mapper","vegaSpec","selector","vega","View","initialize","run","plotThumbnail","toImageURL","updateViewport","scrollTop","pos","floor","previousViewportTop","setScrollPosition","isAsc","isNum","cmp","buttonBox","menuButton","menuModalLink","dropdownMenuModal","dropdownMenuFile","accept","click","dropdownMenuFileValue","files","message","base","footer","submitDialog","title","selectBox","checklistBox","checklistBoxValue","render","caption","tableRowValue","textBox","readonlyBox","textareaBox","placeholder","textareaBoxValue","checkBox","checkBoxValue","numberBox","max","step","numberBoxValue","fileInputBox","fileInputBoxValue","dialog","fileInput","preview","isCsv","pop","tbl","plotCols","ps","p","himg","queryMolGroup","resources","$","popover","trigger","simOptionGroup","collapse","simOptionGroupValue","timeout","diam","tree","skip","ignoreHs","diameter","maxTreeSize","molSizeCutoff","rdk","measures","group","thld","targets","methodList","mcs","queryMol","extend","operator","re","uniqCols","Set","arr","exec","add","getSDFPropList","queryFormData","implh","recalc","searchDialog","structDialog","filterDialog","sdfDialog","datagridApp","chemrsrc","compoundIDPlaceholder","protocol","navigator","onLine","server","dataURL","decodeURI","newDatagrid"],"mappings":"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"}