{"version":3,"file":"kwdatagrid.js","sources":["../src/common/file.js","../src/common/mapper.js","../src/datagrid/rowFactory.js","../src/datagrid/component.js","../src/datagrid/sort.js","../src/datagrid/view.js","../src/common/legacySchema.js","../src/component/modal.js","../src/component/formListBox.js","../src/component/table.js","../src/dialog/fieldConfig.js","../src/component/formBox.js","../src/dialog/formGroup.js","../src/datagrid/datagridApp.js","../src/datagrid/newDatagrid.js","../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/common/image.js","../src/datagrid/state.js","../src/component/button.js","../src/datagrid/rowfilter.js","../src/dialog/fieldFetch.js","../src/dialog/fieldFile.js","../src/dialog/fieldInput.js","../src/dialog/networkgen.js","../src/dialog/rename.js","../src/datagrid/rowFilter.js","../src/dialog/search.js","../src/dialog/struct.js","../src/dialog/filter.js","../src/dialog/sdf.js","../src/datagrid.js"],"sourcesContent":["\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module datagrid/rowFactory */\n\nimport {default as misc} from '../common/misc.js';\nimport {default as img} from '../common/image.js';\n\n\nfunction d3Format(selection, record, field) {\n  selection.text(misc.formatNum(record[field.key], field.d3_format));\n}\n\n\nfunction text(selection, record, field) {\n  selection.text(record[field.key]);\n}\n\n\nfunction html(selection, record, field) {\n  selection.html(record[field.key]);\n}\n\n\nfunction compound_id(selection, record, field) {\n  selection.append('a')\n      .attr('href',`profile.html?compound=${record[field.key]}`)\n      .attr('target', '_blank')\n      .text(record[field.key]);\n}\n\n\nfunction image(selection, record, field) {\n  selection.append('img')\n      .attr('width', 180)\n      .attr('height', 180)\n      .attr('src', record[field.key]);\n}\n\nfunction checkbox(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record[field.key])\n      .property('disabled', field.disabled ? record[field.disabled] : false)\n      .on('click', function () {\n        record[field.key] = this.checked;\n      });\n}\n\nfunction textField(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'text')\n      .style('width', '90%')\n      .property('value', record[field.key])\n      .on('change', function () {\n        record[field.key] = this.value;\n      });\n}\n\nfunction call(selection, value) {\n  selection.call(value);\n}\n\n\nconst cellFunc = {\n  numeric: text,\n  text: text,\n  raw: text,\n  d3_format: d3Format,\n  compound_id: compound_id,\n  assay_id: text,\n  list: text,\n  plot: img.plotCell,\n  image: image,\n  checkbox: checkbox,\n  text_field: textField,\n  control: call,\n  svg: html,\n  html: html\n};\n\n\nfunction rowFactory(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const cell = selection.append('div')\n        .classed('dg-cell', true)\n        .classed('align-middle', true)\n        .classed('text-truncate', true)\n        .style('display', 'inline-block')\n        .style('width', `${field.width}%`);\n      if (!record.hasOwnProperty(field.key)) return;\n      cell.call(cellFunc[field.format], record, field);\n    });\n  };\n}\n\n\nexport default {\n  d3Format, text, html, compound_id, image, checkbox, textField, call, rowFactory\n};\n","\n/** @module datagrid/component */\n\nimport d3 from 'd3';\n\n\nfunction updateHeader(selection, state) {\n  const header = selection.select('.dg-header');\n  header.selectAll('.dg-hcell').remove();\n  header.selectAll('.dg-hcell').data(state.visibleFields)\n    .enter().append('div')\n      .classed('dg-hcell', true)\n      .style('display', 'inline-block')\n      .style('width', d => `${d.width}%`)\n      .text(d => d.name);\n  selection\n      .style('width', '100%')\n      .dispatch('resize');\n  const vp = selection.select('.dg-viewport');\n  const pos = Math.floor(vp.node().scrollTop / state.rowHeight);\n  state.setScrollPosition(pos);\n  selection.call(updateRows, state);\n}\n\n\nfunction updateRows(selection, state) {\n  selection.select('.dg-body')\n    .style('height', `${state.bodyHeight}px`);\n  const rows = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(state.recordsToShow(), state.keyFunc);\n  rows.exit().remove();\n  rows.enter()\n    .append('div')\n      .attr('class', 'dg-row')\n      .style('position', 'absolute')\n      .style('width', '100%')\n    .merge(rows)\n      .style('height', `${state.rowHeight}px`)\n      .each(function (d, i) {\n        const rowIndex = state.viewportTop + i;\n        const rowPos = rowIndex * state.rowHeight;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (rowIndex) % 2 === 0);\n        d3.select(this).selectAll('.dg-cell').remove();\n        d3.select(this).call(state.rowFactory(), d, rowIndex);\n      });\n}\n\n\nfunction resizeViewport(selection, state) {\n  selection.select('.dg-viewport').style('height', `${state.viewportHeight}px`);\n}\n\n\nexport default {\n  updateHeader, updateRows, resizeViewport\n};\n","\n/** @module datagrid/sort */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as component} from './component.js';\n\n\nfunction setSort(selection, state) {\n  selection.select('.dg-header').selectAll('.dg-hcell')\n    .filter(d => misc.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n      state.setSortOrder(d.key, isAsc ? 'desc' : 'asc');\n      selection.call(component.updateRows, state);\n    });\n  state.updateContentsNotifier = () => {\n    state.applyData();\n    selection.call(component.updateHeader, state)\n      .call(setSort, state);\n  };\n}\n\n\nexport default {\n  setSort\n};\n","\n/** @module datagrid/view */\n\nimport {default as component} from './component.js';\n\n\nfunction resize(selection, state) {\n  const viewport = selection.select('.dg-viewport');\n  const viewportTop = viewport.node().getBoundingClientRect().top;\n  state.setViewportSize(window.innerHeight - viewportTop - 5);\n  selection.call(component.resizeViewport, state);\n}\n\n\nfunction datagrid(selection, state) {\n  selection.selectAll('div').remove();\n  selection.on('resize', () => selection.call(resize, state));\n  selection.append('div')\n      .classed('dg-header', true);\n  selection.append('div')\n      .classed('dg-viewport', true)\n      .style('overflow-y', 'auto')\n      .on('scroll', function () {\n        const pos = Math.floor(this.scrollTop / state.rowHeight);\n        if (pos !== state.previousViewportTop) {\n          state.setScrollPosition(pos);\n          selection.call(component.updateRows, state);\n        }\n      })\n    .append('div')\n      .classed('dg-body', true)\n      .style('position', 'relative');\n  state.updateContentsNotifier = () => {\n    state.applyData();\n    selection.call(component.updateHeader, state);\n  };\n  state.updateFilterNotifier = value => {\n    state.setFilterText(value);\n    state.setScrollPosition(0);\n    selection.call(component.updateRows, state);\n    selection.select('.dg-viewport').node().scrollTop = 0;\n  };\n  state.updateContentsNotifier();\n}\n\n\nexport default {\n  resize, datagrid\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.filter(e => e.key === 'structure')\n    .forEach(e => {\n      e.format = 'svg';\n    });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/table */\n\n// Simple tables\n// use dataGrid.js for interactive and smooth datatable\n\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction render(selection, id, caption, fields, records) {\n  selection\n      .classed('table', true)\n      .classed('table-striped', true)\n      .classed('table-hover', true)\n      .attr('id', id);\n  if (caption) {\n    selection.append('caption').text(caption);\n  }\n  selection.append('thead').append('tr');\n  selection.append('tbody');\n  if (fields) {\n    selection.call(updateHeader, fields, records);\n  }\n}\n\n\nfunction updateHeader(selection, fields, records) {\n  const header = selection.select('thead tr')\n    .selectAll('th')\n      .data(fields);\n  header.exit().remove();\n  header.enter().append('th')\n      .text(d => d.name);\n  if (records) {\n    selection.call(updateContents, records, d => d.key, updateRowFunc(fields));\n  }\n}\n\n\nfunction updateContents(selection, records, keyFunc, rowFactory) {  // TODO: specify key\n  const rows = selection.select('tbody')\n    .selectAll('tr')\n      .data(records, keyFunc);\n  rows.exit().remove();\n  rows.enter().append('tr')\n    .merge(rows)\n      .each(function (d) {\n        d3.select(this).selectAll('td').remove();\n        d3.select(this).call(rowFactory, d);\n      });\n}\n\n\nfunction updateRowFunc(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const value = record[field.key];\n      const cell = selection.append('td')\n        .classed('align-middle', true);\n      if (value === undefined) return;\n      if (field.format === 'd3_format') {\n        cell.text(misc.formatNum(value, field.d3_format));\n      }\n      else if (field.format === 'plot') {\n        cell.text('[plot]');\n      }\n      else if (field.format === 'image') {\n        cell.text('[image]');\n      }\n      else if (field.format === 'control') {\n        cell.call(value);\n      } else {\n        cell.text(value);\n      }\n    });\n  };\n}\n\n\nexport default {\n  render, updateHeader, updateContents\n};\n","\n/** @module dialog/fieldConfig */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldconf-dialog';\nconst title = 'Column setting';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction updateRowFunc(selection, record) {\n  selection.append('td')\n      .classed('name', true)\n      .text(record.name);\n  selection.append('td')\n      .classed('visible', true)\n    .append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record.visible);\n  const generalFormat = ['text', 'numeric', 'd3_format', 'raw', 'compound_id'];\n  const fs = generalFormat.includes(record.format) ? generalFormat : [record.format];\n  const items = fs.map(e => ({key: e, name: e}));\n  const format = selection.append('td')\n      .classed('format', true);\n  const formatSelect = format.append('select');\n  format.call(lbox.selectBoxItems, items);\n  formatSelect\n      .property('disabled', !generalFormat.includes(record.format))\n      .property('value', record.format);\n  selection.append('td')\n      .classed('d3format', true)\n    .append('input')\n      .attr('size', 10)\n      .property('disabled', record.format === 'd3_format' ? null : true)\n      .property('value', record.d3_format || null);\n  formatSelect\n      .on('change', function () {\n        selection.select('.d3format')\n          .select('input')\n            .property('disabled', this.value !== 'd3_format');\n      });\n}\n\n\nfunction tableRowValue(selection) {\n  const value = {};\n  value.visible = selection.select('.visible')\n    .select('input').property('checked');\n  value.format = selection.select('.format')\n    .select('select').property('value');\n  if (value.format === 'd3_format') {\n    value.d3_format = selection.select('.d3format')\n      .select('input').property('value');\n  }\n  return value;\n}\n\n\nfunction body(selection) {\n  const fields = misc.defaultFieldProperties([\n    {key: 'name', format: 'text'},\n    {key: 'visible', format: 'control'},\n    {key: 'format', format: 'control'},\n    {key: 'd3_format', format: 'control'}\n  ]);\n  selection\n      .call(modal.submitDialog, id, title)\n    .select('.modal-body')\n    .append('table')\n      .classed('field', true)\n      .call(table.render, null, null, fields);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.field')\n      .call(table.updateContents, state.data.fields.slice(), d => d.key, updateRowFunc);\n}\n\n\nfunction value(selection) {\n  const fields = [];\n  selection.select('tbody').selectAll('tr')\n    .each(function (d) {\n      const field = tableRowValue(d3.select(this));\n      field.key = d.key;\n      field.name = d.name;\n      fields.push(field);\n    });\n  return fields;\n}\n\n\nexport default {\n  menuLink, updateRowFunc, body, updateBody, value\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module dialog/formGroup */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction queryMolGroup(selection, id, resources) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('format', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-format`, 'Format',\n            [\n              {key: 'molfile', name: 'MDL Molfile'},\n              {key: 'dbid', name: 'Compound ID'}\n            ], 'molfile');\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.append('div')\n      .classed('source', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-source`, 'Source', res, null);\n  selection.append('div')\n      .classed('textquery', true)\n      .classed('mb-1', true)\n      .call(box.textBox, `${id}-textquery`, 'Query', null, '');\n  selection.append('div')\n      .classed('areaquery', true)\n      .classed('mb-1', true)\n      .call(box.textareaBox, `${id}-areaquery`, 'Query', 6, null, '');\n  // Popover\n  $(function () {\n    $('[data-toggle=\"popover\"]')\n      .popover({html: true, trigger: 'focus'});\n  });\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('preview', true)\n      .attr('data-toggle', 'popover')\n      .attr('data-html', 'true')\n      .attr('data-content', '<div id=\"previmg\"></div>')\n      .call(button.menuButton, `${id}-preview`, 'Structure preview', 'primary');\n  selection.call(updateQueryMolGroup);\n}\n\nfunction updateQueryMolGroup(selection) {\n  selection.select('.format')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      selection.select('.source')\n        .select('select')\n          .property('disabled', value !== 'dbid');\n      selection.select('.textquery')\n          .property('hidden', value !== 'dbid');\n      selection.select('.areaquery')\n          .property('hidden', value !== 'molfile');\n    })\n    .dispatch('change');\n  selection.select('.preview')\n    .on('click', function () {\n      const query = queryMolGroupValue(selection);\n      return fetcher.get('strprev', query)\n        .then(fetcher.text)\n        .then(res => d3.select('#previmg').html(res), fetcher.error);\n    });\n}\n\nfunction queryMolGroupValue(selection) {\n  const format = lbox.selectBoxValue(selection.select('.format'));\n  const source = lbox.selectBoxValue(selection.select('.source'));\n  const textquery = box.textBoxValue(selection.select('.textquery'));\n  const areaquery = box.textareaBoxLines(selection.select('.areaquery'));\n  return {\n    format: format,\n    source: format === 'dbid' ? source : null,\n    value: format === 'molfile' ? areaquery : textquery\n  };\n}\n\n\nfunction simOptionGroup(selection, id) {\n  selection\n      .classed('mb-3', true)\n    .append('p')\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text('Optional parameters');\n  const collapse = selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true);\n  collapse.append('div')\n      .classed('ignoreh', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, `${id}-ignoreh`, 'Ignore explicit hydrogens', true);\n  collapse.append('div')\n      .classed('timeout', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-timeout`, 'Timeout', 1, 999, 1, 2);\n  collapse.append('div')\n      .classed('diam', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-diam`, 'Diameter (MCS-DR/GLS)', 4, 999, 1, 8);\n  collapse.append('div')\n      .classed('tree', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-tree`, 'Max tree size (MCS-DR/GLS)', 20, 999, 1, 40);\n  collapse.selectAll('label.col-form-label')\n      .classed('col-4', false)\n      .classed('col-6', true);\n  collapse.selectAll('input.form-control')\n      .classed('col-8', false)\n      .classed('col-6', true);\n}\n\nfunction simOptionGroupValue(selection) {\n  const timeout = selection.select('.timeout');\n  const diam = selection.select('.diam');\n  const tree = selection.select('.tree');\n  const query = {\n    ignoreHs: box.checkBoxValue(selection.select('.ignoreh'))\n  };\n  if (!timeout.select('input').property('disabled')) {\n    query.timeout = box.numberBoxValue(timeout);\n  }\n  if (!diam.select('input').property('disabled')) {\n    query.diameter = box.numberBoxValue(diam);\n  }\n  if (!tree.select('input').property('disabled')) {\n    query.maxTreeSize = box.numberBoxValue(tree);\n  }\n  return query;\n}\n\n\nexport default {\n  queryMolGroup, updateQueryMolGroup, queryMolGroupValue,\n  simOptionGroup, simOptionGroupValue\n};\n","\n/** @module datagrid/datagridApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from '../common/core.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as fieldConfigDialog} from '../dialog/fieldConfig.js';\nimport {default as fieldFetchDialog} from '../dialog/fieldFetch.js';\nimport {default as fieldFileDialog} from '../dialog/fieldFile.js';\nimport {default as fieldInputDialog} from '../dialog/fieldInput.js';\nimport {default as networkgenDialog} from '../dialog/networkgen.js';\nimport {default as renameDialog} from '../dialog/rename.js';\n\nimport {default as view} from './view.js';\nimport {default as sort} from './sort.js';\nimport {default as rowf} from './rowFilter.js';\nimport DatagridState from './state.js';\n\n\nfunction app(data, serverStatus, schema) {\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n\n  const state = new DatagridState(legacy.convertTable(data));\n  state.serverStatus = serverStatus;\n  state.resourceSchema = schema;\n\n  // Datagrid view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, 'View control', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .call(fieldConfigDialog.menuLink);\n  menu.append('a')\n      .call(fieldFetchDialog.menuLink);\n  menu.append('a')\n      .call(fieldFileDialog.menuLink);\n  menu.append('a')\n      .call(fieldInputDialog.menuLink);\n  menu.append('a')\n      .classed('networkgend', true)\n      .call(networkgenDialog.menuLink);\n  menu.append('a')\n      .call(renameDialog.menuLink);\n  menu.append('a')\n      .classed('saveview', true)\n      .call(button.dropdownMenuItem, null, 'Save');\n  menu.append('a')\n      .classed('exportjson', true)\n      .call(button.dropdownMenuItem, null, 'Download JSON');\n  menu.append('a')\n      .classed('exportexcel', true)\n      .call(button.dropdownMenuItem, null, 'Download Excel');\n  // Open control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n  // Fetch control\n  menubar.append('a')\n      .classed('refresh', true)\n      .call(button.menuButtonLink, null, 'Refresh', 'outline-secondary');\n  menubar.append('a')\n      .classed('abort', true)\n      .call(button.menuButtonLink, null, 'Abort server job', 'warning')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', '#abort-dialog');\n  menubar.append('span').classed('progress', true)\n    .append('progress')\n      .attr('max', 100);\n  menubar.append('span').classed('title', true);\n  menubar.append('span').classed('status', true);\n\n  // Dialogs\n  dialogs.append('div')\n      .classed('fieldconfd', true)\n      .call(fieldConfigDialog.body);\n  dialogs.append('div')\n      .classed('fieldfetchd', true)\n      .call(fieldFetchDialog.body, schema, state.fetchedAssays);\n  dialogs.append('div')\n      .classed('fieldfiled', true)\n      .call(fieldFileDialog.body);\n  dialogs.append('div')\n      .classed('fieldinputd', true)\n      .call(fieldInputDialog.body);\n  dialogs.append('div')\n      .classed('netgend', true)\n      .call(networkgenDialog.body, serverStatus.rdkit);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n\n  // Contents\n  d3.select('#datagrid')\n      .call(view.datagrid, state)\n      .call(sort.setSort, state);\n  d3.select('#dg-search')\n      .call(rowf.setFilter, state);\n\n  // Resize window\n  d3.select('#datagrid').dispatch('resize');\n  window.onresize = () => d3.select('#datagrid').dispatch('resize');\n\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  d3.select('#loading-icon').style('display', 'none');\n\n  // Title\n  d3.select('title').text(state.data.name);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.select('.saveview')\n      .on('click', function () {\n        if (state.data.storeID) {\n          return idb.updateItem(state.data.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.name;\n            item.fields = state.data.fields;\n            item.records = state.data.records;\n          })\n          .then(() => console.info('Datagrid saved'));\n        } else {\n          return idb.putItem(state.export())\n            .then(storeID => {\n              window.location = `datagrid.html?id=${storeID}`;\n            });\n        }\n      });\n  menubar.select('.exportjson')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.storeID;\n        hfile.downloadJSON(data, data.name);\n      });\n  menubar.select('.exportexcel')\n      .on('click', () => {\n        const data = state.export();\n        const formData = new FormData();\n        formData.append('contents', new Blob([JSON.stringify(data)]));\n        return fetcher.post('xlsx', formData)\n          .then(fetcher.blob)\n          .then(blob => hfile.downloadDataFile(blob, `${data.name}.xlsx`));\n      });\n\n  menubar.select('.title').text(state.data.name);\n  menubar.select('.status')\n      .text(`(${state.data.status} - ${state.data.records.length} records found in ${state.data.execTime} sec.)`);\n  menubar.select('.progress').select('progress')\n      .attr('value', state.data.progress)\n      .text(`${state.data.progress}%`);\n  menubar.select('.refresh')\n      .on('click', function () {\n        return core.fetchProgress(state.data.storeID)\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => {\n            state.data = item;\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n\n  // disable on-line commands\n  if (!state.serverStatus.instance) {\n    menubar.selectAll('.networkgend, .exportexcel')\n      .attr('data-target', null)\n      .classed('disabled', true)\n      .on('click', null);\n  }\n\n  // hide fetch commands\n  const ongoing = ['running', 'ready'].includes(state.data.status);\n  menubar.selectAll('.progress, .refresh, .abort')\n    .style('display', ongoing ? null : 'none');\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.select('.fieldconfd')\n      .call(fieldConfigDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.fields = fieldConfigDialog.value(d3.select(this));\n        state.updateContentsNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.fieldfetchd')\n      .call(fieldFetchDialog.updateBody)\n      .on('submit', function () {\n        const targets = state.resourceSchema.resources\n          .filter(e => e.domain === 'activity').map(e => e.id);\n        const compounds = state.data.records.map(e => e.compound_id);\n        const queries = fieldFetchDialog.queries(d3.select(this), targets, compounds);\n        const futures = queries.map(q => {\n          return fetcher.get(q.workflow, q)\n            .then(fetcher.json)\n            .then(data => {\n              return mapper.tableToMapping(\n                data, 'compound_id', ['index', 'assay_id']);\n            });\n        });\n        Promise.all(futures).then(mps => {\n          mps.forEach(mp => state.joinFields(mp));\n          state.updateContentsNotifier();\n          updateApp(state);\n        });\n      });\n  dialogs.select('.fieldfiled')\n      .on('submit', function () {\n        return fieldFileDialog.readFile(d3.select(this))\n          .then(data => {\n            state.joinFields(data);\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n  dialogs.select('.fieldinputd')\n      .on('submit', function () {\n        const value = fieldInputDialog.value(d3.select(this));\n        const field = misc.defaultFieldProperties([value.field])[0];\n        state.data.fields.push(field);\n        state.data.records.forEach(e => {\n          e[field.key] = value.default;\n        });\n        state.applyData();\n        state.updateContentsNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.netgend')\n      .on('submit', function () {\n        const formData = new FormData();\n        const params = networkgenDialog.queryParams(d3.select(this));\n        formData.append('params', JSON.stringify(params));\n        formData.append('contents', new Blob([JSON.stringify(state.export())]));\n        return fetcher.post(`${params.measure}net`, formData)\n          .then(fetcher.json)\n          .then(data => {\n            data.reference.nodes = state.data.storeID;\n            data.fields = misc.defaultFieldProperties(data.fields);\n            return data;\n          })\n          .then(idb.putItem)\n          .then(storeID => {\n            d3.select('#loading-icon').style('display', 'none');\n            window.open(`network.html?id=${storeID}`, '_blank');\n          });\n      });\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n  });\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.storeID, 'abort')\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => {\n            state.data = item;\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n}\n\n\nexport default {\n  app, updateApp\n};\n","\n/** @module datagrid/newDatagrid */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\n\nimport {default as searchDialog} from '../dialog/search.js';\nimport {default as structDialog} from '../dialog/struct.js';\nimport {default as filterDialog} from '../dialog/filter.js';\nimport {default as sdfDialog} from '../dialog/sdf.js';\n\nimport {default as datagridApp} from './datagridApp.js';\n\n\nfunction registerWorkflow(fetched) {\n  return fetcher.json(fetched)\n    .then(data => {\n      data.fields = misc.defaultFieldProperties(data.fields);\n      return data;\n    })\n    .then(idb.putItem)\n    .then(storeID => {\n      window.location = `datagrid.html?id=${storeID}`;\n    });\n  }\n\n\nfunction app(serverStatus, schema) {\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n\n  // New datagrid menu\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, '+ New datagrid', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .classed('searchd', true)\n      .call(searchDialog.menuLink);\n  menu.append('a')\n      .classed('structd', true)\n      .call(structDialog.menuLink);\n  menu.append('a')\n      .classed('filterd', true)\n      .call(filterDialog.menuLink);\n  menu.append('a')\n      .classed('sdfd', true)\n      .call(sdfDialog.menuLink);\n  menu.append('a')\n      .classed('import', true)\n      .call(button.dropdownMenuFile, 'import', 'Import JSON', '.ndc,.ndr,.json,.gz')\n      .on('change', function () {\n        const file = button.dropdownMenuFileValue(d3.select(this));\n        hfile.loadJSON(file)\n          .then(item => datagridApp.app(item, serverStatus, schema));\n      });\n  // Control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n\n  // disable on-line commands\n  if (!serverStatus.instance) {\n    menu.selectAll('.searchd, .structd, .filterd, .sdfd')\n      .attr('data-target', null)\n      .classed('disabled', true);\n  }\n\n  // Dialogs\n  const chemrsrc = schema.resources.filter(e => e.domain === 'chemical');\n  // ID search\n  dialogs.append('div')\n      .call(searchDialog.body, schema.compoundIDPlaceholder)\n      .on('submit', function () {\n        const targets = chemrsrc.map(e => e.id);\n        const query = searchDialog.query(d3.select(this), targets);\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);  // TODO: if err -> show err img\n      });\n  // Structure search\n  dialogs.append('div')\n      .call(structDialog.body, chemrsrc, serverStatus.rdkit)\n      .on('submit', function () {\n        const query = structDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Filter\n  dialogs.append('div')\n      .call(filterDialog.body, chemrsrc)\n      .on('submit', function () {\n        const query = filterDialog.query(d3.select(this));\n        return fetcher.get(query.workflow, query)\n          .then(registerWorkflow);\n      });\n  // Import SDFile\n  dialogs.append('div')\n      .call(sdfDialog.body, chemrsrc)\n      .on('submit', function () {\n        const formData = sdfDialog.queryFormData(d3.select(this));\n        return fetcher.post('sdfin', formData)\n          .then(registerWorkflow);\n      });\n}\n\n\nexport default {\n  app\n};\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  fetchProgress\n};\n","\n/** @module common/image */\n\nimport vega from 'vega';\n\n\nfunction plotCell(selection, record, field) {\n  new vega.View(vega.parse(record[field.key]))\n    .initialize(selection.node())\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nfunction binaryToDataURI(binary) {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onload = event => {\n      resolve(event.target.result);\n    };\n    reader.readAsDataURL(binary);\n  });\n}\n\n\nexport default {\n  plotCell, plotThumbnail, binaryToDataURI\n};\n","\n/** @module datagrid/state */\n\nimport _ from 'lodash';\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as factory} from './rowFactory.js';\n\n\nexport default class DatagridState {\n  constructor(data) {\n    this.data = data;\n\n    this.visibleFields = null;\n    this.sortedRecords = null;\n    this.filteredRecords = null;\n\n    // Snapshot\n    const snp = this.data.snapshot || {sortOrder: [], filterText: null};\n    this.sortOrder = snp.sortOrder || [];\n    this.filterText = snp.filterText || null;\n\n    this.defaultColumnHeight = {\n      numeric: 40,\n      text: 40,\n      none: 200\n    };\n    this.scrollBarSpace = 20;\n    this.keyFunc = d => d.index;\n\n    // Size\n    this.rowHeight = null;\n    this.contentWidth = null;\n    this.bodyHeight = null;\n\n    // Viewport\n    this.viewportHeight = null;\n    this.numViewportRows = null;\n    this.previousNumViewportRows = null;\n    this.viewportTop = null;\n    this.previousVieportTop = null;\n    this.viewportBottom = null;\n\n    this.fixedViewportHeight = null;\n\n    // Event notifier\n    this.updateContentsNotifier = null;\n    this.updateFilterNotifier = null;\n\n    this.rowFactory = () => factory.rowFactory(this.visibleFields);\n\n    // Initialize\n    this.applyData();\n  }\n\n  setViewportSize(height) {\n    this.viewportHeight = this.fixedViewportHeight || height;\n    this.previousNumViewportRows = this.numViewportRows;\n    this.numViewportRows = Math.ceil(this.viewportHeight / this.rowHeight) + 1;\n  }\n\n  setScrollPosition(position) {\n    this.previousViewportTop = this.viewportTop;\n    this.viewportTop = position;\n    this.viewportBottom = Math.min(\n      this.viewportTop + this.numViewportRows, this.filteredRecords.length);\n  }\n\n  setSortOrder(key, order) {\n    const ki  = this.sortOrder.findIndex(e => e.key);\n    const obj = {key: key, order: order};\n    if (ki !== -1) this.sortOrder.splice(ki, 1);\n    this.sortOrder.splice(0, 0, obj);\n    this.applyOrder(key, order);\n  }\n\n  setFilterText(text) {\n    this.filterText = text;\n    this.applyFilter();\n  }\n\n  joinFields(mapping) {\n    mapper.apply(this.data, mapping);\n    this.applyData();\n  }\n\n  applyData() {\n    this.visibleFields = this.data.fields.filter(e => e.visible);\n    const widthfSum = this.visibleFields.reduce((a, c) => a + (c.widthf || 1), 0);\n    this.visibleFields = this.visibleFields.map(e => {\n      const field = {\n        width: (e.widthf || 1) / widthfSum * 100,\n        height: e.height || this.defaultColumnHeight[misc.sortType(e.format)]\n      };\n      return Object.assign(field, e);\n    });\n    this.rowHeight = this.visibleFields\n      .reduce((a, b) => a.height > b.height ? a : b).height;\n    this.applyOrder();\n  }\n\n  applyOrder(key, order) {\n    if (key) {\n      this.sortedRecords = _.orderBy(this.data.records.slice(), [key], [order]);\n    } else {\n      const keys = this.sortOrder.map(e => e.key);\n      const orders = this.sortOrder.map(e => e.order);\n      if (keys) {\n        this.sortedRecords = _.orderBy(this.data.records.slice(), keys, orders);\n      }\n    }\n    this.applyFilter();\n  }\n\n  applyFilter() {\n    if (this.filterText === null) {\n      this.filteredRecords = this.sortedRecords.slice();\n    } else {\n      const fields = this.visibleFields\n        .filter(e => misc.sortType(e.format) !== 'none')\n        .map(e => e.key);\n      this.filteredRecords = this.sortedRecords.filter(row => {\n        return fields.some(f => misc.partialMatch(this.filterText, row[f]));\n      });\n    }\n    this.bodyHeight = this.filteredRecords.length * this.rowHeight;\n  }\n\n  recordsToShow() {\n    return this.filteredRecords.slice(this.viewportTop, this.viewportBottom);\n  }\n\n  export() {\n    this.data.id = misc.uuidv4();\n    return this.data;\n  }\n\n}\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, id, label, type, target) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, id, label, type) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, id, label) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, id, label, target) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, id, label, accept) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .text(label)\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      })\n    .append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module datagrid/rowFilter */\n\nimport {default as box} from '../component/formBox.js';\n\n\nfunction setFilter(selection, state) {\n  const searchBox = selection\n      .classed('row', true)\n      .classed('justify-content-end', true)\n    .append('div')\n      .classed('col-5', true)\n      .call(box.textBox, null, 'Search', 40, null);\n  searchBox.select('label').classed('text-right', true);\n  searchBox.select('input')\n    .on('keyup', function () {\n      state.updateFilterNotifier(box.textBoxValue(searchBox));\n    });\n}\n\n\nexport default {\n  setFilter\n};\n","\n/** @module dialog/fieldFetch */\n\nimport _ from 'lodash';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\nimport DatagridState from '../datagrid/state.js';\nimport {default as component} from '../datagrid/component.js';\nimport {default as view} from '../datagrid/view.js';\nimport {default as rowf} from '../datagrid/rowfilter.js';\n\n\nconst id = 'fieldfetch-dialog';\nconst title = 'Append assays';\nlet state = null;\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldfetch', title, id);\n}\n\n\nfunction body(selection, schema) {\n  const rsrcs = schema.resources.filter(e => e.domain === 'assay');\n  const assays = _(rsrcs.map(e => e.data)).flatten().value();\n  const data = {\n    fields: misc.defaultFieldProperties([\n      {key: 'check', name: 'Check', format: 'checkbox', widthf: 0.5, height: 40},\n      {key: 'assay_id', name: 'Assay ID', format: 'assay_id'},\n      {key: 'name', name: 'Name', format: 'text'},\n      {key: 'tags', name: 'Tags', format: 'list', widthf: 2}\n    ]),\n    records: assays.map(e => {\n      e.check = false;\n      return e;\n    })\n  };\n  const dialog = selection.call(modal.submitDialog, id, title);\n  state = new DatagridState(data);\n  const body = dialog.select('.modal-body');\n  const filter = body.append('div').classed('fetchd-filter', true);\n  const dg = body.append('div').classed('fetchd-dg', true);\n  dg.call(view.datagrid, state);\n  filter.call(rowf.setFilter, state);\n  state.fixedViewportHeight = 200;\n  dg.call(component.resizeViewport, state);\n  const vtypes = _(assays.map(e => e.value_types))\n    .flatten()\n    .uniqBy('key')\n    .value();\n  body.append('div')\n      .classed('my-3', true)\n      .classed('vtype', true)\n      .call(lbox.checklistBox, null, 'Value type', vtypes, ['IC50']);\n}\n\n\nfunction updateBody(selection) {\n  state.data.records.forEach(e => {\n    e.check = false;\n  });\n  state.updateContentsNotifier();\n}\n\n\nfunction queries(selection, targets, compounds) {\n  return state.data.records\n    .filter(e => e.check && !e.check_d)\n    .map(e => {\n      return {\n        workflow: 'activity',\n        targets: targets,\n        assay_id: e.assay_id,\n        condition: {\n          compounds: compounds,\n          value_types: lbox.checklistBoxValue(selection.select('.vtype'))\n        }\n      };\n    });\n}\n\n\n\nexport default {\n  menuLink, body, updateBody, queries\n};\n","\n/** @module dialog/fieldFile */\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as himg} from '../common/image.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldfile-dialog';\nconst title = 'Append JSON fields';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldfile', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fileInput = dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'fieldfile-file', 'File', '.json,.csv');\n  const preview = dialog.select('.modal-body').append('div')\n      .classed('preview', true)\n      .call(table.render);\n  fileInput\n      .on('change', () => {\n        const file = box.fileInputBoxValue(fileInput);\n        const isCsv = file.name.split('.').pop() === 'csv';\n        hfile.readFile(file)\n          .then(res => {\n            const mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n            const tbl = mapper.mappingToTable(mapping);\n            preview.call(table.updateHeader, tbl.fields, tbl.records.slice(0, 5));\n          });\n      });\n}\n\n\nfunction readFile(selection) {\n  const file = box.fileInputBoxValue(selection.select('.file'));\n  const isCsv = file.name.split('.').pop() === 'csv';\n  return hfile.readFile(file)\n    .then(res => {\n      let mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n      if (mapping.hasOwnProperty('field')) {\n        mapping = mapper.singleToMulti(mapping);\n      }\n      const plotCols = [];\n      mapping.fields.forEach((e, i) => {\n        if (e.format === 'plot') {\n          mapping.fields[i].format = 'image';\n          plotCols.push(i);\n        }\n      });\n      if (plotCols.length > 0) {\n        const ps = [];\n        Object.entries(mapping.mapping).forEach(m => {\n          plotCols.forEach(e => {\n            const p = himg.plotThumbnail(m[1][e])\n              .then(img => {\n                mapping.mapping[m[0]][e] = img;\n              });\n            ps.push(p);\n          });\n        });\n        return Promise.all(ps).then(() => mapping);\n      } else {\n        return mapping;\n      }\n    });\n}\n\n\nexport default {\n  menuLink, body, readFile\n};\n","\n/** @module dialog/fieldInput */\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'fieldinput-dialog';\nconst title = 'Append input field';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldinput', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const body = dialog.select('.modal-body');\n  body.append('div')\n      .classed('key', true)\n      .call(box.textBox, null, 'Field key', 40, null);\n  const options = [\n    {key: 'checkbox', name: 'Checkbox'},\n    {key: 'text_field', name: 'Text field'}\n  ];\n  body.append('div')\n      .classed('type', true)\n      .call(lbox.selectBox, null, 'Type', options, 'checkbox');\n\n}\n\n\nfunction updateBody(selection) {\n  selection.select('.key')\n      .call(box.updateTextBox, null);\n  selection.select('.type')\n      .call(lbox.updateSelectBox, 'checkbox');\n}\n\n\nconst defaultValues = {\n  checkbox: false,\n  text_field: ''\n};\n\n\nfunction value(selection) {\n  const key = box.textBoxValue(selection.select('.key'));\n  const type = lbox.selectBoxValue(selection.select('.type'));\n  return {\n    field: {key: key, name: key, format:type},\n    default: defaultValues[type]\n  };\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module dialog/networkgen */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'networkgen-dialog';\nconst title = 'Generate similarity network';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'fieldconf', title, id);\n}\n\n\nfunction body(selection, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Similarity measure\n  const measures = [\n    {key: 'gls', name: 'Graph-based local similarity(GLS)'}\n  ];\n  if (rdk) {\n    measures.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    measures.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'networkgen-measure', 'Measure', measures, 'gls');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'networkgen-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'networkgen');\n  // Events\n  dialog.select('.measure')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        dialog.selectAll('.diam, .tree')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', !['gls', 'rdfmcs'].includes(value));\n      })\n      .dispatch('change');\n}\n\n\nfunction queryParams(selection) {\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  return params;\n}\n\n\n\nexport default {\n  menuLink, body, queryParams\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'rename', title, id);\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module datagrid/rowFilter */\n\nimport {default as box} from '../component/formBox.js';\n\n\nfunction setFilter(selection, state) {\n  const searchBox = selection\n      .classed('row', true)\n      .classed('justify-content-end', true)\n    .append('div')\n      .classed('col-5', true)\n      .call(box.textBox, null, 'Search', 40, null);\n  searchBox.select('label').classed('text-right', true);\n  searchBox.select('input')\n    .on('keyup', function () {\n      state.updateFilterNotifier(box.textBoxValue(searchBox));\n    });\n}\n\n\nexport default {\n  setFilter\n};\n","\n/** @module dialog/search */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'search-dialog';\nconst title = 'Search by compound ID';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'search', title, id);\n}\n\n\nfunction body(selection, placeholder) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('ids', true)\n      .call(box.textareaBox, 'search-query', 'Query', 20, placeholder, '');\n}\n\n\nfunction query(selection, targets) {\n  return {\n    workflow: 'search',\n    targets: targets,\n    key: 'compound_id',\n    values: box.textareaBoxLines(selection.select('.ids'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/struct */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'struct-dialog';\nconst title = 'Search by structure';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'struct', title, id);\n}\n\n\nfunction body(selection, resources, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Query molecule\n  dialog.select('.modal-body').append('div')\n      .classed('qmol', true)\n      .call(group.queryMolGroup, 'struct', resources, null);\n  // Search type\n  const methodList = [\n    {key: 'exact', name: 'Exact match'},\n    {key: 'substr', name: 'Substructure'},\n    {key: 'supstr', name: 'Superstructure'},\n    {key: 'gls', name: 'MCS-DR/GLS'}\n  ];\n  if (rdk) {\n    methodList.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    methodList.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('method', true)\n      .call(lbox.selectBox, 'struct-method', 'Method', methodList, 'exact');\n  // Measure\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'struct-measure', 'Measure',\n            [\n              {key: 'sim', name: 'Similarity'},\n              {key: 'edge', name: 'Edge count'}\n            ], 'sim');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'struct-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'struct');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n\n  // Events\n  dialog.select('.method')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const mcs = ['gls', 'rdfmcs'].includes(value);\n        dialog.select('.measure')\n          .select('select')\n            .property('value', mcs ? undefined : 'sim')\n            .property('disabled', !mcs);\n        dialog.selectAll('.thld')\n          .select('input')\n            .property('disabled', ['exact', 'substr', 'supstr'].includes(value));\n        dialog.selectAll('.diam, .tree')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', !mcs);\n      })\n      .dispatch('change');\n}\n\n\nfunction query(selection) {\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  const query = {\n    workflow: lbox.selectBoxValue(selection.select('.method')),\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    queryMol: group.queryMolGroupValue(selection.select('.qmol')),\n    params: params\n  };\n  return query;\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/filter */\n\nimport _ from 'lodash';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'filter-dialog';\nconst title = 'Search by properties';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'prop', title, id);\n}\n\n\nfunction body(selection, resources) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fields = _(resources.map(e => e.fields))\n    .flatten()\n    .uniqBy('key')\n    .value()\n    .filter(e => e.hasOwnProperty('d3_format')\n                 || ['compound_id', 'numeric', 'text'].includes(e.format));\n  dialog.select('.modal-body').append('div')\n    .classed('key', true)\n    .call(lbox.selectBox, 'filter-field', 'Field', fields, null);\n  dialog.select('.modal-body').append('div')\n    .classed('operator', true)\n    .call(lbox.selectBox, 'filter-op', 'Operator',\n          [\n            {key: 'eq', name: '='},\n            {key: 'gt', name: '>'},\n            {key: 'lt', name: '<'},\n            {key: 'ge', name: '>='},\n            {key: 'le', name: '>='},\n            {key: 'lk', name: 'LIKE'}\n          ], 'eq');\n  dialog.select('.modal-body').append('div')\n    .classed('value', true)\n    .call(box.textBox, 'filter-value', 'Value', null, '');\n  // Targets\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  dialog.select('.modal-body').append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'struct-target', 'Target databases', res, null);\n}\n\n\nfunction query(selection) {\n  return {\n    workflow: 'filter',\n    targets: lbox.checklistBoxValue(selection.select('.target')),\n    key: lbox.selectBoxValue(selection.select('.key')),\n    value: box.textBoxValue(selection.select('.value')),\n    operator: lbox.selectBoxValue(selection.select('.operator'))\n  };\n}\n\n\nexport default {\n  menuLink, body, query\n};\n","\n/** @module dialog/sdf */\n\nimport d3 from 'd3';\n\nimport {default as hfile} from '../common/file.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nfunction getSDFPropList(str) {\n  const re = />.*?<(\\S+)>/g;\n  const uniqCols = new Set();\n  let arr;\n  while ((arr = re.exec(str)) !== null) {\n    uniqCols.add(arr[1]);\n  }\n  return Array.from(uniqCols);\n}\n\n\nconst id = 'sdf-dialog';\nconst title = 'Import SDFile';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'sdf', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'sdf-file', 'File', '.mol,.sdf');\n  dialog.select('.modal-body').append('div')\n      .classed('field', true)\n      .call(lbox.checklistBox, 'sdf-fields', 'Fields', [], null);\n  dialog.select('.modal-body').append('div')\n      .classed('implh', true)\n      .call(box.checkBox, 'sdf-implh', 'Make hydrogens implicit', true);\n  dialog.select('.modal-body').append('div')\n      .classed('recalc', true)\n      .call(box.checkBox, 'sdf-recalc', 'Recalculate 2D coords', false);\n\n  dialog.select('.file')\n      .on('change', function () {\n        const file = box.fileInputBoxValue(d3.select(this));\n        // Scan only first 100mb of the file due to memory limit.\n        return hfile.readFile(file, 100 * 1024 * 1024, false)\n          .then(data => {\n            const fields = getSDFPropList(data)\n              .map(e => ({key: e, name: e}));\n            dialog.select('.field')\n              .call(lbox.checklistBoxItems, fields);\n          });\n      });\n}\n\n\nfunction queryFormData(selection) {\n  const params = {\n    fields: lbox.checklistBoxValue(selection.select('.field')),\n    implh: box.checkBoxValue(selection.select('.implh')),\n    recalc: box.checkBoxValue(selection.select('.recalc'))\n  };\n  const formData = new FormData();\n  formData.append('contents', box.fileInputBoxValue(selection.select('.file')));\n  formData.append('params', JSON.stringify(params));\n  return formData;\n}\n\n\n\nexport default {\n  menuLink, body, queryFormData\n};\n","\n/** @module datagrid */\n\nimport {default as core} from './common/core.js';\nimport {default as fetcher} from './common/fetcher.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as misc} from './common/misc.js';\n\nimport DatagridState from './datagrid/state.js';\nimport {default as sort} from './datagrid/sort.js';\nimport {default as view} from './datagrid/view.js';\nimport {default as datagridApp} from './datagrid/datagridApp.js';\nimport {default as newDatagrid} from './datagrid/newDatagrid.js';\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      console.info('Server did not respond');\n      response.server = {};\n      response.schema = {\n        resources: [], templates: [], compoundIDPlaceholder: null\n      };\n    })\n    .then(() => {\n      console.info('Off-line mode is disabled for debugging');\n      const storeID = misc.URLQuery().id || null;\n      const dataURL = misc.URLQuery().location || null;\n      if (storeID) {\n        // Load from IndexedDB store\n        core.fetchProgress(storeID, 'update')\n          .then(() => idb.getItemByID(storeID))\n          .then(item => datagridApp.app(item, response.server, response.schema));\n      } else if (dataURL) {\n        // Fetch via HTTP\n        hfile.fetchJSON(dataURL)\n          .then(item => datagridApp.app(item, response.server, response.schema));\n      } else {\n        // New datagrid\n        newDatagrid.app(response.server, response.schema);\n      }\n    });\n}\n\n\nexport default {\n  DatagridState, sort, view, run\n};\n"],"names":["readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","text","pako","inflate","to","JSON","parse","downloadDataFile","name","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","e","singleToMulti","mapping","newMapping","Object","entries","forEach","m","created","fields","field","key","d3Format","selection","record","misc","formatNum","d3_format","html","compound_id","append","attr","image","checkbox","property","disabled","on","this","checked","textField","style","value","call","updateRows","state","select","bodyHeight","rows","selectAll","recordsToShow","keyFunc","exit","remove","enter","merge","rowHeight","each","d","i","rowIndex","viewportTop","rowPos","d3","classed","rowFactory","setSort","filter","sortType","format","isAsc","setSortOrder","component","updateContentsNotifier","applyData","updateHeader","resize","node","getBoundingClientRect","top","setViewportSize","innerHeight","resizeViewport","v07_to_v08_nodes","json","columns","map","sort","id","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","records","query","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","startDate","responseDate","v10_nodes","reference","dialogBase","selectBoxItems","items","options","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","values","includes","header","updateContents","cell","undefined","updateRowFunc","visible","generalFormat","formatSelect","lbox","updateTextBox","updateTextareaBox","updateCheckBox","updateNumberBox","updateQueryMolGroup","selectBoxValue","dispatch","queryMolGroupValue","fetcher","get","then","res","source","textquery","box","textBoxValue","areaquery","textareaBoxLines","updateApp","menubar","storeID","idb","updateItem","item","uuidv4","console","info","putItem","export","location","hfile","downloadJSON","formData","FormData","stringify","post","length","core","fetchProgress","getItemByID","serverStatus","instance","ongoing","dialogs","fieldConfigDialog","updateBody","fieldFetchDialog","targets","resourceSchema","resources","domain","compounds","futures","queries","q","workflow","mapper","tableToMapping","all","mps","mp","joinFields","fieldFileDialog","fieldInputDialog","defaultFieldProperties","push","default","params","networkgenDialog","queryParams","measure","nodes","open","renameDialog","registerWorkflow","fetched","hasOwnProperty","fmt","d3format","Number","isNaN","parseFloat","partialMatch","toString","toUpperCase","indexOf","URLQuery","pairs","search","substring","split","_","fromPairs","replace","c","r","Math","random","schema","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","first","deleteItem","delete","put","updateFunc","modify","reset","baseURL","keys","fetch","credentials","Error","statusText","response","formdata","method","body","command","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","compress","str","gzip","mappingToTable","keyField","concat","entry","rcd","f","table","ignore","Date","row","csvToMapping","csvString","lines","shift","now","headerIdx","h","line","k","Array","apply","fd","uniqBy","plotCell","vega","View","initialize","run","plotThumbnail","vegaSpec","toImageURL","binaryToDataURI","binary","readAsDataURL","cellFunc","numeric","raw","assay_id","list","plot","img","text_field","control","svg","width","DatagridState","[object Object]","visibleFields","sortedRecords","filteredRecords","snp","snapshot","sortOrder","filterText","defaultColumnHeight","none","scrollBarSpace","index","contentWidth","viewportHeight","numViewportRows","previousNumViewportRows","previousVieportTop","viewportBottom","fixedViewportHeight","updateFilterNotifier","factory","height","ceil","position","previousViewportTop","min","order","ki","findIndex","obj","splice","applyOrder","applyFilter","widthfSum","reduce","widthf","assign","b","orders","some","vp","pos","floor","scrollTop","setScrollPosition","setFilterText","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","convertTable","structure","_structure","_index","v08_nodes","$schema","convertNetwork","edges","nodeFields","fieldTransform","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","find","column","range","unknown","size","nodeContent","label","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","v10_edges","buttonBox","menuButton","menuButtonLink","menuModalLink","dropdownMenuButton","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","accept","click","dropdownMenuFileValue","files","confirmDialog","message","base","footer","submitDialog","title","selectBox","checklistBox","checklistBoxValue","render","caption","menuLink","button","modal","tableRowValue","textBox","readonlyBox","textareaBox","placeholder","textareaBoxValue","checkBox","checkBoxValue","numberBox","max","step","numberBoxValue","fileInputBox","fileInputBoxValue","setFilter","searchBox","rsrcs","assays","flatten","check","dialog","dg","datagrid","rowf","vtypes","value_types","check_d","condition","fileInput","preview","isCsv","pop","tbl","plotCols","ps","p","himg","defaultValues","queryMolGroup","$","popover","trigger","simOptionGroup","collapse","simOptionGroupValue","timeout","diam","tree","ignoreHs","diameter","maxTreeSize","rdk","measures","group","thld","app","legacy","menu","fetchedAssays","rdkit","onresize","methodList","mcs","queryMol","operator","re","uniqCols","Set","arr","exec","add","from","getSDFPropList","queryFormData","implh","recalc","searchDialog","structDialog","filterDialog","sdfDialog","datagridApp","chemrsrc","compoundIDPlaceholder","protocol","navigator","onLine","server","templates","dataURL","newDatagrid"],"mappings":"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"}