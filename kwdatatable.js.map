{"version":3,"file":"kwdatatable.js","sources":["../src/helper/file.js","../src/helper/mapper.js","../src/store/StoreConnection.js","../src/helper/formatValue.js","../src/component/Component.js","../src/common.js","../src/component/DataGrid.js","../src/datatable.js","../src/helper/d3Form.js","../src/helper/definition.js","../src/helper/KArray.js","../src/helper/window.js","../src/fetcher.js","../src/helper/misc.js","../src/store/IDBStore.js","../src/helper/image.js","../src/component/Dialog.js","../src/component/Header.js"],"sourcesContent":["\n/** @module helper/file */\n\nimport pako from 'pako';\n\nimport {default as def} from './definition.js';\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    e.format = 'raw';\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: def.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\nfunction v07_to_v08_convert(json) {\n  if (json.hasOwnProperty('edges')) {\n    const nodes = v07_to_v08_nodes(json.nodes);\n    const edges = v07_to_v08_edges(json.edges, nodes.fields);\n    return {nodes: nodes, edges: edges};\n  } else {\n    return v07_to_v08_nodes(json);\n  }\n}\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  const json = JSON.parse(text);\n  if (json.hasOwnProperty('schemaVersion')) return json;\n  if (json.hasOwnProperty('edges')) {\n    if (json.edges.hasOwnProperty('schemaVersion')) {\n      if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n        json.edges.reference = {nodes: json.edges.nodesID};\n        const idx_converter = {};\n        json.nodes.records.forEach((e, i) => {\n            e.index = i;\n            e.structure = e._structure;\n            idx_converter[e._index] = e.index;\n            delete e._index;\n            delete e._structure;\n        });\n        json.edges.records.forEach(e => {\n            e.source = idx_converter[e.source];\n            e.target = idx_converter[e.target];\n        });\n        json.nodes.fields.forEach(e => {\n          if (e.key === '_index') e.key = 'index';\n          if (e.key === '_structure') e.key = 'structure';\n        });\n        json.edges.snapshot.nodeColor.field.key = 'index';\n        json.edges.snapshot.nodeLabel.field.key = 'index';\n        json.edges.snapshot.nodeSize.field.key = 'index';\n      }\n      return json;\n    }\n  }\n  return v07_to_v08_convert(json);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module helper/dataStructure */\n\nimport KArray from './KArray.js';\nimport {default as def} from './definition.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: def.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: def.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: def.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields = def.defaultFieldProperties(\n    KArray.from(data.fields).concat(mp.fields).unique('key'));\n}\n\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\nimport {default as def} from '../helper/definition.js';\nimport {default as mapper} from '../helper/mapper.js';\nimport {default as store} from './IDBStore.js';\n\n\nfunction getAppSetting(key) {\n  return store.getAppSetting(key)\n    .catch(err => {\n      console.error(`Unexpected key: ${key}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction setAppSetting(key, value) {\n  return store.putAppSetting(key, value)\n    .catch(err => {\n      console.error(`Unexpected key: ${key} or value: ${value}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction getResources() {\n  return store.getResources();\n}\n\n\nfunction setResources(rsrcs) {\n  return store.putResources(rsrcs)\n    .catch(err => {\n      console.error(`Unexpected resources: ${rsrcs}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction getAllTables() {\n  return store.getAllItems();\n}\n\n\nfunction getTablesByDataType(type) {\n  return store.getItemsByDataType(type)\n    .catch(err => {\n      console.error(`Unexpected dataType: ${type}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction getTable(id) {\n  return store.getItemById(id)\n    .catch(err => {\n      console.error(`Unexpected table ID: ${id}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction setFieldProperties(id, updates) {\n  return store.updateItem(id, item => {\n    item.fields.forEach((fd, i) => {\n      fd.visible = updates.visibles.includes(fd.key);\n      fd.format = updates.formats[i];\n      if (updates.d3_formats[i]) fd.d3_format = updates.d3_formats[i];\n    });\n    item.revision++;\n  })\n  .catch(err => {\n    console.error(`Unexpected table ID: ${id} or updates: ${updates}`);\n    Promise.reject(err);\n  });\n}\n\n\nfunction joinFields(id, mapping) {\n  return store.updateItem(id, item => {\n    mapper.apply(item, mapping);\n    item.revision++;\n  })\n  .catch(err => {\n    console.error(`Unexpected table ID: ${id} or mapping: ${mapping}`);\n    Promise.reject(err);\n  });\n}\n\n\nfunction updateTableAttribute(id, key, value) {\n  return store.updateItem(id, item => {\n    item[key] = value;\n    item.revision++;\n  })\n  .catch(err => {\n    console.error(`Unexpected table ID: ${id}, key: ${key} or value: ${value}`);\n    Promise.reject(err);\n  });\n}\n\n\nfunction insertTable(data) {\n  data.fields = def.defaultFieldProperties(data.fields);\n  return store.putItem(data)\n    .catch(err => {\n      console.error(`Unexpected data: ${data}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction updateTable(data) {\n  if (data.status === 'failure') {  // No data found on server\n    return updateTableAttribute(data.id, 'status', 'failure');\n  }\n  // update\n  return store.updateItem(data.id, item => {\n    data.fields = def.defaultFieldProperties(data.fields);\n    Object.assign(item, data);\n    item.revision++;\n  });\n}\n\n\nfunction deleteTable(id) {\n  return store.deleteItem(id)\n    .catch(err => {\n      console.error(`Unexpected table ID: ${id}`);\n      Promise.reject(err);\n    });\n}\n\n\nfunction reset() {\n  return store.reset();\n}\n\n\nexport default {\n  getAppSetting, setAppSetting, getResources, setResources,\n  getAllTables, getTablesByDataType, getTable,\n  setFieldProperties, joinFields,\n  updateTableAttribute, insertTable, updateTable,\n  deleteTable, reset\n};\n","\n/** @module helper/formatValue */\n\nimport d3 from 'd3';\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\nfunction numericAsc(a, b) {\n  const fa = parseFloat(a);\n  const fb = parseFloat(b);\n  if (isNaN(fa) || isNaN(fb)) {\n    return String(b).localeCompare(String(a));\n  }\n  return fb - fa;\n}\n\n\nfunction numericDesc(a, b) {\n  return numericAsc(b, a);\n}\n\n\nfunction textAsc(a, b) {\n  return String(b).localeCompare(String(a));\n}\n\n\nfunction textDesc(a, b) {\n  return textAsc(b, a);\n}\n\n\nexport default {\n  formatNum, partialMatch,\n  numericAsc, numericDesc, textAsc, textDesc\n};\n","\n/** @module component/Component */\n\nimport d3 from 'd3';\nimport {default as def} from '../helper/definition.js';\nimport {default as fmt} from '../helper/formatValue.js';\n\n\nfunction selectOptions(selection, data, key, text) {\n  const options = selection.selectAll('option')\n    .data(data, key);\n  options.exit().remove();\n  options.enter().append('option')\n    .merge(options)\n      .attr('value', key)\n      .text(text);\n}\n\n\nfunction checkboxList(selection, data, name, key, text) {\n  const items = selection.selectAll('li').data(data, key);\n  items.exit().remove();\n  const entered = items.enter().append('li')\n    .attr('class', 'form-check')\n    .append('label');\n  entered.append('input');\n  entered.append('span');\n  const updated = entered.merge(items.select('label'))\n    .attr('class', 'form-check-label');\n  updated.select('input')\n    .attr('type', 'checkbox')\n    .attr('class', 'form-check-input')\n    .attr('name', name)\n    .attr('value', key);\n  updated.select('span')\n    .text(text);\n}\n\n\n// checkbox list with tooltip\n// call $('[data-toggle=\"tooltip\"]').tooltip() after this function\nfunction checkboxListT(selection, data, name, key, text) {\n  const items = selection.selectAll('li').data(data, key);\n  items.exit().remove();\n  const entered = items.enter().append('li')\n    .attr('class', 'form-check')\n    .append('label');\n  entered.append('input');\n  entered.append('a');\n  const updated = entered.merge(items.select('label'))\n    .attr('class', 'form-check-label');\n  updated.select('input')\n    .attr('type', 'checkbox')\n    .attr('class', 'form-check-input')\n    .attr('name', name)\n    .attr('value', key);\n  updated.select('a')\n    .attr('data-toggle', 'tooltip')\n    .attr('data-placement', 'bottom')\n    .attr('title', d => d.description || 'No')\n    .text(text);\n}\n\n\nfunction createTable(selection, data) {\n  // Header\n  if (selection.select('thead').size()) selection.select('thead').remove();\n  selection.append('thead').append('tr');\n  // Records\n  if (selection.select('tbody').size()) selection.select('tbody').remove();\n    selection.append('tbody');\n\n  const cols = data.fields.filter(e => e.visible);\n  const header = selection.select('thead tr').selectAll('th')\n    .data(cols, d => d.key);\n  header.exit().remove();\n  header.enter().append('th')\n    .merge(header)\n      .text(d => d.name);\n}\n\n\nfunction updateTableRecords(selection, rcds, keyFunc) {\n  const header = selection.select('thead tr').selectAll('th')\n    .data();\n  const rowSelection = selection.select('tbody').selectAll('tr')\n    .data(rcds, keyFunc);\n  rowSelection.exit().remove();\n  const rowEntered = rowSelection.enter().append('tr');\n  rowEntered.selectAll('td')\n    .data(d => header.map(e => d[e.key]))\n    .enter().append('td');\n  rowEntered.merge(rowSelection)\n    .selectAll('td')\n      .classed('align-middle', true)\n    .html(function (d, i) {\n      if (d === undefined) return '';\n      if (header[i].format === 'd3_format') {\n        return fmt.formatNum(d, header[i].d3_format);\n      }\n      if (header[i].format === 'plot') return '[plot]';\n      if (header[i].format === 'image') return '[image]';\n      if (header[i].format === 'control') return;\n      return d;\n    })\n    .each((d, i, nodes) => {\n      // This should be called after html\n      if (header[i].format === 'control') d3.select(nodes[i]).call(d);\n    });\n}\n\n\nfunction appendTableRows(selection, rcds, keyFunc) {\n  const newRcds = selection.select('tbody').selectAll('tr').data();\n  Array.prototype.push.apply(newRcds, rcds);\n  updateTableRecords(selection, newRcds, keyFunc);\n}\n\n\nfunction addSort(selection) {\n  selection.select('thead tr').selectAll('th')\n    .filter(d => def.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      const isNum = def.sortType(d.format) === 'numeric';\n      const cmp = isAsc\n        ? (isNum ? fmt.numericAsc : fmt.textAsc)\n        : (isNum ? fmt.numericDesc : fmt.textDesc);\n      selection.select('tbody').selectAll('tr')\n        .sort((a, b) => cmp(a[d.key], b[d.key]));\n      d3.select(`#sort-${d.key}`)\n        .text(isAsc ? '^' : 'v');\n    });\n}\n\n\nfunction formatNumbers(selection) {\n  // DEPRECATED: no longer used\n  selection.select('thead tr').selectAll('th')\n    .each((col, colIdx) => {\n      if (col.digit === 'raw') return;\n      selection.select('tbody').selectAll('tr')\n        .selectAll('td')\n          .filter((d, i) => i === colIdx)\n          .text(d => fmt.formatNum(d, col.digit));\n    });\n}\n\n\nexport default {\n  selectOptions, checkboxList, checkboxListT,\n  createTable, updateTableRecords,\n  appendTableRows, addSort, formatNumbers\n};\n","\nimport {default as def} from './helper/definition.js';\nimport {default as win} from './helper/window.js';\nimport {default as misc} from './helper/misc.js';\nimport {default as store} from './store/StoreConnection.js';\nimport {default as dialog} from './component/Dialog.js';\nimport {default as fetcher} from './fetcher.js';\n\n\nfunction interactiveInsert(data) {\n  return store.getTable(data.id)\n    .then(found => {\n      if (!found) return Promise.resolve(data); // no existing table\n      if (data.revision == found.revision) return Promise.reject(data.id); // same revision\n      // data id conflict\n      $('#importconfirm-dialog').modal('toggle');\n      return new Promise(res => {\n        dialog.importConfirmDialog(action => {\n          if (action === 'overwrite') {\n            res(data);\n          }\n          if (action === 'keepboth') {\n            data.id = misc.uuidv4();\n            res(data);\n          }\n        });\n      });\n    })\n    .then(\n      data => store.insertTable(data).then(() => data.id), // insert or update table\n      id => {\n        if (id) return Promise.resolve(id); // same revision -> call existing table\n        return Promise.reject();\n      }\n    );\n}\n\n\nfunction fetchResults(command='update') {\n  return store.getTable(win.URLQuery().id)\n    .then(data => {\n      if (!def.ongoing(data)) return Promise.reject();\n      return data;\n    })\n    .then(data => {\n      const query = {id: data.id, command: command};\n      return fetcher.get('res', query)\n        .then(fetcher.json)\n        .then(store.updateTable, fetcher.error);\n    }, () => Promise.resolve());\n}\n\n\nfunction registerServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker\n      .register('sw.js')\n      .then(reg => {\n        console.info('ServiceWorker registration successful with scope: ', reg.scope);\n      }).catch(err => {\n        console.info('ServiceWorker registration failed: ', err);\n      });\n  } else {\n    console.info('Off-line mode is not supported');\n  }\n}\n\n\nfunction loader() {\n  /*\n  if (document.location.protocol === \"file:\") {\n    console.info('Off-line mode (local file)');\n    store.setGlobalConfig('onLine', false);\n    return Promise.resolve();\n  }\n  if ('onLine' in navigator) {\n    if (!navigator.onLine) {\n      console.info('Off-line mode (no internet connection)');\n      store.setGlobalConfig('onLine', false);\n      return Promise.resolve();\n    }\n  }*/\n  const server = fetcher.get('server')\n    .then(fetcher.json)\n    .catch(() => null);\n  const local = store.getAppSetting('serverInstance');\n  return Promise.all([server, local]).then(ps => {\n    const serverStatus = ps[0];\n    const clientInstance = ps[1];\n    if (!serverStatus) return Promise.resolve(null);\n    if (!serverStatus.debugMode) {\n      registerServiceWorker();\n    } else {\n      console.info('Off-line mode is disabled for debugging');\n    }\n    if (serverStatus.instance === clientInstance) {\n      console.info('Resource schema is already up to date');\n      return Promise.resolve(serverStatus);\n    } else {\n      return fetcher.get('schema')\n        .then(fetcher.json)\n        .then(schema => {\n          console.info(`New resource schema version: ${serverStatus.instance}`);\n          return Promise.all([\n            store.setResources(schema.resources),\n            store.setAppSetting('templates', schema.templates),\n            store.setAppSetting(\n              'compoundIDPlaceholder', schema.compoundIDPlaceholder),\n              store.setAppSetting(\n                'defaultDataType', schema.defaultDataType),\n            store.setAppSetting('serverInstance', serverStatus.instance),\n            store.setAppSetting('rdkit', serverStatus.rdkit)\n          ])\n          .then(() => Promise.resolve(serverStatus));\n        }, fetcher.error);\n    }\n  });\n}\n\n\nexport default {\n  interactiveInsert, fetchResults, registerServiceWorker, loader\n};\n","\n/** @module component/DataGrid */\n\nimport d3 from 'd3';\nimport {default as def} from '../helper/definition.js';\nimport {default as fmt} from '../helper/formatValue.js';\nimport {default as img} from '../helper/image.js';\n\n\nconst defaultColumnWidth = {\n  numeric: 120,\n  text: 200,\n  none: 200\n};\n\nconst defaultColumnHeight = {\n  numeric: 40,\n  text: 40,\n  none: 200\n};\n\nconst scrollBarSpace = 20;\n\n\n\nfunction createDataGrid(selection, data) {\n  // Header\n  if (selection.select('div.dg-header').size()) {\n    selection.select('div.dg-header').remove();\n  }\n  selection.append('div').classed('dg-header', true);\n  // Body\n  if (selection.select('div.dg-viewport').size()) {\n    selection.select('div.dg-viewport').remove();\n  }\n  selection.append('div').classed('dg-viewport', true)\n    .append('div').classed('dg-body', true);\n  const cols = data.fields.filter(e => e.visible)\n    .map(e => {\n      e.width = defaultColumnWidth[def.sortType(e.format)];\n      e.height = defaultColumnHeight[def.sortType(e.format)];\n      return e;\n    });\n  const rowSize = {\n    height: cols.reduce((a, b) => a.height > b.height ? a : b).height,\n    width: cols.reduce((a, b) => ({width: a.width + b.width})).width\n  };\n  selection.style('width', `${rowSize.width + scrollBarSpace}px`);\n  selection.select('.dg-header').datum(rowSize);\n  const header = selection.select('.dg-header')\n    .selectAll('.dg-hcell')\n      .data(cols, d => d.key);\n  header.exit().remove();\n  header.enter().append('div')\n      .classed('dg-hcell', true)\n      .style('display', 'inline-block')\n    .merge(header)\n      .style('width', d => `${d.width}px`)\n      .text(d => d.name);\n}\n\n\nfunction updateRows(selection, rcds, keyFunc, position, visibleRows) {\n  const rSize = selection.select('.dg-header').datum();\n  const cData = selection.select('.dg-header').selectAll('.dg-hcell')\n    .data();\n  const topPos = Math.min(position, Math.max(0, rcds.length - visibleRows + 1));\n  const bottomPos = topPos + visibleRows;\n  const rcdSlice = rcds.slice(topPos, Math.min(bottomPos, rcds.length));\n  const rowSelection = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(rcdSlice, keyFunc)\n      .style('height', `${rSize.height}px`);\n  rowSelection.exit().remove();\n  const rowEntered = rowSelection.enter().append('div')\n      .attr('class', 'dg-row')\n      .style('position', \"absolute\");\n  rowEntered.selectAll('.dg-cell')\n    .data(cData.map(e => e.width))\n    .enter().append('div')\n      .classed('dg-cell', true)\n      .classed('align-middle', true)\n      .style('display', 'inline-block')\n      .style('width', d => `${d}px`);\n  // TODO: need refactoring\n  rowEntered.merge(rowSelection)\n      .order()\n      .each(function(d, ri) {\n        const rowPos = (position + ri) * rSize.height;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (position + ri) % 2 === 0)\n        .selectAll('.dg-cell')\n          .html(function(_, i) {\n            d3.select(this).attr('id', `c${ri}-${i}`);\n            const value = d[cData[i].key];\n            if (value === undefined) return '';\n            if (cData[i].format === 'd3_format') {\n              return fmt.formatNum(value, cData[i].d3_format);\n            }\n            if (cData[i].format === 'plot') return '';\n            if (cData[i].format === 'compound_id') {\n              return `<a href=\"profile.html?compound=${value}\" target=\"_blank\">${value}</a>`;\n            }\n            if (cData[i].format === 'image') {  // data URI\n              return `<img src=\"${value}\" width=\"180\" height=\"180\"/>`;\n            }\n            return value;\n          })\n          .each(function(_, i) {\n            if (cData[i].format !== 'plot') return;\n            if (!d.hasOwnProperty(cData[i].key)) return;\n            const value = d[cData[i].key];\n            img.showPlot(value, `#c${ri}-${i}`);\n          });\n    });\n}\n\n\nfunction dataGridRecords(selection, rcds, keyFunc) {\n  const rSize = selection.select('.dg-header').datum();\n  const bodyHeight = rcds.length * rSize.height;\n  let position;\n  let visibleRows;\n  selection.select('.dg-body')\n    .style('height', `${bodyHeight}px`)\n    .style('position', \"relative\");\n  selection.select('.dg-viewport')\n    .style('overflow-y', 'auto')\n    .on('scroll', function() {\n      const scrollTop = d3.select(this).node().scrollTop;\n      const newPos = Math.min(Math.floor(scrollTop / rSize.height), rcds.length);\n      if (newPos !== position) {\n        position = newPos;\n        updateRows(selection, rcds, keyFunc, position, visibleRows);\n      }\n    });\n  d3.select(window)\n    .on('resize', function() {\n      const viewport = selection.select('.dg-viewport');\n      const viewportTop = viewport.node().getBoundingClientRect().top;\n      const viewportHeight = window.innerHeight - viewportTop - 5;\n      viewport.style('height', `${viewportHeight}px`);\n      const newVis = Math.ceil(viewportHeight / rSize.height) + 1;\n      if (newVis !== visibleRows) {\n        visibleRows = newVis;\n        viewport.dispatch('scroll');\n      }\n    })\n    .dispatch('resize');\n}\n\n\nfunction addSort(selection, rcds, keyFunc) {\n  selection.select('.dg-header').selectAll('.dg-hcell')\n    .filter(d => def.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n      const isNum = def.sortType(d.format) === 'numeric';\n      const cmp = isAsc\n        ? (isNum ? fmt.numericAsc : fmt.textAsc)\n        : (isNum ? fmt.numericDesc : fmt.textDesc);\n      const sorted = rcds.sort((a, b) => cmp(a[d.key], b[d.key]));\n      dataGridRecords(selection, sorted, keyFunc);\n    });\n}\n\n\nexport default {\n  createDataGrid, dataGridRecords, addSort\n};\n","\n/** @module datatable */\n\nimport d3 from 'd3';\n\nimport {default as d3form} from './helper/d3Form.js';\nimport {default as hfile} from './helper/file.js';\nimport {default as win} from './helper/window.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as common} from './common.js';\nimport {default as store} from './store/StoreConnection.js';\nimport {default as dialog} from './component/Dialog.js';\nimport {default as header} from './component/Header.js';\nimport {default as grid} from './component/DataGrid.js';\n\n\nfunction render() {\n  return store.getTable(win.URLQuery().id)\n    .then(data => {\n      dialog.columnDialog(data.fields, render);\n      dialog.fieldFileDialog(mapping => {\n        return store.joinFields(win.URLQuery().id, mapping).then(render);\n      });\n      header.renderStatus(\n        data, () => common.fetchResults().then(render),\n        () => common.fetchResults('abort').then(render));\n      d3.select('#rename')\n        .on('click', () => {\n          d3.select('#prompt-title').text('Rename table');\n          d3.select('#prompt-label').text('New name');\n          d3.select('#prompt-input').attr('value', data.name);\n          d3.select('#prompt-submit')\n            .on('click', () => {\n              const name = d3form.value('#prompt-input');\n              return store.updateTableAttribute(data.id, 'name', name)\n                .then(() => store.getTable(win.URLQuery().id)) // updateTableAttribute returns 1\n                .then(t => header.renderStatus(\n                  t, () => common.fetchResults().then(render),\n                  () => common.fetchResults('abort').then(render))\n                );\n            });\n        });\n      // Following operations use data.records\n      d3.select('#datatable')\n        .call(grid.createDataGrid, data)\n        .call(grid.dataGridRecords, data.records, d => d.index)\n        .call(grid.addSort, data.records, d => d.index);\n      store.getResources().then(rsrc => {\n        const actres = rsrc.filter(e => e.domain === 'activity');\n        const compoundIDs = data.records.map(e => e.id);\n        dialog.fieldFetchDialog(compoundIDs, data.fields, actres, mapping => {\n          return store.joinFields(win.URLQuery().id, mapping).then(render);\n        });\n      });\n      dialog.graphDialog(params => {\n        const formData = new FormData();\n        formData.append('contents', new Blob([JSON.stringify(data)]));\n        formData.append('params', JSON.stringify(params));\n        return fetcher.post('simnet', formData)\n          .then(fetcher.json)\n          .then(json => {\n            json.networkThreshold = json.query.threshold;\n            return common.interactiveInsert(json)\n              .then(id => {\n                d3.select('#loading-circle').style('display', 'none');\n                window.open(`graph.html?id=${id}`, '_blank');\n              });\n          }, fetcher.error);\n      });\n      d3.select('#export')\n        .on('click', () => hfile.downloadJSON(data, data.name, true));\n      d3.select('#excel')\n        .on('click', () => {\n          const formData = new FormData();\n          formData.append('contents', new Blob([JSON.stringify(data)]));\n          return fetcher.post('xlsx', formData)\n            .then(fetcher.blob)\n            .then(blob => hfile.downloadDataFile(blob, `${data.name}.xlsx`),\n                  fetcher.error);\n        });\n      d3.select('#sdfile')\n        .on('click', () => {\n          const formData = new FormData();\n          formData.append('contents', new Blob([JSON.stringify(data)]));\n          return fetcher.post('sdfout', formData)\n            .then(fetcher.text)\n            .then(text => hfile.downloadDataFile(text, `${data.name}.sdf`),\n                  fetcher.error);\n        });\n    });\n}\n\n\nfunction loadNewTable(data) {\n  return common.interactiveInsert(data)\n    .then(id => {\n      // window.open(`datatable.html?id=${id}`);\n      window.location = `datatable.html?id=${id}`;\n    });\n}\n\n\nfunction run() {\n  d3.select('#import-json')\n    .on('click', () => document.getElementById('select-file').click());\n  d3.select('#select-file')\n    .on('change', () => {\n      const file = document.getElementById('select-file').files[0];\n      hfile.loadJSON(file).then(loadNewTable);\n    });\n  // location parameter enables direct access to datatable JSON via HTTP\n  if (win.URLQuery().hasOwnProperty('location')) {\n    const url = win.URLQuery().location;\n    return hfile.fetchJSON(url)\n      .then(common.interactiveInsert)\n      .then(id => {\n        window.location = `datatable.html?id=${id}`;\n      });\n  }\n  return common.loader().then(serverStatus => {\n    if (!serverStatus) {\n      // Disable offline comannds\n      d3.selectAll('.online-command')\n        .style('color', '#cccccc')\n        .classed('disabled', true)\n        .on('click', () => d3.event.stopPropagation());\n    }\n    // Loading tables\n    if (win.URLQuery().hasOwnProperty('id')) {\n      header.initializeWithData();\n      return common.fetchResults().then(render);\n    } else {\n      header.initialize();\n      dialog.sdfDialog(loadNewTable);\n      if (!serverStatus) return Promise.resolve();\n      return store.getResources().then(rsrc => {\n        const chemres = rsrc.filter(e => e.domain === 'chemical');\n        dialog.pickDialog(chemres, loadNewTable);\n        dialog.structDialog(chemres, loadNewTable);\n        dialog.propDialog(chemres, loadNewTable);\n      });\n    }\n  });\n}\n\n\nexport default {\n  grid, render, run\n};\n","\n/** @module helper/d3Form */\n\nimport d3 from 'd3';\n\n\nfunction value(selector) {\n  return d3.select(selector).node().value;\n}\n\n\nfunction valueInt(selector) {\n  return parseInt(d3.select(selector).node().value);\n}\n\n\nfunction valueFloat(selector) {\n  return parseFloat(d3.select(selector).node().value);\n}\n\n\nfunction checked(selector) {\n  return d3.select(selector).node().checked;\n}\n\n\nfunction firstFile(selector) {\n  return d3.select(selector).node().files[0];\n}\n\n\nfunction inputValues(selector) {\n  return d3.selectAll(selector).selectAll('input').nodes().map(e => e.value);\n}\n\n\nfunction checkboxValues(selector) {\n  return d3.selectAll(selector).selectAll('input:checked').nodes().map(e => e.value);\n}\n\n\nfunction optionValues(selector) {\n  return d3.selectAll(selector).selectAll('select').nodes().map(e => e.value);\n}\n\n\nfunction textareaLines(selector) {\n  return d3.select(selector).node().value.split('\\n').filter(e => e.length > 0);\n}\n\n\nfunction optionData(selector) {\n  const si = d3.select(selector).property('selectedIndex');\n  return d3.select(selector).selectAll('option').data().find((d, i) => i === si);\n}\n\n\nfunction checkboxData(selector) {\n  return d3.selectAll(selector).selectAll('input:checked').data();\n}\n\n\nexport default {\n  value, valueInt, valueFloat, checked,\n  firstFile, inputValues, checkboxValues, optionValues, textareaLines,\n  optionData, checkboxData\n};\n","\n/** @module helper/definition */\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\nfunction ongoing(data) {\n  return ['running', 'ready'].includes(data.status);\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, ongoing\n};\n","\n\nclass KArray extends Array {\n  /**\n   * Return array of object filtered by given unique key\n   */\n  unique(key) {\n    return this.reduce((a, b) => {\n      if (a.find(e => e[key] === b[key]) === undefined) a.push(b);\n      return a;\n    }, new KArray());\n  }\n\n\n  /**\n   * Merge arrays\n   */\n  extend() {\n    return this.reduce((a, b) => {\n      Array.prototype.push.apply(a, b);\n      return a;\n    }, new KArray());\n  }\n\n\n  // Merge arrays(Asynchronous)\n  extendAsync() {\n    return Promise.all(this).then(res => {\n      return res.reduce((a, b) => {\n        Array.prototype.push.apply(a, b);\n        return a;\n      }, new KArray());\n    });\n  }\n\n  toArray() {\n    return new Array(this);\n  }\n\n  toObject() {\n    const obj = {};\n    this.forEach(kv => {\n      obj[kv[0]] = kv[1];\n    });\n    return obj;\n  }\n}\n\nexport default KArray;\n","\nimport KArray from './KArray.js';\n\n\nfunction URLQuery() {\n  return KArray.from(window.location.search.substring(1).split(\"&\"))\n    .map(e => e.split('=')).toObject();\n}\n\n\nexport default {\n  URLQuery\n};\n","\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module helper/parser */\n\nfunction getSDFPropList(str) {\n  const re = />.*?<(\\S+)>/g;\n  const uniqCols = new Set();\n  let arr;\n  while ((arr = re.exec(str)) !== null) {\n    uniqCols.add(arr[1]);\n  }\n  return Array.from(uniqCols);\n}\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n// TODO: not used\nfunction queryFormData(query) {\n  const formData = new FormData();\n  Object.entries(query).forEach(kv => {\n    if (Array.isArray(kv[1])) {\n      kv[1].forEach(e => formData.append(kv[0], e));\n    } else {\n      formData.set(kv[0], kv[1]);\n    }\n  });\n  return formData;\n}\n\n\n// TODO: not used\nfunction queryURL(query) {\n  const queryStr = [];\n  Object.entries(query).forEach(e => {\n    const val = Array.isArray(e[1]) ? JSON.stringify(e[1]) : e[1];\n    const key = e[0];\n    // const encoded = encodeURIComponent(val);\n    queryStr.push(`${key}=${val}`);\n  });\n  return queryStr.join('&');\n}\n\n\n// TODO: not used\nfunction capitalized(str) {\n  return str.replace(/(?:^|\\s)\\S/g, e => e.toUpperCase());\n}\n\n\nexport default {\n  getSDFPropList, uuidv4\n};\n","\nimport Dexie from 'Dexie';\n\n// TODO: can indexed records improve query performance ?\n\nconst schema = {\n  app: 'key',\n  items: 'id, dataType, created',\n  resources: 'id'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\nfunction getAppSetting(key) {\n  return idb.app.where('key').equals(key).first()\n    .then(res => {\n      if (res === undefined) return undefined;\n      return res.value;\n    });\n}\n\n\nfunction putAppSetting(k, v) {  // returns id in success\n  return idb.app.put({ key: k, value: v });\n}\n\n\nfunction getResources() {\n  return idb.resources.toArray();\n}\n\n\nfunction putResources(data) { // returns last id in success\n  return idb.resources.bulkPut(data);\n}\n\n\nfunction getAllItems() {\n  return idb.items.orderBy('created').reverse()\n    .toArray();\n}\n\n\nfunction getItemsByDataType(type) {\n  return idb.items.where('dataType').equals(type).reverse()\n    .sortBy('created');\n}\n\n\nfunction getItemById(tableId) {\n  return idb.items.where('id').equals(tableId).first();\n}\n\n\nfunction updateItem(tableId, callback) {  // returns num of updated items\n  return idb.items.where('id').equals(tableId).modify(callback);\n}\n\n\nfunction deleteItem(tableId) { // returns num of deleted items\n  return idb.items.where('id').equals(tableId).delete();\n}\n\n\nfunction putItem(data) { // returns id in success\n  return idb.items.put(data);\n}\n\n\nfunction reset() {\n  // Try this before tackling with local db troubles\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\nexport default {\n  getAppSetting, putAppSetting, getResources, putResources,\n  getAllItems, getItemsByDataType, getItemById,\n  updateItem, deleteItem, putItem, reset\n};\n","\n/** @module helper/image */\n\nimport vega from 'vega';\n\nfunction showPlot(vegaSpec, selector) {\n  new vega.View(vega.parse(vegaSpec))\n    .initialize(selector)\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nexport default {\n  showPlot, plotThumbnail\n};\n","\n/** @module component/Dialog */\n\nimport d3 from 'd3';\n\nimport KArray from '../helper/KArray.js';\nimport {default as d3form} from '../helper/d3Form.js';\nimport {default as mapper} from '../helper/mapper.js';\nimport {default as def} from '../helper/definition.js';\nimport {default as fmt} from '../helper/formatValue.js';\nimport {default as win} from '../helper/window.js';\nimport {default as hfile} from '../helper/file.js';\nimport {default as misc} from '../helper/misc.js';\nimport {default as himg} from '../helper/image.js';\nimport {default as store} from '../store/StoreConnection.js';\nimport {default as cmp} from './Component.js';\nimport {default as fetcher} from '../fetcher.js';\n\n\nfunction pickDialog(resources, callback) {\n  store.getAppSetting('compoundIDPlaceholder').then(ids => {\n    d3.select('#pick-queryarea').text(ids);\n  });\n  d3.select('#pick-submit')\n    .on('click', () => {\n      d3.select('#loading-icon').style('display', 'inline');\n      const query = {\n        type: 'chemsearch',\n        targets: resources.filter(e => e.domain === 'chemical').map(e => e.id),\n        key: 'compound_id',\n        values: d3form.textareaLines('#pick-queryarea')\n      };\n      return fetcher.get('run', query)\n        .then(fetcher.json)\n        .then(callback, fetcher.error);\n    });\n}\n\n\nfunction propDialog(resources, callback) {\n  d3.select('#prop-targets')\n    .call(cmp.checkboxList, resources, 'targets', d => d.id, d => d.name)\n    .on('change', function () {\n      const cols = KArray.from(d3form.checkboxData('#prop-targets'))\n        .map(d => d.fields)\n        .extend().unique('key');\n      d3.select('#prop-key')\n        .call(cmp.selectOptions, cols, d => d.key, d => d.name);\n    });\n  d3.select('#prop-submit')\n    .on('click', () => {\n      d3.select('#loading-circle').style('display', 'inline');\n      const query = {\n        type: 'chemprop',\n        targets: d3form.checkboxValues('#prop-targets'),\n        key: d3form.optionData('#prop-key').key,\n        values: d3form.textareaLines('#prop-queryarea'),\n        operator: d3form.value('#prop-operator')\n      };\n      return fetcher.get('async', query)\n        .then(fetcher.json)\n        .then(callback, fetcher.error);\n    });\n}\n\n\nfunction structDialog(resources, callback) {\n  d3.select('#struct-qsrc')\n    .call(cmp.selectOptions, resources, d => d.id, d => d.name);\n  d3.select('#struct-targets')\n    .call(cmp.checkboxList, resources, 'targets', d => d.id, d => d.name);\n  store.getAppSetting('rdkit').then(rdk => {\n    d3.select('#struct-method').selectAll('option.rd')\n      .attr('disabled', rdk ? null : 'disabled');\n  });\n  d3.selectAll('#struct-method,#struct-thldtype')\n    .on('change', function () {\n      const method = d3form.value('#struct-method');\n      const thldtype = d3form.value('#struct-thldtype');\n      d3.select('#struct-thld')\n        .attr('disabled', ['gls', 'rdmorgan', 'rdfmcs'].includes(method) ? null : 'disabled')\n        .attr('value', thldtype === 'edge' ? 15 : 0.7)\n        .attr('min', thldtype === 'edge' ? 5 : 0)\n        .attr('max', thldtype === 'edge' ? 999 : 1.0)\n        .attr('step', thldtype === 'edge' ? 1 : 0.01);\n      d3.select('#struct-thldtype')\n        .attr('disabled', ['gls', 'rdmorgan', 'rdfmcs'].includes(method) ? null : 'disabled')\n        .property('value', ['gls', 'rdfmcs'].includes(method) ? undefined : 'sim');\n      d3.select('#struct-thldtype option.sim')\n        .attr('disabled', ['gls', 'rdmorgan', 'rdfmcs'].includes(method) ? null : 'disabled');\n      d3.select('#struct-thldtype option.edge')\n        .attr('disabled', ['gls', 'rdfmcs'].includes(method) ? null : 'disabled');\n      d3.select('#struct-options').selectAll('.gls')\n        .attr('disabled', method === 'gls' ? null : 'disabled');\n      d3.select('#struct-options .fmcs')\n        .attr('disabled', method === 'rdfmcs' ? null : 'disabled');\n    })\n    .dispatch('change');\n  d3.select('#struct-format')\n    .on('change', function () {\n      d3.select('#struct-qsrc')\n        .attr('disabled', this.value === 'dbid' ? null : 'disabled');\n    });\n  d3.select('#struct-preview')\n    .on('click', () => {\n      const f = d3form.value('#struct-format');\n      const query = {\n        format: f,\n        source: f === 'dbid' ? d3form.value('#struct-qsrc') : null,\n        value: f === 'molfile'\n          ? d3form.value('#struct-queryarea') : d3form.textareaLines('#struct-queryarea')[0],\n      };\n      return fetcher.get('strprev', query)\n        .then(fetcher.text)\n        .then(res => d3.select('#struct-image').html(res), fetcher.error);\n    });\n  d3.select('#struct-submit')\n    .on('click', () => {\n      const method = d3form.value('#struct-method');\n      d3.select('#loading-circle').style('display', 'inline');\n      const f = d3form.value('#struct-format');\n      const query = {\n        type: d3form.value('#struct-method'),\n        targets: d3form.checkboxValues('#struct-targets'),\n        queryMol: {\n          format: f,\n          source: f === 'dbid' ? d3form.value('#struct-qsrc') : null,\n          value: f === 'molfile'\n            ? d3form.value('#struct-queryarea') : d3form.textareaLines('#struct-queryarea')[0]\n        },\n        params: {\n          measure: d3form.value('#struct-thldtype'),\n          threshold: d3form.valueFloat('#struct-thld'),\n          ignoreHs: d3form.checked('#struct-ignoreh'),\n          diameter: method === 'gls' ? d3form.valueInt('#struct-diam') : null,\n          maxTreeSize: method === 'gls' ? d3form.valueInt('#struct-tree') : null,\n          molSizeCutoff: method === 'gls' ? d3form.valueInt('#struct-skip') : null,\n          timeout: method === 'rdfmcs' ? d3form.valueInt('#struct-timeout') : null\n        }\n      };\n      const command = query.type === 'exact' ? 'run' : 'async';\n      return fetcher.get(command, query)\n        .then(fetcher.json)\n        .then(callback, fetcher.error);\n    });\n}\n\n\nfunction sdfDialog(callback) {\n  d3.select('#sdf-file')\n    .on('change', () => {\n      const reader = new FileReader();\n      const file = document.getElementById('sdf-file').files[0];\n      reader.onload = (e) => {\n        d3.select('#sdf-cols')\n          .call(cmp.checkboxList, misc.getSDFPropList(e.target.result),\n                'fields', d => d, d => d\n          );\n      };\n      // Scan only first 100mb of the file due to memory limit.\n      reader.readAsText(file.slice(0, 100 * 1024 * 1024));\n    });\n  d3.select('#sdf-selectall')\n    .on('change', () => {\n      d3.select('#sdf-cols').selectAll('input')\n        .property('checked', d3form.checked('#sdf-selectall'));\n    });\n  d3.select('#sdf-submit')\n    .on('click', () => {\n      d3.select('#loading-circle').style('display', 'inline');\n      const params = {\n        fields: d3form.checkboxValues('#sdf-cols'),\n        implh: d3form.checked('#sdf-implh'),\n        recalc: d3form.checked('#sdf-recalc')\n      };\n      const formData = new FormData();\n      formData.append('contents', d3form.firstFile('#sdf-file'));\n      formData.append('params', JSON.stringify(params));\n      return fetcher.post('sdfin', formData)\n        .then(fetcher.json)\n        .then(callback, fetcher.error);\n    });\n}\n\n\nfunction columnDialog(dataFields, callback) {\n  const table = {\n    fields: def.defaultFieldProperties([\n      {key: 'name', format: 'text'},\n      {key: 'visible', format: 'control'},\n      {key: 'format', format: 'control'},\n      {key: 'd3_format', format: 'control'}\n    ])\n  };\n  const records = dataFields.map(e => {\n    const rcd = {};\n    const generalFormat = ['text', 'numeric', 'd3_format', 'raw', 'compound_id'];\n    rcd.name = e.name;\n    rcd.visible = selection => selection\n        .classed('column-vis', true)\n        .classed(`row-${e.key}`, true)\n      .append('input')\n        .attr('type', 'checkbox')\n        .attr('value', e.key)\n        .property('checked', e.visible);\n    rcd.format = selection => selection\n        .classed('column-format', true)\n        .classed(`row-${e.key}`, true)\n      .append('select')\n        .call(cmp.selectOptions,\n              generalFormat.includes(e.format) ? generalFormat : [e.format],\n              d => d, d => d)\n        .attr('disabled', generalFormat.includes(e.format) ? null : 'disabled')\n        .property('value', e.format)\n        .on('change', function () {\n          d3.select(`.column-d3f.row-${e.key} input`)\n            .attr('disabled', this.value === 'd3_format' ? null : 'disabled');\n        });\n    rcd.d3_format = selection => selection\n        .classed('column-d3f', true)\n        .classed(`row-${e.key}`, true)\n      .append('input')\n        .attr('size', 10)\n        .attr('disabled', e.format === 'd3_format' ? null : 'disabled')\n        .property('value', e.d3_format);\n    return rcd;\n  });\n  d3.select('#column-table')\n    .call(cmp.createTable, table)\n    .call(cmp.updateTableRecords, records, d => d.key);\n  d3.select('#column-submit')\n    .on('click', () => {\n      const query = {\n        visibles: d3form.checkboxValues('.column-vis'),\n        formats: d3form.optionValues('.column-format'),\n        d3_formats: d3form.inputValues('.column-d3f')\n      };\n      return store.setFieldProperties(win.URLQuery().id, query)\n        .then(callback);\n    });\n}\n\n\n// TODO:\nfunction fieldFetchDialog(compoundIDs, dataFields, resources, callback) {\n  // Prevent implicit submission\n  document.getElementById('join-search')\n    .addEventListener('keypress', event => {\n      if (event.keyCode === 13) event.preventDefault();\n    });\n  const dataKeys = dataFields.map(e => e.key);\n  const resourceFields = KArray.from(resources.map(e => e.fields))\n    .extend().unique('key').filter(e => e.key !== 'id');\n  d3.select('#join-keys')\n    .call(cmp.checkboxList, resourceFields, 'keys', d => d.key, d => d.name)\n    .selectAll('li')\n    .each(function(d) { // disable already shown columns\n      d3.select(this).selectAll('label').select('input')\n        .property('checked', dataKeys.includes(d.key))\n        .attr('disabled', dataKeys.includes(d.key) ? 'disabled' : null);\n    });\n  d3.select('#join-search')\n    .on('keyup', function () {\n      const match = d => fmt.partialMatch(d3form.value(this), d.name);\n      d3.select('#join-keys').selectAll('li')\n        .style('visibility', d => match(d) ? null : 'hidden')\n        .style('position', d => match(d) ? null : 'absolute');\n    });\n  d3.select('#join-submit')\n    .on('click', () => {\n      d3.select('#loading-circle').style('display', 'inline');\n      const selected = d3form.checkboxValues('#join-keys');\n      const queryFieldKeys = resourceFields.map(e => e.key)\n        .filter(e => !dataKeys.includes(e))\n        .filter(e => selected.includes(e));\n      const query = {\n        type: 'fieldfilter',\n        targetFields: queryFieldKeys,\n        key: 'compound_id',\n        values: compoundIDs\n      };\n      return fetcher.get('run', query)\n        .then(fetcher.json)\n        .then(json => callback(mapper.tableToMapping(json, 'id')),\n              fetcher.error);\n  });\n}\n\n\nfunction fieldFileDialog(callback) {\n  // TODO: need to refactor\n  d3.select('#importcol-file')\n    .on('change', () => {\n      const file = document.getElementById('importcol-file').files[0];\n      const isCsv = file.name.split('.').pop() === 'csv';\n      hfile.readFile(file).then(res => {\n        const mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n        const tbl = mapper.mappingToTable(mapping);\n        d3.select('#importcol-preview').call(cmp.createTable, tbl)\n          .call(cmp.updateTableRecords,\n                tbl.records.slice(0, 5), d => d[tbl.fields[0].key]);\n        // bind mapping\n        d3.select('#importcol-preview').datum(mapping);\n      });\n    });\n  d3.select('#importcol-submit')\n    .on('click', () => {\n      let mapping = d3.select('#importcol-preview').datum();\n      d3.select('#importcol-preview').datum(null);  // unbind mapping\n      // Generate thumbnails\n      const plotCols = [];\n      if (mapping.hasOwnProperty('field')) {\n        mapping = mapper.singleToMulti(mapping);\n      }\n      mapping.fields.forEach((e, i) => {\n        if (e.format === 'plot') {\n          mapping.fields[i].format = 'image';\n          plotCols.push(i);\n        }\n      });\n      if (plotCols.length > 0) {\n        const ps = [];\n        Object.entries(mapping.mapping).forEach(m => {\n          plotCols.forEach(e => {\n            const p = himg.plotThumbnail(m[1][e])\n              .then(img => {\n                mapping.mapping[m[0]][e] = img;\n              });\n            ps.push(p);\n          });\n        });\n        Promise.all(ps).then(() => callback(mapping));\n      } else {\n        callback(mapping);\n      }\n    });\n}\n\n\nfunction graphDialog(callback) {\n  store.getAppSetting('rdkit').then(rdk => {\n    d3.select('#graph-measure').selectAll('option.rd')\n      .attr('disabled', rdk ? null : 'disabled');\n  });\n  d3.select('#graph-measure')\n    .on('change', function () {\n      d3.select('#graph-options').selectAll('.gls')\n        .attr('disabled', this.value === 'gls' ? null : 'disabled');\n      d3.select('#graph-options').selectAll('.fmcs')\n        .attr('disabled', this.value === 'rdfmcs' ? null : 'disabled');\n    });\n  d3.select('#graph-submit')\n    .on('click', () => {\n      d3.select('#loading-circle').style('display', 'inline');\n      const measure = d3form.value('#graph-measure');\n      const params = {\n        measure: measure,\n        threshold: d3form.valueFloat('#graph-thld'),\n        ignoreHs: d3form.checked('#graph-ignoreh'),\n        diameter: measure === 'gls' ? d3form.valueInt('#graph-diam') : null,\n        maxTreeSize: measure === 'gls' ? d3form.valueInt('#graph-tree') : null,\n        molSizeCutoff: measure === 'gls' ? d3form.valueInt('#graph-skip') : null,\n        timeout: measure === 'rdfmcs' ? d3form.valueInt('#graph-timeout') : null\n      };\n      callback(params);\n    });\n}\n\n\nfunction graphConfigDialog(currentThld, minThld, callback) {\n  d3.select('#graphconfig-thld')\n    .attr('value', currentThld)\n    .attr('max', 1.0)\n    .attr('min', minThld);\n  d3.select('#graphconfig-submit')\n    .on('click', () => {\n      const newThld = d3form.valueFloat('#graphconfig-thld');\n      if (newThld < minThld) return;  // TODO: fool proof\n      callback(newThld);\n    });\n}\n\n\nfunction communityDialog(callback) {\n  d3.select('#community-name').attr('value', 'comm_');\n  d3.select('#community-submit')\n    .on('click', () => {\n      const query = {\n        name: d3form.value('#community-name'),\n        nulliso: d3form.checked('#community-nulliso')\n      };\n      callback(query);\n    });\n}\n\n\nfunction importConfirmDialog(callback) {\n  d3.select('#importconfirm-overwrite')\n    .on('click', () => callback('overwrite'));\n  d3.select('#importconfirm-keepboth')\n    .on('click', () => callback('keepboth'));\n  d3.select('#importconfirm-cancel')\n    .on('click', () => callback('cancel'));\n}\n\n\nexport default {\n  pickDialog, propDialog, structDialog, sdfDialog,\n  columnDialog, fieldFetchDialog, fieldFileDialog, graphDialog,\n  graphConfigDialog, communityDialog, importConfirmDialog\n};\n","\n/** @module component/Header */\n\nimport d3 from 'd3';\nimport {default as def} from '../helper/definition.js';\n\n\nfunction renderStatus(data, refresh_callback, abort_callback) {\n  d3.select('#loading-circle').style('display', 'none');\n  d3.select('title').text(data.name);\n  d3.select('#title').text(data.name);\n  d3.select('#refresh')\n    .style('display', def.ongoing(data) ? 'inline-block' : 'none');\n  d3.select('#abort')\n    .style('display', def.ongoing(data) ? 'inline-block' : 'none');\n  const doneText = {\n    'nodes': 'entries found',\n    'edges': 'connections created'\n  };\n  const dtx = doneText[data.dataType];\n  d3.select('#progress')\n    .text(`(${data.status} - ${data.records.length} ${dtx} in ${data.execTime} sec.)`);\n  if (def.ongoing(data)) {\n    d3.select('#progress').append('div').append('progress')\n      .attr('max', 100)\n      .attr('value', data.progress)\n      .text(`${data.progress}%`);\n  }\n  d3.select('#refresh').on('click', refresh_callback);\n  d3.select('#abort')\n    .on('click', () => {\n      d3.select('#confirm-message')\n        .text('Are you sure you want to abort this calculation job?');\n      d3.select('#confirm-submit')\n        .classed('btn-primary', false)\n        .classed('btn-warning', true)\n        .on('click', abort_callback);\n    });\n  console.info('Query');\n  console.info(data.query);  // query datails are available on browser console.\n}\n\n\nfunction initializeWithData() {\n  d3.select('#new-data').style('display', 'none');\n  d3.select('#loading-circle').style('display', 'none');\n}\n\n\nfunction initialize() {\n  d3.select('#data-control').style('display', 'none');\n  d3.select('#nodedata').style('display', 'none');\n  d3.select('#refresh').style('display', 'none');\n  d3.select('#abort').style('display', 'none');\n  d3.select('#loading-circle').style('display', 'none');\n  d3.select('#status').selectAll('li').style('display', 'none');\n}\n\n\nexport default {\n  renderStatus, initializeWithData, initialize\n};\n"],"names":["v07_to_v08_nodes","json","fields","columns","map","e","format","id","name","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","records","query","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v07_to_v08_convert","hasOwnProperty","nodes","edges","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","key","column","domain","range","unknown","size","text","visible","nodeContent","structure","label","reference","nodeTableId","def","defaultFieldProperties","networkThreshold","v07_to_v08_edges","readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","pako","inflate","to","JSON","parse","nodesID","idx_converter","forEach","i","index","_structure","_index","source","downloadDataFile","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","singleToMulti","mapping","newMapping","Object","entries","m","updateTableAttribute","value","store","updateItem","item","catch","err","console","numericAsc","b","fa","parseFloat","fb","isNaN","String","localeCompare","textAsc","updateTableRecords","selection","rcds","keyFunc","header","select","selectAll","rowSelection","exit","remove","rowEntered","enter","append","d","merge","classed","html","undefined","fmt","formatNum","d3_format","each","d3","call","registerServiceWorker","navigator","serviceWorker","register","then","reg","info","scope","dataGridRecords","rSize","datum","bodyHeight","length","height","position","visibleRows","style","on","scrollTop","this","node","newPos","Math","min","floor","cData","topPos","max","bottomPos","rcdSlice","attr","width","order","ri","rowPos","_","img","showPlot","updateRows","viewport","viewportTop","getBoundingClientRect","top","viewportHeight","innerHeight","newVis","ceil","dispatch","render","getTable","win","URLQuery","dialog","columnDialog","fieldFileDialog","joinFields","renderStatus","common","fetchResults","d3form","t","grid","createDataGrid","addSort","getResources","rsrc","actres","filter","compoundIDs","fieldFetchDialog","graphDialog","params","formData","FormData","stringify","fetcher","post","threshold","interactiveInsert","open","hfile","downloadJSON","loadNewTable","location","selector","valueInt","parseInt","valueFloat","checked","firstFile","files","inputValues","checkboxValues","optionValues","textareaLines","split","optionData","si","property","checkboxData","sortType","includes","ongoing","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","fetch","res","arrayBuffer","compress","str","gzip","c","KArray","Array","[object Object]","reduce","push","prototype","apply","all","obj","kv","from","search","substring","toObject","baseURL","get","q","keys","credentials","Error","statusText","response","formdata","method","body","getSDFPropList","re","uniqCols","Set","arr","exec","add","uuidv4","replace","r","random","toString","mappingToTable","mp","keyField","concat","entry","rcd","f","tableToMapping","table","ignore","Date","row","csvToMapping","csvString","lines","shift","now","headerIdx","h","line","values","k","fd","unique","schema","app","items","resources","idb","Dexie","version","stores","where","equals","first","putAppSetting","v","put","toArray","putResources","bulkPut","getAllItems","orderBy","reverse","getItemsByDataType","type","sortBy","getItemById","tableId","callback","modify","deleteItem","delete","putItem","getAppSetting","setAppSetting","setResources","rsrcs","getAllTables","getTablesByDataType","setFieldProperties","updates","visibles","formats","d3_formats","mapper","insertTable","updateTable","assign","deleteTable","reset","d3format","Number","partialMatch","toUpperCase","indexOf","numericDesc","textDesc","vegaSpec","vega","View","initialize","run","plotThumbnail","toImageURL","selectOptions","options","checkboxList","entered","updated","checkboxListT","description","createTable","cols","appendTableRows","newRcds","isAsc","isNum","cmp","sort","formatNumbers","col","colIdx","digit","pickDialog","ids","targets","propDialog","extend","operator","structDialog","rdk","thldtype","queryMol","measure","ignoreHs","diameter","maxTreeSize","molSizeCutoff","timeout","command","sdfDialog","getElementById","misc","implh","recalc","dataFields","generalFormat","addEventListener","keyCode","preventDefault","dataKeys","resourceFields","match","selected","targetFields","isCsv","pop","tbl","plotCols","ps","p","himg","graphConfigDialog","currentThld","minThld","newThld","communityDialog","nulliso","importConfirmDialog","found","$","modal","action","loader","server","local","serverStatus","clientInstance","debugMode","instance","templates","compoundIDPlaceholder","defaultDataType","rdkit","refresh_callback","abort_callback","dtx","initializeWithData","defaultColumnWidth","numeric","none","defaultColumnHeight","scrollBarSpace","rowSize","sorted","click","stopPropagation","chemres"],"mappings":"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"}