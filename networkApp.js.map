{"version":3,"file":"networkApp.js","sources":["../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/common/file.js","../src/common/mapper.js","../src/common/scale.js","../src/component/button.js","../src/component/modal.js","../src/component/formBox.js","../src/dialog/community.js","../src/dialog/rename.js","../src/common/legacySchema.js","../src/network/state.js","../src/network/communityDetection.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/component.js","../src/network/view.js","../src/network/interaction.js","../src/network/force.js","../src/networkApp.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction serverStatus() {\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      console.info('Server did not respond');\n      response.server = {};\n      response.schema = {\n        resources: [], templates: [], compoundIDPlaceholder: null\n      };\n    })\n    .then(() => response);\n}\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  serverStatus, fetchProgress\n};\n","\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: ['#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462',\n    '#b3de69','#fccde5','#bc80bd','#ccebc5'], unknown: '#f0f0f0'},\n  {key: 'cbsafe', name: 'Colorblind safe', size: 10,\n   range: ['#543005','#8c510a','#bf812d','#dfc27d','#f6e8c3','#c7eae5',\n   '#80cdc1','#35978f','#01665e','#003c30'], unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formBox */\n\n\nimport d3 from 'd3';\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorBox(selection, label, value) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n    .append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .attr('type', 'color');\n  selection\n      .call(updateColorBox, value)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\n\nfunction colorBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  colorBox, updateColorBox, colorBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module dialog/community */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'community-dialog';\nconst title = 'Comunity detection';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'painting');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Name\n  dialog.select('.modal-body').append('div')\n      .classed('name', true)\n      .call(box.textBox, 'comm-name', 'New name', 40, 'comm_');\n  // Assign null to isolated nodes\n  dialog.select('.modal-body').append('div')\n      .classed('nulliso', true)\n      .call(box.checkBox, 'comm-nulliso', 'Assign null to isolated nodes', true);\n}\n\n\nfunction value(selection) {\n  return {\n    name: box.textBoxValue(selection.select('.name')),\n    nulliso: box.checkBoxValue(selection.select('.nulliso'))\n  };\n}\n\n\nexport default {\n  menuLink, body, value\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'edittext');\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || '#7fffd4';\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#cccccc', '#cccccc'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || '#cccccc';\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n","\n/** @module network/communityDetection */\n\nimport jLouvain from 'jLouvain';\n\n\nexport function communityDetection(nodes, edges, option) {\n  // TODO: partition resolution setting\n  // TODO: Error at edges.length 0\n  if (!edges.length) {\n    const community = {};\n    nodes.forEach(e => { community[e] = option.nulliso ? null : e; });\n    return community;\n  }\n  const clusters = {};\n  const community = jLouvain().nodes(nodes).edges(edges)();\n  Object.entries(community).forEach(e => {\n    if (!clusters.hasOwnProperty(e[1])) {\n      clusters[e[1]] = [];\n    }\n    clusters[e[1]].push(e[0]);\n  });\n  // Sort by cluster size\n  Object.entries(clusters)\n    .sort((a, b) => a[1].length < b[1].length)\n    .forEach((cluster, i) => {\n      if (cluster[1].length === 1) {\n        community[cluster[1][0]] = option.nulliso ? null : i;\n      } else {\n        cluster[1].forEach(e => {\n          community[e] = i;\n        });\n      }\n    });\n  return community;\n}\n\n\nexport default {\n  communityDetection\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range, unknown) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.append('div')\n      .classed('unknown', true)\n      .classed('mb-1', true)\n      .call(box.colorBox, 'Unknown', unknown);\n  selection.call(updateColorRangeGroup, range, unknown);\n}\n\n\nfunction updateColorRangeGroup(selection, range, unknown) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n  selection.select('.unknown')\n      .call(box.updateColorBox, unknown)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const range = rbox.colorScaleBoxValue(selection.select('.range'));\n  const unknown = box.colorBoxValue(selection.select('.unknown'));\n  const rvalue = range.length\n    ? range : scaledef.colorRangeTypes.find(e => e.key === type).range;\n  return {\n    range: rvalue,\n    unknown: unknown\n  };\n\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range, state.nodeColor.unknown\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range, state.nodeColor.unknown)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values.range;\n      state.nodeColor.unknown = values.unknown;\n      if (values.range.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range, state.nodeColor.unknown\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range, state.nodeColor.unknown)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values.range;\n        state.nodeLabelColor.unknown = values.unknown;\n        if (values.range.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module networkApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from './common/core.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as mapper} from './common/mapper.js';\nimport {default as misc} from './common/misc.js';\nimport {default as scale} from './common/scale.js';\n\nimport {default as button} from './component/button.js';\nimport {default as modal} from './component/modal.js';\n\nimport {default as communityDialog} from './dialog/community.js';\nimport {default as renameDialog} from './dialog/rename.js';\n\nimport NetworkState from './network/state.js';\nimport {default as community} from './network/communityDetection.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as view} from './network/view.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nfunction getGraph(storeID) {\n  return idb.getItemByID(storeID)\n    .then(edges => {\n      return idb.getItemByID(edges.reference.nodes)\n        .then(nodes => {\n          return {edges: edges, nodes: nodes};\n        });\n    });\n}\n\n\nfunction app(data) {\n  // TODO: define field size according to the data size\n  const width = 1200;\n  const height = 1200;\n  const state = new NetworkState(data, width, height);\n  const simulation = force.forceSimulation(width, height);\n  const frame = d3.select('#nw-frame')\n      .call(view.networkViewFrame, state);\n  frame.select('.nw-view')\n      .call(view.networkView, state)\n      .call(interaction.setInteraction, state)\n      .call(force.activate, simulation, state);\n  d3.select('#nw-control')\n      .call(control.controlBox, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#nw-frame').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();\n  // Network view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, 'Network', 'primary', 'network-white')\n      .select('.dropdown-menu');\n  menu.append('a').call(communityDialog.menuLink);\n  menu.append('a').call(renameDialog.menuLink);\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Save', 'save')\n      .on('click', function () {\n        if (state.data.edges.storeID) {\n          return idb.updateItem(state.data.edges.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.edges.name;\n            item.snapshot = state.snapshot();\n          })\n          .then(() => console.info('Snapshot saved'));\n        } else {\n          const data = state.export();\n          return idb.putItem(data.nodes)\n            .then(storeID => {\n              data.edges.reference.nodes = storeID;\n              return idb.putItem(data.edges);\n            })\n            .then(storeID => {\n              window.location = `network.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Export to JSON', 'export')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.nodes.storeID;\n        delete data.edges.storeID;\n        delete data.edges.reference.nodes;\n        hfile.downloadJSON(data, data.edges.name);\n      });\n  if (state.data.nodes.storeID) {\n    // Node datagrid link\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Nodes', 'outline-secondary', 'table-gray')\n        .attr('href', `datagrid.html?id=${state.data.nodes.storeID}`)\n        .attr('target', '_blank');\n  }\n  // Dashboard link\n  menubar.append('a')\n      .call(button.menuButtonLink, 'Dashboard', 'outline-secondary', 'db-gray')\n      .attr('href', 'dashboard.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.edges.status);\n  if (ongoing) {\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Refresh', 'outline-secondary', 'refresh-gray')\n        .on('click', function () {\n          core.fetchProgress(state.data.edges.storeID)\n            .then(() => getGraph(state.data.edges.storeID))\n            .then(app);\n        });\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Abort server job', 'warning', 'delete-gray')\n        .attr('data-toggle', 'modal')\n        .attr('data-target', '#abort-dialog');\n    menubar.append('span')\n        .classed('progress', true)\n      .append('progress')\n        .attr('max', 100)\n        .attr('value', state.data.edges.progress)\n        .text(`${state.data.edges.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.edges.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.edges.status} - ${state.data.edges.records.length} connections created in ${state.data.edges.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('communityd', true)\n      .call(communityDialog.body);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.edges.name);\n  dialogs.append('div')\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      )\n      .on('submit', function () {\n        core.fetchProgress(state.data.edges.storeID, 'abort')\n          .then(() => getGraph(state.data.edges.storeID))\n          .then(app);\n      });\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  // Title\n  d3.select('title').text(state.data.edges.name);\n  d3.select('#menubar').select('.title').text(state.data.edges.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  // Rename dialog\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.edges.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n      });\n  // Community dialog\n  dialogs.select('.communityd')\n      .on('submit', function () {\n        const value = communityDialog.value(d3.select(this));\n        const nodeIds = state.data.nodes.records.map(e => e.index);\n        const edges = state.data.edges.records\n          .filter(e => e.weight >= state.networkThreshold);\n        const comm = community.communityDetection(\n          nodeIds, edges, {nulliso: value.nulliso}\n        );\n        const mapping = {\n          key: 'index',\n          field: misc.defaultFieldProperties(\n            [{key: value.name, format: 'd3_format', d3_format: 'd'}]\n          )[0],\n          mapping: comm\n        };\n        mapper.apply(state.data.nodes, mapping);\n        state.nodeColor = {\n          field: value.name, scale: 'ordinal', domain: null,\n          range: scale.colorRangeTypes[3].range,\n          unknown: scale.colorRangeTypes[3].unknown\n        };\n        $('#community-dialog').modal('hide');  // TODO:\n        d3.select('#loading-icon').style('display', 'none');\n        app(state.export());\n      });\n}\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const storeID = misc.URLQuery().id || null;\n  const dataURL = misc.URLQuery().location || null;\n  if (storeID) {\n    // Load from IndexedDB store\n    return core.fetchProgress(storeID, 'update')\n      .then(() => getGraph(storeID))\n      .then(app);\n  } else if (dataURL) {\n    // Fetch via HTTP\n    return hfile.fetchJSON(dataURL)\n      .then(app);\n  } else {\n    d3.select('#datagrid')\n      .style('color', 'red')\n      .text('ERROR: invalid URL');\n  }\n}\n\n\nexport default {\n  run\n};\n"],"names":["defaultFieldProperties","fields","map","e","hasOwnProperty","name","key","visible","format","sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","_","fromPairs","uuidv4","replace","c","r","Math","random","schema","items","idb","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","console","error","getItemByID","storeID","first","deleteItem","delete","putItem","data","misc","put","updateItem","updateFunc","modify","reset","then","baseURL","get","url","q","Object","keys","length","JSON","stringify","fetch","credentials","res","status","Promise","reject","Error","statusText","resolve","json","response","text","blob","post","formdata","method","body","serverStatus","fetcher","server","info","resources","templates","compoundIDPlaceholder","fetchProgress","command","id","reference","workflow","item","progress","execTime","records","readFile","file","sizeLimit","reader","FileReader","truncated","slice","onload","event","result","onerror","readAsArrayBuffer","readAsText","parseJSON","compressed","pako","inflate","to","parse","downloadDataFile","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","downloadJSON","compress","str","gzip","singleToMulti","mapping","newMapping","entries","forEach","m","created","field","mappingToTable","mp","keyField","concat","entry","rcd","f","i","tableToMapping","table","ignore","Date","filter","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","push","line","values","k","Array","apply","fd","uniqBy","types","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","colorRangeTypes","size","range","unknown","schemePaired","schemeSet2","schemePastel2","schemeSet3","presets","scale","domain","colorPalettes","scaleFunction","attr","sf","find","mid","clamp","d","undefined","buttonBox","selection","label","classed","append","menuButton","menuButtonLink","icon","style","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","accept","on","select","this","node","click","dropdownMenuFileValue","files","dialogBase","remove","confirmDialog","message","base","call","footer","dispatch","submitDialog","title","html","updateTextBox","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","updateColorBox","textBox","textBoxValue","readonlyBox","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","checkBox","box","checkBoxValue","numberBox","min","max","step","numberBoxValue","colorBox","stopPropagation","colorBoxValue","fileInputBox","fileInputBoxValue","menuLink","dialog","modal","nulliso","updateBody","state","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","columns","sort","dataType","schemaVersion","revision","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","startDate","responseDate","v10_nodes","convertTable","index","structure","_structure","_index","v08_nodes","$schema","width","height","convertNetwork","edges","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","column","nodeContent","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","NetworkState","[object Object]","focusedViewThreshold","enableFocusedView","focusedView","overlookViewThreshold","enableOverlookView","overlookView","legacy","n","adjacency","num","networkThresholdCutoff","transform","x","y","zoomListener","dragListener","updateComponentNotifier","updateNodeNotifier","updateEdgeNotifier","updateNodeAttrNotifier","updateEdgeAttrNotifier","snapShotNotifier","fitNotifier","setForceNotifier","stickNotifier","relaxNotifier","restartNotifier","tickCallback","forceField","top","right","bottom","left","viewBox","focusArea","boundary","prevTransform","simulationOnLoad","setAllCoords","setFocusArea","setBoundary","xs","ys","tx","ty","tk","coordsList","nbr","sx","sy","weight","communityDetection","option","community","clusters","jLouvain","b","cluster","selectBoxItems","options","selectAll","exit","enter","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","each","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateRangeBox","updateColorScaleBox","rangeArray","rangeBox","t","rangeBoxValue","colorScaleBox","colorScaleBoxValue","arr","updateColorRangeGroup","lbox","scaledef","p","rbox","updateScaleBoxGroup","isLog","invalid","colorRangeGroup","palettes","rangeTypes","colorRangeGroupValue","scaleBoxGroup","scaleTypes","scaleBoxGroupValue","mainControlBox","viewModes","thldGroup","forceBox","updateMainControlBox","snapshotNotifier","numEdges","combinations","logD","log10","simulation","alpha","isStopped","alphaMin","parseInt","nodeColorControlBox","group","updateNodeColorControlBox","nodeSizeControlBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","updateControlBox","controlBox","tabs","content","svgWidth","svgHeight","updateNodes","showStruct","entered","updateNodeCoords","merged","merge","updateEdges","updateEdgeCoords","updateNodeAttrs","color","labelColor","d3_format","updateEdgeAttrs","updateAttrs","moveNode","moveEdge","updateComponents","nodesToRender","numNodes","edgesToRender","move","datum","resizeViewBox","resize","area","setViewBox","offsetWidth","offsetHeight","component","networkViewFrame","networkView","transition","duration","drag","setCoords","zoom","xMoved","yMoved","zoomIn","setTransform","fit","getBBox","viewBoxRatio","boundaryHeight","boundaryWidth","zoomIdentity","translate","setInteraction","end","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","forceSimulation","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","activate","getGraph","app","control","onresize","menubar","menu","communityDialog","renameDialog","export","hfile","core","dialogs","updateApp","nodeIds","comm","mapper","$","run","protocol","navigator","onLine","dataURL"],"mappings":"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"}