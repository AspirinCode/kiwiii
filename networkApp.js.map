{"version":3,"file":"networkApp.js","sources":["../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/common/file.js","../src/common/mapper.js","../src/common/scale.js","../src/component/button.js","../src/component/modal.js","../src/component/formBox.js","../src/dialog/community.js","../src/dialog/rename.js","../src/common/legacySchema.js","../src/network/state.js","../src/network/communityDetection.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/component.js","../src/network/view.js","../src/network/interaction.js","../src/network/force.js","../src/networkApp.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction serverStatus() {\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      console.info('Server did not respond');\n      response.server = {};\n      response.schema = {\n        resources: [], templates: [], compoundIDPlaceholder: null\n      };\n    })\n    .then(() => response);\n}\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  serverStatus, fetchProgress\n};\n","\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: d3.schemeCategory10, unknown: '#f0f0f0'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module dialog/community */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'community-dialog';\nconst title = 'Comunity detection';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'painting');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Name\n  dialog.select('.modal-body').append('div')\n      .classed('name', true)\n      .call(box.textBox, 'comm-name', 'New name', 40, 'comm_');\n  // Assign null to isolated nodes\n  dialog.select('.modal-body').append('div')\n      .classed('nulliso', true)\n      .call(box.checkBox, 'comm-nulliso', 'Assign null to isolated nodes', true);\n}\n\n\nfunction value(selection) {\n  return {\n    name: box.textBoxValue(selection.select('.name')),\n    nulliso: box.checkBoxValue(selection.select('.nulliso'))\n  };\n}\n\n\nexport default {\n  menuLink, body, value\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'edittext');\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || ['#7fffd4'];\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || ['#333333'];\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n    this.tickCallback = () => {};\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n","\n/** @module network/communityDetection */\n\nimport jLouvain from 'jLouvain';\n\n\nexport function communityDetection(nodes, edges, option) {\n  // TODO: partition resolution setting\n  // TODO: Error at edges.length 0\n  if (!edges.length) {\n    const community = {};\n    nodes.forEach(e => { community[e] = option.nulliso ? null : e; });\n    return community;\n  }\n  const clusters = {};\n  const community = jLouvain().nodes(nodes).edges(edges)();\n  Object.entries(community).forEach(e => {\n    if (!clusters.hasOwnProperty(e[1])) {\n      clusters[e[1]] = [];\n    }\n    clusters[e[1]].push(e[0]);\n  });\n  // Sort by cluster size\n  Object.entries(clusters)\n    .sort((a, b) => a[1].length < b[1].length)\n    .forEach((cluster, i) => {\n      if (cluster[1].length === 1) {\n        community[cluster[1][0]] = option.nulliso ? null : i;\n      } else {\n        cluster[1].forEach(e => {\n          community[e] = i;\n        });\n      }\n    });\n  return community;\n}\n\n\nexport default {\n  communityDetection\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.call(updateColorRangeGroup, range);\n}\n\n\nfunction updateColorRangeGroup(selection, range) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const values = rbox.colorScaleBoxValue(selection.select('.range'));\n  if (!values.length) {\n    return scaledef.colorRangeTypes.find(e => e.key === type).range;\n  } else {\n    return values;\n  }\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        if (value) {\n          state.stickNotifier();\n        } else {\n          state.relaxNotifier();\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values;\n      if (values.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values;\n        if (values.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      selection.call(end, simulation, state);\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  state.setForceNotifier();\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module networkApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from './common/core.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as mapper} from './common/mapper.js';\nimport {default as misc} from './common/misc.js';\nimport {default as scale} from './common/scale.js';\n\nimport {default as button} from './component/button.js';\nimport {default as modal} from './component/modal.js';\n\nimport {default as communityDialog} from './dialog/community.js';\nimport {default as renameDialog} from './dialog/rename.js';\n\nimport NetworkState from './network/state.js';\nimport {default as community} from './network/communityDetection.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as view} from './network/view.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nfunction getGraph(storeID) {\n  return idb.getItemByID(storeID)\n    .then(edges => {\n      return idb.getItemByID(edges.reference.nodes)\n        .then(nodes => {\n          return {edges: edges, nodes: nodes};\n        });\n    });\n}\n\n\nfunction app(data) {\n  // TODO: define field size according to the data size\n  const width = 1200;\n  const height = 1200;\n  const state = new NetworkState(data, width, height);\n  const simulation = force.forceSimulation(width, height);\n  const frame = d3.select('#nw-frame')\n      .call(view.networkViewFrame, state);\n  frame.select('.nw-view')\n      .call(view.networkView, state)\n      .call(interaction.setInteraction, state)\n      .call(force.activate, simulation, state);\n  d3.select('#nw-control')\n      .call(control.controlBox, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#nw-frame').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();\n  // Network view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, 'Network', 'primary', 'network-white')\n      .select('.dropdown-menu');\n  menu.append('a').call(communityDialog.menuLink);\n  menu.append('a').call(renameDialog.menuLink);\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Save', 'save')\n      .on('click', function () {\n        if (state.data.edges.storeID) {\n          return idb.updateItem(state.data.edges.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.edges.name;\n            item.snapshot = state.snapshot();\n          })\n          .then(() => console.info('Snapshot saved'));\n        } else {\n          const data = state.export();\n          return idb.putItem(data.nodes)\n            .then(storeID => {\n              data.edges.reference.nodes = storeID;\n              return idb.putItem(data.edges);\n            })\n            .then(storeID => {\n              window.location = `network.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Export to JSON', 'export')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.nodes.storeID;\n        delete data.edges.storeID;\n        delete data.edges.reference.nodes;\n        hfile.downloadJSON(data, data.edges.name);\n      });\n  if (state.data.nodes.storeID) {\n    // Node datagrid link\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Nodes', 'outline-secondary', 'table-gray')\n        .attr('href', `datagrid.html?id=${state.data.nodes.storeID}`)\n        .attr('target', '_blank');\n  }\n  // Dashboard link\n  menubar.append('a')\n      .call(button.menuButtonLink, 'Dashboard', 'outline-secondary', 'db-gray')\n      .attr('href', 'dashboard.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.edges.status);\n  if (ongoing) {\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Refresh', 'outline-secondary', 'refresh-gray')\n        .on('click', function () {\n          core.fetchProgress(state.data.edges.storeID)\n            .then(() => getGraph(state.data.edges.storeID))\n            .then(app);\n        });\n    menubar.append('a')\n        .call(button.menuButtonLink, 'Abort server job', 'warning', 'delete-gray')\n        .attr('data-toggle', 'modal')\n        .attr('data-target', '#abort-dialog');\n    menubar.append('span')\n        .classed('progress', true)\n      .append('progress')\n        .attr('max', 100)\n        .attr('value', state.data.edges.progress)\n        .text(`${state.data.edges.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.edges.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.edges.status} - ${state.data.edges.records.length} connections created in ${state.data.edges.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('communityd', true)\n      .call(communityDialog.body);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.edges.name);\n  dialogs.append('div')\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      )\n      .on('submit', function () {\n        core.fetchProgress(state.data.edges.storeID, 'abort')\n          .then(() => getGraph(state.data.edges.storeID))\n          .then(app);\n      });\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  // Title\n  d3.select('title').text(state.data.edges.name);\n  d3.select('#menubar').select('.title').text(state.data.edges.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  // Rename dialog\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.edges.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n      });\n  // Community dialog\n  dialogs.select('.communityd')\n      .on('submit', function () {\n        const value = communityDialog.value(d3.select(this));\n        const nodeIds = state.data.nodes.records.map(e => e.index);\n        const edges = state.data.edges.records\n          .filter(e => e.weight >= state.networkThreshold);\n        const comm = community.communityDetection(\n          nodeIds, edges, {nulliso: value.nulliso}\n        );\n        const mapping = {\n          key: 'index',\n          field: misc.defaultFieldProperties(\n            [{key: value.name, format: 'd3_format', d3_format: 'd'}]\n          )[0],\n          mapping: comm\n        };\n        mapper.apply(state.data.nodes, mapping);\n        state.nodeColor = {\n          field: value.name, scale: 'ordinal', domain: null,\n          range: scale.colorRangeTypes[3].range,\n          unknown: scale.colorRangeTypes[3].unknown\n        };\n        $('#community-dialog').modal('hide');  // TODO:\n        d3.select('#loading-icon').style('display', 'none');\n        app(state.export());\n      });\n}\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const storeID = misc.URLQuery().id || null;\n  const dataURL = misc.URLQuery().location || null;\n  if (storeID) {\n    // Load from IndexedDB store\n    return core.fetchProgress(storeID, 'update')\n      .then(() => getGraph(storeID))\n      .then(app);\n  } else if (dataURL) {\n    // Fetch via HTTP\n    return hfile.fetchJSON(dataURL)\n      .then(app);\n  } else {\n    d3.select('#datagrid')\n      .style('color', 'red')\n      .text('ERROR: invalid URL');\n  }\n}\n\n\nexport default {\n  run\n};\n"],"names":["defaultFieldProperties","fields","map","e","hasOwnProperty","name","key","visible","format","sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","_","fromPairs","uuidv4","replace","c","r","Math","random","schema","items","idb","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","console","error","getItemByID","storeID","first","deleteItem","delete","putItem","data","misc","put","updateItem","updateFunc","modify","reset","then","baseURL","get","url","q","Object","keys","length","JSON","stringify","fetch","credentials","res","status","Promise","reject","Error","statusText","resolve","json","response","text","blob","post","formdata","method","body","serverStatus","fetcher","server","info","resources","templates","compoundIDPlaceholder","fetchProgress","command","id","reference","workflow","item","progress","execTime","records","readFile","file","sizeLimit","reader","FileReader","truncated","slice","onload","event","result","onerror","readAsArrayBuffer","readAsText","parseJSON","compressed","pako","inflate","to","parse","downloadDataFile","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","downloadJSON","compress","str","gzip","singleToMulti","mapping","newMapping","entries","forEach","m","created","field","mappingToTable","mp","keyField","concat","entry","rcd","f","i","tableToMapping","table","ignore","Date","filter","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","push","line","values","k","Array","apply","fd","uniqBy","types","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","colorRangeTypes","size","range","schemeCategory10","unknown","schemePaired","schemeSet2","schemePastel2","schemeSet3","presets","scale","domain","colorPalettes","scaleFunction","attr","sf","find","mid","clamp","d","undefined","buttonBox","selection","label","classed","append","menuButton","menuButtonLink","icon","style","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","accept","on","select","this","node","click","dropdownMenuFileValue","files","dialogBase","remove","confirmDialog","message","base","call","footer","dispatch","submitDialog","title","html","updateTextBox","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","textBox","textBoxValue","readonlyBox","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","checkBox","box","checkBoxValue","numberBox","min","max","step","numberBoxValue","fileInputBox","fileInputBoxValue","menuLink","dialog","modal","nulliso","updateBody","state","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","columns","sort","dataType","schemaVersion","revision","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","startDate","responseDate","v10_nodes","convertTable","index","structure","_structure","_index","v08_nodes","$schema","width","height","convertNetwork","edges","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","column","nodeContent","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","NetworkState","[object Object]","focusedViewThreshold","enableFocusedView","focusedView","overlookViewThreshold","enableOverlookView","overlookView","legacy","n","adjacency","num","networkThresholdCutoff","transform","x","y","zoomListener","dragListener","updateComponentNotifier","updateNodeNotifier","updateEdgeNotifier","updateNodeAttrNotifier","updateEdgeAttrNotifier","snapShotNotifier","fitNotifier","setForceNotifier","stickNotifier","relaxNotifier","restartNotifier","tickCallback","forceField","top","right","bottom","left","viewBox","focusArea","boundary","prevTransform","simulationOnLoad","setAllCoords","setFocusArea","setBoundary","xs","ys","tx","ty","tk","coordsList","nbr","sx","sy","weight","communityDetection","option","community","clusters","jLouvain","b","cluster","selectBoxItems","options","selectAll","exit","enter","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","each","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateRangeBox","updateColorScaleBox","rangeArray","rangeBox","t","rangeBoxValue","colorScaleBox","stopPropagation","colorScaleBoxValue","arr","updateColorRangeGroup","lbox","scaledef","p","rbox","updateScaleBoxGroup","isLog","invalid","colorRangeGroup","palettes","rangeTypes","colorRangeGroupValue","scaleBoxGroup","scaleTypes","scaleBoxGroupValue","mainControlBox","viewModes","thldGroup","forceBox","updateMainControlBox","snapshotNotifier","numEdges","combinations","logD","log10","simulation","alpha","isStopped","alphaMin","parseInt","nodeColorControlBox","group","updateNodeColorControlBox","nodeSizeControlBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","updateControlBox","controlBox","tabs","content","svgWidth","svgHeight","updateNodes","showStruct","entered","updateNodeCoords","merged","merge","updateEdges","updateEdgeCoords","updateNodeAttrs","color","labelColor","d3_format","updateEdgeAttrs","updateAttrs","moveNode","moveEdge","updateComponents","nodesToRender","numNodes","edgesToRender","move","datum","resizeViewBox","resize","area","setViewBox","offsetWidth","offsetHeight","component","networkViewFrame","networkView","transition","duration","drag","setCoords","zoom","xMoved","yMoved","zoomIn","setTransform","fit","getBBox","viewBoxRatio","boundaryHeight","boundaryWidth","zoomIdentity","translate","setInteraction","end","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","forceSimulation","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","activate","getGraph","app","control","onresize","menubar","menu","communityDialog","renameDialog","export","hfile","core","dialogs","updateApp","nodeIds","comm","mapper","$","run","protocol","navigator","onLine","dataURL"],"mappings":";ukBA4DEA,uBArDF,SAAgCC,GAC9B,OAAOA,EAAOC,IAAIC,IACXA,EAAEC,eAAe,UAASD,EAAEE,KAAOF,EAAEG,KACrCH,EAAEC,eAAe,aAAYD,EAAEI,SAAU,GAC1CJ,EAAEC,eAAe,eAAcD,EAAEK,OAAS,aACzCL,EAAEC,eAAe,YAAWD,EAAEK,OAAS,OACrCL,KA+CeM,SA1C1B,SAAkBC,GAChB,OAAK,UAAW,aAAaC,SAASD,GAAa,WAC9C,OAAQ,cAAe,WAAY,QAAQC,SAASD,GAAa,OAC/D,QAuC2BE,UA9BpC,SAAmBC,EAAOC,GACxB,OAAID,MAAAA,GAAyCE,OAAOC,MAAMH,GAAe,GAClEA,GAASI,WAAWJ,GAASK,EAAGV,OAAOM,EAAVI,CAAoBL,GAASA,GA4BpBM,aAxB/C,SAAsBC,EAAOC,GAC3B,OAAIA,MAAAA,GAAsD,KAAXA,IAEC,IADzCA,EAAOC,WAAWC,cACtBC,QAAQJ,EAAME,WAAWC,gBAqB+BE,SAjB7D,WACE,MAAMC,EAAQC,OAAOC,SAASC,OAAOC,UAAU,GAAGC,MAAM,KACrD7B,IAAIC,GAAKA,EAAE4B,MAAM,MACpB,OAAOC,EAAEC,UAAUP,IAckDQ,OATvE,WACE,MAAO,uCAAuCC,QAAQ,QAAS,SAASC,GACtE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAC7B,OADyC,KAALH,EAAWC,EAAS,EAAJA,EAAU,GACrDf,SAAS,QC9CtB,MAAMkB,GACJC,MAAO,8BAGT,IAAIC,EAAM,IAAIC,EAAM,SACpBD,EAAIE,QAAQ,GAAGC,OAAOL,UAwGpBM,YAjGF,WACE,OAAOJ,EAAID,MACRM,QAAQ,WACRC,UACAC,WA6FUC,mBApFf,SAA4BC,GAC1B,OAAOT,EAAID,MACRW,MAAM,YACNC,OAAOF,GACPH,UACAM,OAAO,WACPC,MAAMC,IACLC,QAAQC,wCAAwCP,IAAQK,MA6E3BG,YAnEnC,SAAqBC,GACnB,OAAOlB,EAAID,MACRW,MAAM,WACNC,OAAOO,GACPC,QACAN,MAAMC,IACLC,QAAQC,wCAAwCE,IAAWJ,MA8D/DM,WApDF,SAAoBF,GAClB,OAAOlB,EAAID,MACRW,MAAM,WACNC,OAAOO,GACPG,UAgDSC,QAvCd,SAAiBC,GAIf,OAHKA,EAAKL,UACRK,EAAKL,QAAUM,EAAKhC,UAEfQ,EAAID,MAAM0B,IAAIF,IAmCAG,WAzBvB,SAAoBR,EAASS,GAC3B,OAAO3B,EAAID,MACRW,MAAM,WACNC,OAAOO,GACPU,OAAOD,GACPd,MAAMC,IACLC,QAAQC,MAAM,0BAA2BF,MAmBZe,MAVnC,WACE,OAAO7B,EAAIqB,SAASS,KAAK,MACvB9B,EAAM,IAAIC,EAAM,UACZC,QAAQ,GAAGC,OAAOL,OC3G1B,MAAMiC,EAAU,UAsDdC,IApDF,SAAaC,EAAKvD,MAChB,MACMwD,EADUC,OAAOC,KAAK1D,GAAO2D,iBACLC,KAAKC,UAAU7D,KAAW,GACxD,OAAO8D,SACFT,IAAUE,IAAMC,KAEjBO,YAAa,YAEfX,KAAKY,GACc,MAAfA,EAAIC,OACCC,QAAQC,OAAO,IAAIC,MAAMJ,EAAIK,aAE/BH,QAAQI,QAAQN,KAwCpBO,KApCP,SAAcC,GACZ,OAAOA,EAASD,QAmCLE,KAhCb,SAAcD,GACZ,OAAOA,EAASC,QA+BCC,KA5BnB,SAAcF,GACZ,OAAOA,EAASE,QA2BOC,KAxBzB,SAAcpB,EAAKqB,GACjB,OAAOd,SACFT,IAAUE,KAEXsB,OAAQ,OACRC,KAAMF,EACNb,YAAa,YAEfX,KAAKY,GACc,MAAfA,EAAIC,OACCC,QAAQC,OAAO,IAAIC,MAAMJ,EAAIK,aAE/BH,QAAQI,QAAQN,KAYI1B,MAP/B,SAAeF,GAEb,OADAC,QAAQC,MAAMF,GACP,cCKP2C,aAlDF,WACE,MAAMP,KACN,OAAOQ,EAAQ1B,IAAI,UAChBF,KAAK4B,EAAQT,MACbnB,KAAKY,IACJQ,EAASS,OAASjB,IAEnBZ,KAAK,IAAM4B,EAAQ1B,IAAI,WACvBF,KAAK4B,EAAQT,MACbnB,KAAKY,IACJQ,EAASpD,OAAS4C,IAEnB7B,MAAM,KACLE,QAAQ6C,KAAK,0BACbV,EAASS,UACTT,EAASpD,QACP+D,aAAeC,aAAeC,sBAAuB,QAGxDjC,KAAK,IAAMoB,IA+BAc,cA3BhB,SAAuB9C,EAAS+C,EAAQ,UACtC,OAAOjE,EAAIiB,YAAYC,GACpBY,KAAKP,IACJ,IAAKA,EAAM,OAAOqB,QAAQC,iBAAiB3B,sBAC3C,KAAM,QAAS,WAAWjD,SAASsD,EAAKoB,QAAS,OACjD,MAAMjE,GAASwF,GAAI3C,EAAK4C,UAAUC,SAAUH,QAASA,GACrD,OAAOP,EAAQ1B,IAAI,WAAYtD,GAC5BoD,KAAK4B,EAAQT,MACbnB,KAAKP,GACgB,YAAhBA,EAAKoB,OACA3C,EAAI0B,WAAWR,EAASmD,IAC7BA,EAAK1B,OAAS,YAGX3C,EAAI0B,WAAWR,EAASmD,IAC7BA,EAAK1B,OAASpB,EAAKoB,OACnB0B,EAAKC,SAAW/C,EAAK+C,SACrBD,EAAKE,SAAWhD,EAAKgD,SACrBF,EAAK9G,OAASiE,EAAKlE,uBAAuBiE,EAAKhE,QAC/C8G,EAAKG,QAAUjD,EAAKiD,eC5ChC,SAASC,EAASC,EAAMC,EAAWvB,GACjC,OAAO,IAAIR,QAAQ,CAACI,EAASH,KAC3B,MAAM+B,EAAS,IAAIC,WACbC,EAAYH,EAAYD,EAAKK,MAAM,EAAGJ,GAAaD,EACzDE,EAAOI,OAASC,CAAAA,GAASjC,EAAQiC,EAAMtG,OAAOuG,SAC9CN,EAAOO,QAAUnE,CAAAA,GAAS6B,EAAO7B,IAC7BoC,EACFwB,EAAOQ,kBAAkBN,GAEzBF,EAAOS,WAAWP,KAMxB,SAASQ,EAAU/D,EAAMgE,GACvB,MAAMpC,EAAOoC,EAAaC,EAAKC,QAAQlE,GAAOmE,GAAI,WAAanE,EAC/D,OAAOe,KAAKqD,MAAMxC,GAoBpB,SAASyC,EAAiBrE,EAAM5D,GAC9B,IAGE,MAAMsE,EAAMhD,OAAO4G,IAAIC,gBAAgB,IAAIC,MAAMxE,KAC3CyE,EAAIC,SAASC,cAAc,KACjCF,EAAEG,SAAWxI,EACbqI,EAAEI,KAAOnE,EAET+D,EAAEK,cAAc,IAAIC,WAAW,SAC7BC,KAAQtH,OACRuH,SAAW,EACXC,YAAc,KAGhB,MAAOhJ,YAgBTgH,SAAAA,EAAUa,UAAAA,EAAWoB,SA/CvB,SAAkBhC,GAChB,MAAMa,EAAab,EAAK/G,KAAKgJ,SAAS,MAAQjC,EAAK/G,KAAKgJ,SAAS,OACjE,OAAOlC,EAASC,GAAM,EAAOa,GAC1BzD,KAAKP,GAAQ+D,EAAU/D,EAAMgE,KA4CDqB,UAxCjC,SAAmB3E,GACjB,MAAM4E,EAAUC,mBAAmB7E,GAC7BsD,EAAasB,EAAQF,SAAS,MAAQE,EAAQF,SAAS,OAC7D,OAAOnE,MAAMqE,GACV/E,KAAKY,GAAO6C,EAAa7C,EAAIqE,cAAgBrE,EAAIO,QACjDnB,KAAKP,GAAQ+D,EAAU/D,EAAMgE,KAoChCK,iBAAAA,EAAkBoB,aAXpB,SAAsB/D,EAAMtF,EAAMsJ,GAAS,GACzC,MAAMC,EAAM5E,KAAKC,UAAUU,GAErBvD,EAAIuH,EAAW,IAAM,IAE3BrB,EAHaqB,EAAWzB,EAAK2B,KAAKD,GAAOA,KAGfvJ,IADdsF,EAAKvF,eAAe,eAAiBgC,UAAaA,SCvDhE,SAAS0H,EAAcC,GACrB,MAAMC,KAIN,OAHAnF,OAAOoF,QAAQF,EAAQA,SAASG,QAAQC,IACtCH,EAAWG,EAAE,KAAOA,EAAE,OAGtBC,QAASL,EAAQK,QACjBnK,QAAS8J,EAAQM,OACjB/J,IAAKyJ,EAAQzJ,IACbyJ,QAASC,UA4GXF,cAAAA,EAAeQ,eAlGjB,SAAwBP,GACtB,MAAMQ,EAAKR,EAAQ3J,eAAe,SAAW0J,EAAcC,GAAWA,EAChES,GAAYlK,IAAKiK,EAAGjK,IAAKE,OAAQ,QAYvC,OAVEP,OAAQiE,EAAKlE,wBAAwBwK,GAAUC,OAAOF,EAAGtK,SACzDiH,QAASrC,OAAOoF,QAAQM,EAAGR,SAAS7J,IAAIwK,IACtC,MAAMC,KAKN,OAJAA,EAAIJ,EAAGjK,KAAOoK,EAAM,GACpBH,EAAGtK,OAAOiK,QAAQ,CAACU,EAAGC,KACpBF,EAAIC,EAAEtK,KAAOoK,EAAM,GAAGG,KAEjBF,MAuFoBG,eA1EjC,SAAwBC,EAAOzK,EAAK0K,GAAQ,UAC1C,MACMjB,GACJK,SAFU,IAAIa,MAED3J,WACbrB,OAAQiE,EAAKlE,uBAAuB+K,EAAM9K,OACvCiL,OAAO/K,GAAKA,EAAEG,MAAQA,GACtB4K,OAAO/K,IAAM6K,EAAOrK,SAASR,EAAEG,OAClCA,IAAKA,EACLyJ,YAKF,OAHAgB,EAAM7D,QAAQgD,QAAQiB,IACpBpB,EAAQA,QAAQoB,EAAI7K,IAAQyJ,EAAQ9J,OAAOC,IAAIC,GAAKgL,EAAIhL,EAAEG,QAErDyJ,GA6DwCqB,aApDjD,SAAsBC,GACpB,MAAMC,EAAQD,EAAUtJ,MAAM,cACxBwJ,EAASD,EAAME,QAAQzJ,MAAM,KAC7BzB,EAAMiL,EAAOC,QACbC,EAAM,IAAIR,KACVS,KACAzL,KACNsL,EAAOrB,QAAQ,CAACyB,EAAGd,KACP,KAANc,IACJD,EAAUE,KAAKf,GACf5K,EAAO2L,MAAMtL,IAAKqL,EAAGnL,OAAQ,YAE/B,MAAMuJ,GACJK,QAASqB,EAAInK,WACbrB,OAAQiE,EAAKlE,uBAAuBC,GACpCK,IAAKA,EACLyJ,YAUF,OARAuB,EAAMpB,QAAQ2B,IACZ,MAAMC,EAASD,EAAK9J,MAAM,KACpBgK,EAAID,EAAON,QACjBzB,EAAQA,QAAQgC,GAAKC,MAAMN,EAAU3G,QACrC2G,EAAUxB,QAAQW,IAChBd,EAAQA,QAAQgC,GAAGlB,GAAKiB,EAAOjB,OAG5Bd,GA0BsDkC,MAhB/D,SAAehI,EAAM8F,GACnB,MAAMQ,EAAKR,EAAQ3J,eAAe,SAAW0J,EAAcC,GAAWA,EACtE9F,EAAKiD,QACFgE,OAAOP,GAAOJ,EAAGR,QAAQ3J,eAAeuK,EAAIJ,EAAGjK,OAC/C4J,QAAQS,IACPJ,EAAGtK,OAAOiK,QAAQ,CAACgC,EAAIrB,KACrBF,EAAIuB,EAAG5L,KAAOiK,EAAGR,QAAQY,EAAIJ,EAAGjK,MAAMuK,OAG5C5G,EAAKhE,OAAU+B,EAAEiC,EAAKhE,QACnBwK,OAAOvG,EAAKlE,uBAAuBuK,EAAGtK,SACtCkM,OAAO,OACPtL,UCxHL,MASMuL,IACH9L,IAAK,SAAUD,KAAM,SAAUgM,KAAMnL,EAAGoL,gBACxChM,IAAK,MAAOD,KAAM,MAAOgM,KAAMnL,EAAGqL,aAClCjM,IAAK,WAAYD,KAAM,WAAYgM,KAAMnL,EAAGsL,kBAC5ClM,IAAK,UAAWD,KAAM,UAAWgM,KAAMnL,EAAGuL,iBAqBvCC,IACHpM,IAAK,aAAcD,KAAM,aAAcsM,KAAM,IAC7CrM,IAAK,YAAaD,KAAM,YAAasM,KAAM,IAC3CrM,IAAK,aAAcD,KAAM,cAAesM,KAAM,GAC9CC,MAAO1L,EAAG2L,iBAAkBC,QAAS,YACrCxM,IAAK,aAAcD,KAAM,cAAesM,KAAM,GAC9CC,MAAO1L,EAAG6L,aAAatC,OAAOvJ,EAAG8L,YAAaF,QAAS,YACvDxM,IAAK,aAAcD,KAAM,cAAesM,KAAM,GAC9CC,MAAO1L,EAAG6L,aAAatC,OAAOvJ,EAAG+L,cAAe/L,EAAG8L,WAAY9L,EAAGgM,YAClEJ,QAAS,mBAsCVK,UAhFC7M,IAAK,WAAYD,KAAM,WAAY+M,MAAO,MAAOC,QAAS,KAAM,QAChE/M,IAAK,UAAWD,KAAM,UAAW+M,MAAO,SAAUC,QAAS,EAAG,OAC9D/M,IAAK,KAAMD,KAAM,aAAc+M,MAAO,WAAYC,QAAS,EAAG,KAC9D/M,IAAK,KAAMD,KAAM,KAAM+M,MAAO,SAAUC,QAAS,IAAK,OACtD/M,IAAK,OAAQD,KAAM,OAAQ+M,MAAO,SAAUC,SAAU,EAAG,KA4EjDjB,MAAAA,EAAOkB,gBA/DfhN,IAAK,aAAcD,KAAM,aACzBuM,OAAQ,UAAW,WAAYE,QAAS,YACxCxM,IAAK,aAAcD,KAAM,aACzBuM,OAAQ,UAAW,WAAYE,QAAS,YACxCxM,IAAK,SAAUD,KAAM,SACrBuM,OAAQ,UAAW,WAAYE,QAAS,YACxCxM,IAAK,SAAUD,KAAM,SACrBuM,OAAQ,UAAW,WAAYE,QAAS,YACxCxM,IAAK,cAAeD,KAAM,cAC1BuM,OAAQ,UAAW,UAAW,WAAYE,QAAS,YACnDxM,IAAK,WAAYD,KAAM,WACvBuM,OAAQ,UAAW,UAAW,WAAYE,QAAS,YAoDrBJ,gBAAAA,EAC/Ba,cAnCF,SAAuBC,GACrB,IAAIC,EAAKrB,EAAMsB,KAAKvN,GAAKA,EAAEG,KAAOkN,EAAKJ,OAAOf,KAC1CgB,EAASG,EAAKH,OAClB,GAAyB,GAArBG,EAAKZ,MAAM7H,OAAa,CAC1B,MAAM4I,GAAO1M,WAAWuM,EAAKH,OAAO,IAAMpM,WAAWuM,EAAKH,OAAO,KAAO,EACxEA,GAAUG,EAAKH,OAAO,GAAIM,EAAKH,EAAKH,OAAO,IAS7C,MAPmB,YAAfG,EAAKJ,QACPK,EAAKA,EAAGJ,OAAOA,IAEjBI,EAAKA,EAAGb,MAAMY,EAAKZ,QACd,SAAU,OAAOjM,SAAS6M,EAAKJ,SAClCK,EAAKA,EAAGG,OAAM,IAETC,IACL,GAAU,KAANA,GAAAA,MAAmBA,EACrB,OAAOL,EAAKV,QAEd,GAAmB,YAAfU,EAAKJ,OAAuBnM,WAAW4M,IAAMA,EAC/C,OAAOL,EAAKV,QAEd,GAAmB,QAAfU,EAAKJ,OAAmBS,GAAK,EAC/B,OAAOL,EAAKV,QAEd,MAAMlF,EAAS6F,EAAGI,GAClB,YAAeC,IAAXlG,EACK4F,EAAKV,QAEPlF,YCsETmG,UAjJF,SAAmBC,EAAWpH,EAAIqH,EAAO9K,GACvC6K,EACKE,QAAQ,cAAc,GACtBA,QAAQ,QAAQ,GAClBC,OAAO,UACLD,QAAQ,OAAO,GACfA,eAAe/K,KAAQ,GACvB+K,QAAQ,UAAU,GAClBV,KAAK,KAAM5G,GACXf,KAAKoI,IAwICG,WApIb,SAAoBJ,EAAWC,EAAO9K,EAAMyD,GAC1CoH,EACKE,QAAQ,OAAO,GACfA,eAAe/K,KAAQ,GACvB+K,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChBV,KAAK,KAAM5G,GACXf,KAAKoI,IA6HaI,eAzHzB,SAAwBL,EAAWC,EAAO9K,EAAMmL,EAAM1H,GACpDoH,EACKE,QAAQ,OAAO,GACfA,eAAe/K,KAAQ,GACvB+K,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChBV,KAAK,OAAQ,UACbA,KAAK,OAAQ,KACbA,KAAK,KAAM5G,GAChBoH,EAAUG,OAAO,OACZX,KAAK,MAAOc,mBAAwBA,QAAa,MACjDC,MAAM,QAAS,WACfA,MAAM,SAAU,WACrBP,EAAUG,OAAO,QACZI,MAAM,iBAAkB,UACxB1I,KAAKoI,IA0G6BO,cAtGzC,SAAuBR,EAAW3M,EAAQ4M,EAAO9K,EAAMmL,EAAM1H,GAC3DoH,EACKE,QAAQ,OAAO,GACfA,eAAe/K,KAAQ,GACvB+K,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChBV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,KACbA,KAAK,OAAQ,UACbA,KAAK,cAAe,SACpBA,KAAK,kBAAmBnM,KAC7B2M,EAAUG,OAAO,OACZX,KAAK,MAAOc,mBAAwBA,QAAa,MACjDC,MAAM,QAAS,WACfA,MAAM,SAAU,WACrBP,EAAUG,OAAO,QACZD,QAAQ,SAAS,GACjBK,MAAM,iBAAkB,UACxB1I,KAAKoI,IAqFVQ,mBAjFF,SAA4BT,EAAWC,EAAO9K,EAAMmL,EAAM1H,GACxDoH,EACKE,QAAQ,aAAa,GACrBA,QAAQ,QAAQ,GAChBV,KAAK,KAAM5G,GAChB,MAAM8H,EAASV,EAAUG,OAAO,UAC3BD,QAAQ,OAAO,GACfA,eAAe/K,KAAQ,GACvB+K,QAAQ,UAAU,GAClBA,QAAQ,mBAAmB,GAC3BV,KAAK,cAAe,YACzBkB,EAAOP,OAAO,OACTX,KAAK,MAAOc,mBAAwBA,QAAa,MACjDC,MAAM,QAAS,WACfA,MAAM,SAAU,WACrBG,EAAOP,OAAO,QACTI,MAAM,iBAAkB,UACxB1I,KAAKoI,GACVD,EAAUG,OAAO,OACZD,QAAQ,iBAAiB,IA8DVS,iBA1DtB,SAA0BX,EAAWC,EAAOK,EAAM1H,GAChDoH,EAAUE,QAAQ,iBAAiB,GAC9BV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,KAClBQ,EAAUG,OAAO,OACZX,KAAK,MAAOc,mBAAwBA,QAAa,MACjDJ,QAAQ,QAAQ,GAChBK,MAAM,QAAS,QACfA,MAAM,SAAU,QACrBP,EAAUG,OAAO,QACZtI,KAAKoI,IAgD4BW,kBA7CxC,SAA2BZ,EAAWC,EAAO5M,EAAQiN,EAAM1H,GACzDoH,EAAUE,QAAQ,iBAAiB,GAC9BV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,KACbA,KAAK,cAAe,SACpBA,KAAK,kBAAmBnM,KAC7B2M,EAAUG,OAAO,OACZX,KAAK,uBAAwBc,SAC7BJ,QAAQ,QAAQ,GAChBK,MAAM,QAAS,QACfA,MAAM,SAAU,QACrBP,EAAUG,OAAO,QACZtI,KAAKoI,IAkCVY,iBA9BF,SAA0Bb,EAAWC,EAAOa,EAAQR,EAAM1H,GACxDoH,EAAUE,QAAQ,iBAAiB,GAC9BV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,KACbuB,GAAG,QAAS,WACX7N,EAAG8N,OAAOC,MAAMD,OAAO,SAASE,OAAOC,UAE7CnB,EAAUG,OAAO,QACZI,MAAM,UAAW,QACnBJ,OAAO,SACLX,KAAK,OAAQ,QACbA,KAAK,SAAUsB,GACpBd,EAAUG,OAAO,OACZX,KAAK,uBAAwBc,SAC7BJ,QAAQ,QAAQ,GAChBK,MAAM,QAAS,QACfA,MAAM,SAAU,QACrBP,EAAUG,OAAO,QACZtI,KAAKoI,IAYQmB,sBARpB,SAA+BpB,GAC7B,OAAOA,EAAUgB,OAAO,SAASE,OAAOG,MAAM,KC5IhD,SAASC,EAAWtB,EAAWpH,GAC7BoH,EACKE,QAAQ,SAAS,GACjBV,KAAK,YAAa,GAClBA,KAAK,OAAQ,UACbA,KAAK,kBAAmB,IACxBA,KAAK,eAAe,GACpBA,KAAK,KAAM5G,GAChBoH,EAAUgB,OAAO,iBAAiBO,SAClCvB,EAAUG,OAAO,OACZD,QAAQ,gBAAgB,GACxBV,KAAK,OAAQ,YACfW,OAAO,OACLD,QAAQ,iBAAiB,UA6E9BsB,cAzEF,SAAuBxB,EAAWpH,EAAI6I,GACpC,MAAMC,EAAO1B,EAAU2B,KAAKL,EAAY1I,GACnCoI,OAAO,kBAEZU,EAAKvB,OAAO,OACPD,QAAQ,cAAc,GACxBC,OAAO,OACLD,QAAQ,WAAW,GACnBrI,KAAK4J,GAEV,MAAMG,EAASF,EAAKvB,OAAO,OACtBD,QAAQ,gBAAgB,GAC7B0B,EAAOzB,OAAO,UACTD,QAAQ,OAAO,GACfA,QAAQ,yBAAyB,GACjCA,QAAQ,UAAU,GAClBV,KAAK,OAAQ,UACbA,KAAK,eAAgB,SACrB3H,KAAK,UACV+J,EAAOzB,OAAO,UACTD,QAAQ,OAAO,GACfA,QAAQ,eAAe,GACvBA,QAAQ,MAAM,GACdV,KAAK,OAAQ,UACbA,KAAK,eAAgB,SACrBA,KAAK,iBAAkB5G,YACvBf,KAAK,MACLkJ,GAAG,QAAS,KACX7N,EAAG8N,OAAO,iBAAiBT,MAAM,UAAW,UAC5CP,EAAU6B,SAAS,aA4CVC,aAvCjB,SAAsB9B,EAAWpH,EAAImJ,GACnC,MAAML,EAAO1B,EAAU2B,KAAKL,EAAY1I,GACnCoI,OAAO,kBAENzD,EAASmE,EAAKvB,OAAO,OACtBD,QAAQ,gBAAgB,GAC7B3C,EAAO4C,OAAO,MACTD,QAAQ,eAAe,GACvBrI,KAAKkK,GACVxE,EAAO4C,OAAO,UACTX,KAAK,OAAQ,UACbA,KAAK,eAAgB,SACrBA,KAAK,aAAc,SACnBU,QAAQ,SAAS,GACnBC,OAAO,QACLX,KAAK,eAAe,GACpBwC,KAAK,WAEVN,EAAKvB,OAAO,OACPD,QAAQ,cAAc,GAE3BwB,EAAKvB,OAAO,OACPD,QAAQ,gBAAgB,GAC1BC,OAAO,UACLD,QAAQ,OAAO,GACfA,QAAQ,eAAe,GACvBA,QAAQ,UAAU,GAClBV,KAAK,OAAQ,UACbA,KAAK,eAAgB,SACrBA,KAAK,iBAAkB5G,YACvBf,KAAK,UACLkJ,GAAG,QAAS,KACX7N,EAAG8N,OAAO,iBAAiBT,MAAM,UAAW,UAC5CP,EAAU6B,SAAS,cCjE3B,SAASI,EAAcjC,EAAWnN,GAChCmN,EAAUgB,OAAO,SAASkB,SAAS,QAASrP,GAkD9C,SAASsP,EAAkBnC,EAAWnN,GACpCmN,EAAUgB,OAAO,YAAYkB,SAAS,QAASrP,GAqCjD,SAASuP,EAAepC,EAAWqC,GACjCrC,EAAUgB,OAAO,SAASkB,SAAS,UAAWG,GA+BhD,SAASC,EAAgBtC,EAAWnN,GAClCmN,EAAUgB,OAAO,SAASkB,SAAS,QAASrP,UAkC5C0P,QAjLF,SAAiBvC,EAAWpH,EAAIqH,EAAOtB,EAAM9L,GAC3CmN,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GACnCF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,SACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,QACbA,KAAK,OAAQb,GAClBqB,EAAU2B,KAAKM,EAAepP,IA+JrBoP,cAAAA,EAAeO,aAxJ1B,SAAsBxC,GACpB,OAAOA,EAAUgB,OAAO,SAASkB,SAAS,UAuJJO,YAnJxC,SAAqBzC,EAAWpH,EAAIqH,EAAOpN,GACzCmN,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GACnCF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,SACZD,QAAQ,0BAA0B,GAClCA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,QACb0C,SAAS,YAAY,GAC1BlC,EAAU2B,KAAKM,EAAepP,IAkI9B6P,YA9HF,SAAqB1C,EAAWpH,EAAIqH,EAAO0C,EAAMC,EAAa/P,GAC5DmN,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACzBF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,YACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,OAAQmD,GACbnD,KAAK,cAAeoD,GACpBpD,KAAK,KAAM5G,GAChBoH,EAAU2B,KAAKQ,EAAmBtP,IA6GrBsP,kBAAAA,EAAmBU,iBAtGlC,SAA0B7C,GACxB,MAAMnN,EAAQmN,EAAUgB,OAAO,YAAYkB,SAAS,SACpD,GAAIrP,EAAO,OAAOA,EAClB,MAAM+P,EAAc5C,EAAUgB,OAAO,YAAYxB,KAAK,eACtD,OAAIoD,GACG,IAiG2CE,iBA9FpD,SAA0B9C,GACxB,MAAMnN,EAAQmN,EAAUgB,OAAO,YAAYkB,SAAS,SACpD,GAAIrP,EAAO,OAAOA,EAAMkB,MAAM,MAAMmJ,OAAO/K,GAAKA,EAAE4E,OAAS,GAC3D,MAAM6L,EAAc5C,EAAUgB,OAAO,YAAYxB,KAAK,eACtD,OAAIoD,EAAoBA,EAAY7O,MAAM,MAAMmJ,OAAO/K,GAAKA,EAAE4E,OAAS,OA2FvEgM,SAtFF,SAAkB/C,EAAWpH,EAAIqH,EAAOoC,GACtC,MAAMW,EAAMhD,EACPE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,cAAc,GACxBC,OAAO,SACLD,QAAQ,oBAAoB,GAC5BA,QAAQ,qBAAqB,GAClC8C,EAAI7C,OAAO,SACND,QAAQ,oBAAoB,GAC5BV,KAAK,OAAQ,YACbA,KAAK,KAAM5G,GAChBoK,EAAI7C,OAAO,QACNtI,KAAKoI,GACVD,EAAU2B,KAAKS,EAAgBC,IAwErBD,eAAAA,EAAgBa,cAjE5B,SAAuBjD,GACrB,OAAOA,EAAUgB,OAAO,SAASkB,SAAS,YAiE1CgB,UA7DF,SAAmBlD,EAAWpH,EAAIqH,EAAOkD,EAAKC,EAAKC,EAAMxQ,GACvDmN,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GACnCF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,SACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,UACbA,KAAK,MAAO2D,GACZ3D,KAAK,MAAO4D,GACZ5D,KAAK,OAAQ6D,GAClBrD,EAAU2B,KAAKW,EAAiBzP,IAyCrByP,gBAAAA,EAAiBgB,eAlC9B,SAAwBtD,GACtB,OAAOA,EAAUgB,OAAO,SAASkB,SAAS,UAkC1CqB,aA9BF,SAAsBvD,EAAWpH,EAAIqH,EAAOa,GAC5Cd,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACzBF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,SACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,OAAQ,QACbA,KAAK,SAAUsB,GACftB,KAAK,KAAM5G,IAaA4K,kBAVhB,SAA2BxD,GACzB,OAAOA,EAAUgB,OAAO,SAASkB,SAAS,SAAS,KCvKrD,MAAMtJ,EAAK,mBACLmJ,EAAQ,4BA8BZ0B,SA3BF,SAAkBzD,GAChBA,EAAU2B,KAAKjB,EAAOE,kBAAmBmB,EAAOnJ,EAAI,aA0B1CV,KAtBZ,SAAc8H,GACZ,MAAM0D,EAAS1D,EAAU2B,KAAKgC,EAAM7B,aAAclJ,EAAImJ,GAEtD2B,EAAO1C,OAAO,eAAeb,OAAO,OAC/BD,QAAQ,QAAQ,GAChByB,KAAKqB,EAAIT,QAAS,YAAa,WAAY,GAAI,SAEpDmB,EAAO1C,OAAO,eAAeb,OAAO,OAC/BD,QAAQ,WAAW,GACnByB,KAAKqB,EAAID,SAAU,eAAgB,iCAAiC,IAazDlQ,MATlB,SAAemN,GACb,OACE3N,KAAM2Q,EAAIR,aAAaxC,EAAUgB,OAAO,UACxC4C,QAASZ,EAAIC,cAAcjD,EAAUgB,OAAO,gBCzBhD,MAAMpI,EAAK,gBACLmJ,EAAQ,yBAGd,SAAkB/B,GAChBA,EAAU2B,KAAKjB,EAAOE,kBAAmBmB,EAAOnJ,EAAI,kBAItD,SAAcoH,EAAW3N,GACvB2N,EAAU2B,KAAKgC,EAAM7B,aAAclJ,EAAImJ,GACpCf,OAAO,eAAeb,OAAO,OAC3BD,QAAQ,UAAU,GAClByB,KAAKqB,EAAIT,QAAS,SAAU,WAAY,GAAIlQ,IAgBjCwR,WAZlB,SAAoB7D,EAAW8D,GAC7B9D,EAAUgB,OAAO,WACZW,KAAKqB,EAAIf,cAAe6B,EAAM7N,KAAK5D,aAI1C,SAAe2N,GACb,OAAOgD,EAAIR,aAAaxC,EAAUgB,OAAO,cC1B3C,MAAM+C,GACJC,OAAQ,QACRC,cAAe,UACfC,SAAU,UACVC,QAAS,UACTC,UAAW,OACXC,QAAS,WAGLC,GACJC,UAAW,QACXC,WAAY,SAGd,SAASC,EAAiB9M,GACxB,MAAM1F,EAAS0F,EAAK+M,QAAQxS,IAAIC,IACf,YAAXA,EAAEwS,KACJxS,EAAEK,OAAS,UACS,SAAXL,EAAEwS,KACXxS,EAAEK,OAAS,OACS,SAAXL,EAAEwS,OACXxS,EAAEK,OAAS,OAENL,IAET,OACEyG,GAAIjB,EAAKiB,GACTvG,KAAMsF,EAAKtF,KACXuS,SAAUN,EAAa3M,EAAKnF,QAC5BqS,cAAe,GACfC,SAAU,EACVzN,OAAQ0M,EAAWpM,EAAKN,QACxBpF,OAAQA,EACRiH,QAASvB,EAAKuB,QACd9F,MAAOuE,EAAKvE,MACZ2R,UAAWpN,EAAKqN,YAChBC,UAAWtN,EAAKuN,gBAAkBvN,EAAKqN,YACvCG,YAAaxN,EAAKyN,YAClBpM,SAA0B,IAAhBrB,EAAKqB,SACfC,SAAUtB,EAAKsB,SACfmD,QAASzE,EAAK0N,UAAY1N,EAAK2N,cAqInC,SAASC,EAAU5N,GACjB,OACEiB,GAAIjB,EAAKiB,GACTvG,KAAMsF,EAAKtF,KACXuS,SAAUjN,EAAKiN,SACfC,cAAe,OACfC,SAAUnN,EAAKmN,SACfzN,OAAQM,EAAKN,OACbpF,OAAQ0F,EAAK1F,OACbiH,QAASvB,EAAKuB,QACd9F,MAAOuE,EAAKvE,MACZ4F,SAAUrB,EAAKqB,SACfC,SAAUtB,EAAKsB,SACfmD,QAASzE,EAAKyE,QACdvD,qBAwHF2M,aAhDF,SAAsB7N,GACpB,IAAI1B,EAAO0B,EAoBX,OAnBM1B,EAAK7D,eAAe,kBAAoB6D,EAAK7D,eAAe,aAChE6D,EAAOwO,EAAiBxO,IAEA,OAAtBA,EAAK4O,gBAEP5O,EAAOsP,EADPtP,EAzIJ,SAAmB0B,GAcjB,OAbAA,EAAKuB,QAAQgD,QAAQ,CAAC/J,EAAG0K,KACvB1K,EAAEsT,MAAQ5I,EACV1K,EAAEuT,UAAYvT,EAAEwT,kBACTxT,EAAEyT,cACFzT,EAAEwT,aAEXhO,EAAK1F,OAAOiK,QAAQ/J,IACJ,WAAVA,EAAEG,MAAkBH,EAAEG,IAAM,SAClB,eAAVH,EAAEG,MAAsBH,EAAEG,IAAM,aACrB,YAAXH,EAAEwS,OAAoBxS,EAAEK,OAAS,WACtB,SAAXL,EAAEwS,OAAiBxS,EAAEK,OAAS,QACnB,SAAXL,EAAEwS,OAAiBxS,EAAEK,OAAS,SAE7BmF,EA2HEkO,CAAU5P,KAGdA,EAAK7D,eAAe,oBAChB6D,EAAK4O,qBACL5O,EAAK6O,SACZ7O,EAAK6P,QAAU,0EAEjB7P,EAAKhE,OAAOiK,QAAQ/J,IACJ,cAAVA,EAAEG,MACJH,EAAEK,OAAS,cAENL,EAAE4T,aACF5T,EAAE6T,SAEJ/P,GA2BOgQ,eAxBhB,SAAwBtO,GACtB,IAAI1B,EAAO0B,EAkBX,OAjBM1B,EAAKiQ,MAAM9T,eAAe,kBAAoB6D,EAAKiQ,MAAM9T,eAAe,aAC5E6D,EAAKkQ,MAAQ1B,EAAiBxO,EAAKkQ,OACnClQ,EAAKiQ,MAnPT,SAA0BvO,EAAMyO,GAC9B,MAAMC,GACJC,eAAgB3O,EAAK4O,SAASD,eAC9BE,cAAe7O,EAAK4O,SAASC,cAC7BC,aACAC,YACAC,aACAC,SAgDF,OA9CIjP,EAAK4O,SAASnU,eAAe,cAC/BiU,EAAII,UAAU7N,GAAKjB,EAAK4O,SAASE,UAAU7N,GAC3CyN,EAAII,UAAUrH,MAAQzH,EAAK4O,SAASE,UAAUrH,MAC9CiH,EAAII,UAAUpK,MAAQ+J,EAAW1G,KAAKvN,GAAKA,EAAEG,MAAQqF,EAAK4O,SAASE,UAAUI,SAE7ER,EAAII,WACF7N,GAAI,QAASyD,MAAO+J,EAAW,GAC/BhH,OAAQA,MAAO,SAAUC,QAAS,EAAG,GAAIT,OAAQ,QAAS,SAAUE,QAAS,SAG7EnH,EAAK4O,SAASnU,eAAe,aAC/BiU,EAAIK,SAAS9N,GAAKjB,EAAK4O,SAASG,SAAS9N,GACzCyN,EAAIK,SAAStH,MAAQzH,EAAK4O,SAASG,SAAStH,MAC5CiH,EAAIK,SAASrK,MAAQ+J,EAAW1G,KAAKvN,GAAKA,EAAEG,MAAQqF,EAAK4O,SAASG,SAASG,SAE3ER,EAAIK,UACF9N,GAAI,OAAQyD,MAAO+J,EAAW,GAC9BhH,OAAQA,MAAO,SAAUC,QAAS,EAAG,GAAIT,OAAQ,GAAI,IAAKE,QAAS,KAGnEnH,EAAK4O,SAASnU,eAAe,cAC/BiU,EAAIM,UAAU/N,GAAKjB,EAAK4O,SAASI,UAAU/N,GAC3CyN,EAAIM,UAAUhI,KAAOhH,EAAK4O,SAASI,UAAUhI,KAC7C0H,EAAIM,UAAU9O,KAAOF,EAAK4O,SAASI,UAAU9O,KAC7CwO,EAAIM,UAAUpU,QAAUoF,EAAK4O,SAASI,UAAUpU,QAChD8T,EAAIM,UAAUvH,MAAQzH,EAAK4O,SAASI,UAAUvH,MAC9CiH,EAAIM,UAAUtK,MAAQ+J,EAAW1G,KAAKvN,GAAKA,EAAEG,MAAQqF,EAAK4O,SAASI,UAAUE,SAE7ER,EAAIM,WACF/N,GAAI,QAAS+F,KAAM,GAAI9G,KAAM,QAAStF,SAAS,EAAO8J,MAAO+J,EAAW,GACxEhH,OAAQA,MAAO,SAAUC,QAAS,EAAG,GAAIT,OAAQ,QAAS,SAAUE,QAAS,SAG7EnH,EAAK4O,SAASnU,eAAe,eAC/BiU,EAAIS,YAAcnP,EAAK4O,SAASO,YAEhCT,EAAIS,aAAepB,WAAYnT,SAAS,IAEtCoF,EAAK4O,SAASnU,eAAe,QAC/BiU,EAAIO,KAAOjP,EAAK4O,SAASK,KAEzBP,EAAIO,MACFhO,GAAI,QAASqH,OAAQtB,KAAM,GAAIpM,SAAS,GAAQA,SAAS,EACzD6M,OAAQA,MAAO,SAAUC,QAAS,EAAG,GAAIT,OAAQ,EAAG,GAAIE,QAAS,KAInElG,GAAIjB,EAAKiB,GACTvG,KAAMsF,EAAKtF,KACXuS,SAAUN,EAAa3M,EAAKnF,QAC5BqS,cAAe,GACfC,SAAU,EACVjM,WACEsN,MAAOxO,EAAKoP,aAEd1P,OAAQ0M,EAAWpM,EAAKN,QACxBpF,OAAQiE,EAAKlE,yBACVM,IAAO,WACPA,IAAO,WACPA,IAAO,YAEV4G,QAASvB,EAAKuB,QACd9F,MAAOuE,EAAKvE,MACZ4T,iBAAkBrP,EAAKqP,iBACvBjC,UAAWpN,EAAKqN,YAChBC,UAAWtN,EAAKuN,gBAAkBvN,EAAKqN,YACvCG,YAAaxN,EAAKyN,YAClBpM,SAA0B,IAAhBrB,EAAKqB,SACfC,SAAUtB,EAAKsB,SACfmD,QAASzE,EAAK0N,UAAY1N,EAAK2N,aAC/BiB,SAAUF,GAoKGY,CAAiBhR,EAAKiQ,MAAOjQ,EAAKkQ,MAAMlU,SAEvB,OAA5BgE,EAAKiQ,MAAMrB,eAAuD,KAA7B5O,EAAKiQ,MAAMrB,iBAClD5O,EAjJJ,SAAmB0B,GAIjB,GAHKA,EAAKuO,MAAM9T,eAAe,eAC7BuF,EAAKuO,MAAMrN,WAAasN,MAAOxO,EAAKuO,MAAMgB,UAExCvP,EAAKwO,MAAMlU,OAAOyN,KAAKvN,GAAe,WAAVA,EAAEG,KAAmB,CACnD,MAAM6U,KACNxP,EAAKwO,MAAMjN,QAAQgD,QAAQ,CAAC/J,EAAG0K,KAC3B1K,EAAEsT,MAAQ5I,EACV1K,EAAEuT,UAAYvT,EAAEwT,WAChBwB,EAAchV,EAAEyT,QAAUzT,EAAEsT,aACrBtT,EAAEyT,cACFzT,EAAEwT,aAEbhO,EAAKuO,MAAMhN,QAAQgD,QAAQ/J,IACvBA,EAAEiV,OAASD,EAAchV,EAAEiV,QAC3BjV,EAAEkB,OAAS8T,EAAchV,EAAEkB,UAE/BsE,EAAKwO,MAAMlU,OAAOiK,QAAQ/J,IACV,WAAVA,EAAEG,MAAkBH,EAAEG,IAAM,SAClB,eAAVH,EAAEG,MAAsBH,EAAEG,IAAM,aACrB,YAAXH,EAAEwS,OAAoBxS,EAAEK,OAAS,WACtB,SAAXL,EAAEwS,OAAiBxS,EAAEK,OAAS,QACnB,SAAXL,EAAEwS,OAAiBxS,EAAEK,OAAS,SAGtC,OAAOmF,EAwHE0P,CAAUpR,IACZkQ,MAAQZ,EAAUtP,EAAKkQ,OAC5BlQ,EAAKiQ,MApGT,SAAmBvO,GACjB,MAAM4O,GACJS,iBAAkBrP,EAAKqP,kBA+CzB,OA7CAT,EAASe,mBAAqB3P,EAAK4O,SAASO,YAAYpB,UAAUnT,QAClEgU,EAASE,UAAY9O,EAAK4O,SAASE,UAAUrH,UACzCmH,EAASE,UAAUpK,QACrBkK,EAASE,UAAUpK,MAAQ1E,EAAK4O,SAASE,UAAUpK,MAAM/J,IACxB,WAA7BiU,EAASE,UAAUpK,QACrBkK,EAASE,UAAUpK,MAAQ,UAGE,YAA7BkK,EAASE,UAAUrH,QACrBmH,EAASE,UAAU7H,MAAQ1L,EAAGqU,kBAEhChB,EAASG,SAAW/O,EAAK4O,SAASG,SAAStH,UACvCzH,EAAK4O,SAASG,SAASrK,QACzBkK,EAASG,SAASrK,MAAQ1E,EAAK4O,SAASG,SAASrK,MAAM/J,IACvB,WAA5BiU,EAASG,SAASrK,QACpBkK,EAASG,SAASrK,MAAQ,UAG9BkK,EAASI,aACLhP,EAAK4O,SAASI,UAAU9O,OAC1B0O,EAASI,UAAU9O,KAAOF,EAAK4O,SAASI,UAAU9O,KAAKvF,IACvB,WAA5BiU,EAASI,UAAU9O,OACrB0O,EAASI,UAAU9O,KAAO,UAG9B0O,EAASI,UAAUhI,KAAOhH,EAAK4O,SAASI,UAAUhI,KAClD4H,EAASI,UAAUpU,QAAUoF,EAAK4O,SAASI,UAAUpU,QACrDgU,EAASiB,eAAiB7P,EAAK4O,SAASI,UAAUvH,UAC9CzH,EAAK4O,SAASI,UAAUtK,QAC1BkK,EAASiB,eAAenL,MAAQ1E,EAAK4O,SAASI,UAAUtK,MAAM/J,IACxB,WAAlCiU,EAASiB,eAAenL,QAC1BkK,EAASiB,eAAenL,MAAQ,UAGE,YAAlCkK,EAASiB,eAAepI,QAC1BmH,EAASiB,eAAe5I,MAAQ1L,EAAGqU,kBAErChB,EAASkB,YAAc9P,EAAK4O,SAASK,KAAKrU,QAC1CgU,EAASmB,UAAY/P,EAAK4O,SAASK,KAAKxH,UACxCmH,EAASoB,aACTpB,EAASoB,UAAUhJ,KAAOhH,EAAK4O,SAASK,KAAK3G,MAAMtB,KACnD4H,EAASoB,UAAUpV,QAAUoF,EAAK4O,SAASK,KAAK3G,MAAM1N,QACtDgU,EAASS,iBAAmBrP,EAAKqP,kBAAoBrP,EAAKvE,MAAMwU,UAChErB,EAASsB,OAASlQ,EAAK4O,SAASC,eAG9B5N,GAAIjB,EAAKiB,GACTvG,KAAMsF,EAAKtF,KACXuS,SAAUjN,EAAKiN,SACfC,cAAe,OACfC,SAAUnN,EAAKmN,SACfzN,OAAQM,EAAKN,OACbpF,OAAQ0F,EAAK1F,OACbiH,QAASvB,EAAKuB,QACd9F,OAAQ0U,OAAQnQ,EAAKvE,OACrB4F,SAAUrB,EAAKqB,SACfC,SAAUtB,EAAKsB,SACfmD,QAASzE,EAAKyE,QACdmK,SAAUA,EACV1N,UAAWlB,EAAKkB,WAqCHkP,CAAU9R,EAAKiQ,QAEzBjQ,EAAKiQ,MAAM9T,eAAe,oBACtB6D,EAAKkQ,MAAMtB,qBACX5O,EAAKiQ,MAAMrB,qBACX5O,EAAKkQ,MAAMrB,gBACX7O,EAAKiQ,MAAMpB,SAClB7O,EAAKkQ,MAAML,QAAU,yEACrB7P,EAAKiQ,MAAMJ,QAAU,0EAEhB7P,UC5SY+R,EACnBC,YAAYhS,EAAM8P,EAAOC,GAMvB/E,KAAKiH,qBAAuB,IAC5BjH,KAAKkH,mBAAoB,EACzBlH,KAAKmH,aAAc,EAGnBnH,KAAKoH,sBAAwB,IAC7BpH,KAAKqH,oBAAqB,EAC1BrH,KAAKsH,cAAe,EAGpBtH,KAAKhL,KAAOuS,EAAOvC,eAAehQ,GAElCgL,KAAKkF,MAAQnP,KAAKqD,MAAMrD,KAAKC,UAAUgK,KAAKhL,KAAKkQ,MAAMjN,UACvD+H,KAAKiF,MAAQlP,KAAKqD,MAAMrD,KAAKC,UAAUgK,KAAKhL,KAAKiQ,MAAMhN,UAKvD+H,KAAKkF,MAAMjK,QAAQuM,IACjBA,EAAEC,eAEJzH,KAAKiF,MAAMhK,QAAQ,CAAC/J,EAAG0K,KACrB1K,EAAEwW,IAAM9L,EACRoE,KAAKkF,MAAMhU,EAAEiV,QAAQsB,UAAU9K,MAAMzL,EAAEkB,OAAQwJ,IAC/CoE,KAAKkF,MAAMhU,EAAEkB,QAAQqV,UAAU9K,MAAMzL,EAAEiV,OAAQvK,MAIjD,MAAMwJ,EAAMpF,KAAKhL,KAAKiQ,MAAMK,WAC1BE,aAAeC,YAAcC,aAAea,kBAC5CE,aAAeC,cAOjB1G,KAAKwF,aACLxF,KAAKwF,UAAUpK,MAAQgK,EAAII,UAAUpK,OAAS,KAC9C4E,KAAKwF,UAAUrH,MAAQiH,EAAII,UAAUrH,OAAS,SAC9C6B,KAAKwF,UAAUpH,OAASgH,EAAII,UAAUpH,SAAW,EAAG,GACpD4B,KAAKwF,UAAU7H,MAAQyH,EAAII,UAAU7H,QAAU,UAAW,WAC1DqC,KAAKwF,UAAU3H,QAAUuH,EAAII,UAAU3H,UAAY,WAGnDmC,KAAKyF,YACLzF,KAAKyF,SAASrK,MAAQgK,EAAIK,SAASrK,OAAS,KAC5C4E,KAAKyF,SAAStH,MAAQiH,EAAIK,SAAStH,OAAS,SAC5C6B,KAAKyF,SAASrH,OAASgH,EAAIK,SAASrH,SAAW,EAAG,GAClD4B,KAAKyF,SAAS9H,MAAQyH,EAAIK,SAAS9H,QAAU,GAAI,IACjDqC,KAAKyF,SAAS5H,QAAUuH,EAAIK,SAAS5H,SAAW,GAGhDmC,KAAK0F,aACL1F,KAAK0F,UAAU9O,KAAOwO,EAAIM,UAAU9O,MAAQ,KAC5CoJ,KAAK0F,UAAUhI,KAAO0H,EAAIM,UAAUhI,MAAQ,GAC5CsC,KAAK0F,UAAUpU,QAAU8T,EAAIM,UAAUpU,UAAW,EAGlD0O,KAAKuG,kBACLvG,KAAKuG,eAAenL,MAAQgK,EAAImB,eAAenL,OAAS,KACxD4E,KAAKuG,eAAepI,MAAQiH,EAAImB,eAAepI,OAAS,SACxD6B,KAAKuG,eAAenI,OAASgH,EAAImB,eAAenI,SAAW,EAAG,GAC9D4B,KAAKuG,eAAe5I,MAAQyH,EAAImB,eAAe5I,QAAU,UAAW,WACpEqC,KAAKuG,eAAe1I,QAAUuH,EAAImB,eAAe1I,UAAY,WAI7DmC,KAAK2H,uBAAyB3S,EAAKiQ,MAAM9S,MAAM0U,OAAOF,UACtD3G,KAAK+F,iBAAmBX,EAAIW,kBAAoB/Q,EAAKiQ,MAAM9S,MAAM0U,OAAOF,UAGxE3G,KAAKyG,aACLzG,KAAKyG,UAAUtI,MAAQiH,EAAIqB,UAAUtI,OAAS,SAC9C6B,KAAKyG,UAAUrI,OAASgH,EAAIqB,UAAUrI,SAAW,GAAK,GACtD4B,KAAKyG,UAAU9I,MAAQyH,EAAIqB,UAAU9I,QAAU,EAAG,GAClDqC,KAAKyG,UAAU5I,QAAUuH,EAAIqB,UAAU5I,SAAW,EAGlDmC,KAAK0G,aACL1G,KAAK0G,UAAUhJ,KAAO0H,EAAIsB,UAAUhJ,MAAQ,GAC5CsC,KAAK0G,UAAUpV,QAAU8T,EAAIsB,UAAUpV,UAAW,EAGlD0O,KAAK4H,UAAYxC,EAAIC,iBAAmBwC,EAAG,EAAGC,EAAG,EAAGhL,EAAG,GAGvDkD,KAAK+H,aAAe,KACpB/H,KAAKgI,aAAe,KAGpBhI,KAAKiI,wBAA0B,KAC/BjI,KAAKkI,mBAAqB,KAC1BlI,KAAKmI,mBAAqB,KAC1BnI,KAAKoI,uBAAyB,KAC9BpI,KAAKqI,uBAAyB,KAE9BrI,KAAKsI,iBAAmB,KAExBtI,KAAKuI,YAAc,KAEnBvI,KAAKwI,iBAAmB,KACxBxI,KAAKyI,cAAgB,KACrBzI,KAAK0I,cAAgB,KACrB1I,KAAK2I,gBAAkB,KACvB3I,KAAK4I,aAAe,SAGpB5I,KAAK6I,YAAcC,IAAK,EAAGC,MAAOjE,EAAOkE,OAAQjE,EAAQkE,KAAM,GAC/DjJ,KAAKkJ,SAAWJ,IAAK,EAAGC,MAAOjE,EAAOkE,OAAQjE,EAAQkE,KAAM,GAC5DjJ,KAAKmJ,aACLnJ,KAAKoJ,YACLpJ,KAAKqJ,eACHxB,EAAG7H,KAAK4H,UAAUC,EAAGC,EAAG9H,KAAK4H,UAAUE,EAAGhL,EAAGkD,KAAK4H,UAAU9K,GAG1DsI,EAAIwB,QACN5G,KAAKsJ,kBAAmB,EAExBtJ,KAAKuJ,aAAanE,EAAIwB,QACtB5G,KAAKwJ,eACLxJ,KAAKyJ,eAELzJ,KAAKsJ,kBAAmB,EAI5BtC,cACE,MAAM0C,EAAK1J,KAAKkF,MAAMjU,IAAIC,GAAKA,EAAE2W,GAC3B8B,EAAK3J,KAAKkF,MAAMjU,IAAIC,GAAKA,EAAE4W,GACjC9H,KAAKoJ,SAASN,IAAMzV,KAAK6O,IAAIlF,MAAM,KAAM2M,GACzC3J,KAAKoJ,SAASH,KAAO5V,KAAK6O,IAAIlF,MAAM,KAAM0M,GAC1C1J,KAAKoJ,SAASJ,OAAS3V,KAAK8O,IAAInF,MAAM,KAAM2M,GAC5C3J,KAAKoJ,SAASL,MAAQ1V,KAAK8O,IAAInF,MAAM,KAAM0M,GAI7C1C,eACE,MAAM4C,EAAK5J,KAAK4H,UAAUC,EACpBgC,EAAK7J,KAAK4H,UAAUE,EACpBgC,EAAK9J,KAAK4H,UAAU9K,EAE1BkD,KAAKmJ,UAAUL,KAAO9I,KAAKkJ,QAAQJ,IAAMe,GAAMC,EADhC,GAEf9J,KAAKmJ,UAAUF,MAAQjJ,KAAKkJ,QAAQD,KAAOW,GAAME,EAFlC,GAGf9J,KAAKmJ,UAAUH,QAAUhJ,KAAKkJ,QAAQF,OAASa,GAAMC,EAHtC,GAIf9J,KAAKmJ,UAAUJ,OAAS/I,KAAKkJ,QAAQH,MAAQa,GAAME,EAJpC,GAQjB9C,aAAa4C,EAAIC,EAAIC,GACnB9J,KAAK4H,UAAUC,EAAI+B,EACnB5J,KAAK4H,UAAUE,EAAI+B,EACnB7J,KAAK4H,UAAU9K,EAAIgN,EAEnB9J,KAAKwJ,eAGPxC,WAAWlC,EAAOC,GAChB/E,KAAKkJ,QAAQH,MAAQjE,EACrB9E,KAAKkJ,QAAQF,OAASjE,EAEtB/E,KAAKwJ,eAGPxC,aAAa+C,GACX/J,KAAKkF,MAAMjK,QAAQuM,IACjBA,EAAEK,EAAIkC,EAAWvC,EAAEhD,OAAOqD,EAC1BL,EAAEM,EAAIiC,EAAWvC,EAAEhD,OAAOsD,EAE1BN,EAAEC,UAAUxM,QAAQ/J,IAClB,MAAM8Y,EAAM9Y,EAAE,GACRyU,EAAOzU,EAAE,GACXsW,EAAEhD,MAAQwF,GACZhK,KAAKiF,MAAMU,GAAMsE,GAAKF,EAAWvC,EAAEhD,OAAOqD,EAC1C7H,KAAKiF,MAAMU,GAAMuE,GAAKH,EAAWvC,EAAEhD,OAAOsD,IAE1C9H,KAAKiF,MAAMU,GAAMiE,GAAKG,EAAWvC,EAAEhD,OAAOqD,EAC1C7H,KAAKiF,MAAMU,GAAMkE,GAAKE,EAAWvC,EAAEhD,OAAOsD,OAIhD9H,KAAKyJ,cAGPzC,UAAUQ,EAAGK,EAAGC,GACd9H,KAAKkF,MAAMsC,GAAGK,EAAIA,EAClB7H,KAAKkF,MAAMsC,GAAGM,EAAIA,EAClB9H,KAAKkF,MAAMsC,GAAGC,UAAUxM,QAAQ/J,IAC9B,MAAM8Y,EAAM9Y,EAAE,GACRyU,EAAOzU,EAAE,GACXsW,EAAIwC,GACNhK,KAAKiF,MAAMU,GAAMsE,GAAKpC,EACtB7H,KAAKiF,MAAMU,GAAMuE,GAAKpC,IAEtB9H,KAAKiF,MAAMU,GAAMiE,GAAK/B,EACtB7H,KAAKiF,MAAMU,GAAMkE,GAAK/B,KAG1B9H,KAAKyJ,cAGPzC,gBACE,OAAOhH,KAAKkF,MAAMjJ,OAChB/K,GAAKA,EAAE4W,EAAI9H,KAAKmJ,UAAUL,KAAO5X,EAAE2W,EAAI7H,KAAKmJ,UAAUF,MACjD/X,EAAE4W,EAAI9H,KAAKmJ,UAAUH,QAAU9X,EAAE2W,EAAI7H,KAAKmJ,UAAUJ,OAI7D/B,gBACE,OAAOhH,KAAKiF,MAAMhJ,OAChB/K,GAAKA,EAAEiZ,QAAUnK,KAAK+F,kBACjB/F,KAAKmJ,UAAUL,IAAMzV,KAAK8O,IAAIjR,EAAEgZ,GAAIhZ,EAAE2Y,KACtC7J,KAAKmJ,UAAUF,KAAO5V,KAAK8O,IAAIjR,EAAE+Y,GAAI/Y,EAAE0Y,KACvC5J,KAAKmJ,UAAUH,OAAS3V,KAAK6O,IAAIhR,EAAEgZ,GAAIhZ,EAAE2Y,KACzC7J,KAAKmJ,UAAUJ,MAAQ1V,KAAK6O,IAAIhR,EAAE+Y,GAAI/Y,EAAE0Y,KAIjD5C,WACE,OACExB,UAAWxF,KAAKwF,UAChBC,SAAUzF,KAAKyF,SACfC,UAAW1F,KAAK0F,UAChBa,eAAgBvG,KAAKuG,eACrBE,UAAWzG,KAAKyG,UAChBC,UAAW1G,KAAK0G,UAChBX,iBAAkB/F,KAAK+F,iBACvB4B,uBAAwB3H,KAAK2H,uBAC7BtC,eAAgBrF,KAAK4H,UACrBhB,OAAQ5G,KAAKkF,MAAMjU,IAAIC,KAAO2W,EAAG3W,EAAE2W,EAAGC,EAAG5W,EAAE4W,MAI/Cd,SAGE,OAFAhH,KAAKhL,KAAKiQ,MAAMtN,GAAK1C,EAAKhC,SAC1B+M,KAAKhL,KAAKiQ,MAAMK,SAAWtF,KAAKsF,WACzBvP,KAAKqD,MAAMrD,KAAKC,UAAUgK,KAAKhL,OAGxCgS,gBACE/U,EAAG8N,OAAO,oBACPnJ,KAAKb,KAAKC,UAAUgK,KAAK4H,YAG9BZ,eACE/U,EAAG8N,OAAO,mBACPnJ,KAAKb,KAAKC,UAAUgK,KAAKoJ,WAG9BpC,gBACE/U,EAAG8N,OAAO,oBACPnJ,KAAKb,KAAKC,UAAUgK,KAAKmJ,YAG9BnC,cACE/U,EAAG8N,OAAO,kBACPnJ,KAAKb,KAAKC,UAAUgK,KAAKkJ,kBCzO9BkB,mBAjCK,SAA4BlF,EAAOD,EAAOoF,GAG/C,IAAKpF,EAAMnP,OAAQ,CACjB,MAAMwU,KAEN,OADApF,EAAMjK,QAAQ/J,IAAOoZ,EAAUpZ,GAAKmZ,EAAO1H,QAAU,KAAOzR,IACrDoZ,EAET,MAAMC,KACAD,EAAYE,IAAWtF,MAAMA,GAAOD,MAAMA,EAA9BuF,GAmBlB,OAlBA5U,OAAOoF,QAAQsP,GAAWrP,QAAQ/J,IAC3BqZ,EAASpZ,eAAeD,EAAE,MAC7BqZ,EAASrZ,EAAE,QAEbqZ,EAASrZ,EAAE,IAAIyL,KAAKzL,EAAE,MAGxB0E,OAAOoF,QAAQuP,GACZ7G,KAAK,CAACjK,EAAGgR,IAAMhR,EAAE,GAAG3D,OAAS2U,EAAE,GAAG3U,QAClCmF,QAAQ,CAACyP,EAAS9O,KACS,IAAtB8O,EAAQ,GAAG5U,OACbwU,EAAUI,EAAQ,GAAG,IAAML,EAAO1H,QAAU,KAAO/G,EAEnD8O,EAAQ,GAAGzP,QAAQ/J,IACjBoZ,EAAUpZ,GAAK0K,MAIhB0O,ICFT,SAASK,EAAe5L,EAAWvL,GACjC,MAAMoX,EAAU7L,EAAUgB,OAAO,UAC9B8K,UAAU,UACR7V,KAAKxB,EAAOoL,GAAKA,EAAEvN,KACxBuZ,EAAQE,OAAOxK,SACfsK,EAAQG,QACL7L,OAAO,UACLX,KAAK,QAASK,GAAKA,EAAEvN,KACrBuF,KAAKgI,GAAKA,EAAExN,MAGnB,SAAS4Z,EAAgBjM,EAAWnN,GAClCmN,EAAUgB,OAAO,UAAUkB,SAAS,QAASrP,GAkC/C,SAASqZ,EAAkBlM,EAAWvL,GACpC,MAAM0X,EAAYnM,EAAUgB,OAAO,MAChC8K,UAAU,MACR7V,KAAKxB,EAAOoL,GAAKA,EAAEvN,KACxB6Z,EAAUJ,OAAOxK,SACjB,MAAM6K,EAAOD,EAAUH,QACpB7L,OAAO,MACLX,KAAK,QAAS,cAChBW,OAAO,SACLX,KAAK,QAAS,oBACnB4M,EAAKjM,OAAO,SACPX,KAAK,OAAQ,YACbA,KAAK,QAAS,oBACd0C,SAAS,QAASrC,GAAKA,EAAEvN,KAC9B8Z,EAAKjM,OAAO,QACPtI,KAAKgI,GAAKA,EAAExN,MAGnB,SAASga,EAAmBrM,EAAWlC,GAChCA,GACLkC,EAAU8L,UAAU,SACjBQ,KAAK,SAAUzM,GACd3M,EAAG8N,OAAOC,MAAMiB,SAAS,UAAWpE,EAAOnL,SAASkN,EAAEvN,eAU1Dia,UApGF,SAAmBvM,EAAWpH,EAAIqH,EAAOhO,EAAQY,GAC/CmN,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GACnCF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBV,KAAK,MAAO5G,GACZf,KAAKoI,GACVD,EAAUG,OAAO,UACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,KAAM5G,GACZ3G,IACF+N,EAAU2B,KAAKiK,EAAgB3Z,GAC/B+N,EAAU2B,KAAKsK,EAAiBpZ,KAkFvB+Y,eAAAA,EAAgBK,gBAAAA,EAAiBO,eA/D9C,SAAwBxM,GACtB,OAAOA,EAAUgB,OAAO,UAAUkB,SAAS,UA+D3CuK,aAvDF,SAAsBzM,EAAWpH,EAAIqH,EAAOhO,EAAQ6L,GAElDkC,EACKE,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GACnCF,EAAUG,OAAO,SACZD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBrI,KAAKoI,GACVD,EAAUG,OAAO,MACZD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,SAAS,GACjBV,KAAK,KAAM5G,GACZ3G,IACF+N,EAAU2B,KAAKuK,EAAmBja,GAClC+N,EAAU2B,KAAK0K,EAAoBvO,KAqCvBoO,kBAAAA,EAAmBG,mBAAAA,EAAoBK,kBAPvD,SAA2B1M,GACzB,OAAOA,EAAU8L,UAAU,iBAAiB7V,OAAO/D,IAAI2N,GAAKA,EAAEvN,OC1ChE,SAASqa,EAAe3M,EAAWpB,GAIjCoB,EAAUgB,OAAO,QAAQkB,SAAS,QAAStD,EAAM,IACjDoB,EAAUgB,OAAO,QAAQkB,SAAS,QAAStD,EAAM,IA2FnD,SAASgO,EAAoB5M,EAAWpB,GACtC,IAAIiO,EAEFA,EADkB,GAAhBjO,EAAM7H,QACM6H,EAAM,GAAI,KAAMA,EAAM,IACX,GAAhBA,EAAM7H,QACD6H,EAAM,GAAIA,EAAM,GAAIA,EAAM,KAE1B,KAAM,KAAM,MAE5BoB,EAAUgB,OAAO,QACZkB,SAAS,QAAS2K,EAAW,IAC7B3K,SAAS,WAA8B,OAAlB2K,EAAW,IAChCtM,MAAM,UAA6B,OAAlBsM,EAAW,GAAc,GAAM,MACrD7M,EAAUgB,OAAO,QACZxB,KAAK,QAASqN,EAAW,IACzB3K,SAAS,WAA8B,OAAlB2K,EAAW,IAChCtM,MAAM,UAA6B,OAAlBsM,EAAW,GAAc,GAAM,MACrD7M,EAAUgB,OAAO,QACZkB,SAAS,QAAS2K,EAAW,IAC7B3K,SAAS,WAA8B,OAAlB2K,EAAW,IAChCtM,MAAM,UAA6B,OAAlBsM,EAAW,GAAc,GAAM,aAoBrDC,SA7LF,SAAkB9M,EAAWpH,EAAIqH,EAAOrB,GACtCoB,EACKE,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GAC9BV,KAAK,KAAM5G,GAChBoH,EAAUG,OAAO,OACZD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChBrI,KAAKoI,GACV,MAAMrD,EAAIoD,EAAUG,OAAO,OACtBD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GACrBtD,EAAEuD,OAAO,SACJD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBV,KAAK,SAAU5G,UACff,KAAK,OACV+E,EAAEuD,OAAO,SACJD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,OAAO,GACfV,KAAK,OAAQ,QACbA,KAAK,QAAS5G,UACnB,MAAMmU,EAAI/M,EAAUG,OAAO,OACtBD,QAAQ,cAAc,GACtBA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GACrB6M,EAAE5M,OAAO,SACJD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBV,KAAK,SAAU5G,QACff,KAAK,OACVkV,EAAE5M,OAAO,SACJD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,OAAO,GACfV,KAAK,OAAQ,QACbA,KAAK,QAAS5G,QAInBoH,EAAU2B,KAAKgL,EAAgB/N,IA4IrB+N,eAAAA,EAAgBK,cA/H5B,SAAuBhN,GACrB,OACE/M,WAAW+M,EAAUgB,OAAO,QAAQkB,SAAS,UAC7CjP,WAAW+M,EAAUgB,OAAO,QAAQkB,SAAS,YA6H/C+K,cApHF,SAAuBjN,EAAWpH,EAAIqH,EAAOrB,GAC3CoB,EACKE,QAAQ,YAAY,GACpBA,QAAQ,sBAAsB,GAC9BV,KAAK,KAAM5G,GAChBoH,EAAUG,OAAO,OACZD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChBrI,KAAKoI,GACV,MAAMrD,EAAIoD,EAAUG,OAAO,OACtBD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GACrBtD,EAAEuD,OAAO,SACJD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBV,KAAK,SAAU5G,UACff,KAAK,OACV+E,EAAEuD,OAAO,SACJD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,OAAO,GACfV,KAAK,OAAQ,SACbA,KAAK,QAAS5G,UACnB,MAAMuD,EAAI6D,EAAUG,OAAO,OACtBD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GACrB/D,EAAEgE,OAAO,SACJD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBV,KAAK,SAAU5G,SACff,KAAK,OACVsE,EAAEgE,OAAO,SACJD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,OAAO,GACfV,KAAK,OAAQ,SACbA,KAAK,QAAS5G,SACnB,MAAMmU,EAAI/M,EAAUG,OAAO,OACtBD,QAAQ,cAAc,GACtBA,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GACrB6M,EAAE5M,OAAO,SACJD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBV,KAAK,SAAU5G,QACff,KAAK,OACVkV,EAAE5M,OAAO,SACJD,QAAQ,gBAAgB,GACxBA,QAAQ,mBAAmB,GAC3BA,QAAQ,OAAO,GACfV,KAAK,OAAQ,SACbA,KAAK,QAAS5G,QACnBoH,EACK2B,KAAKiL,EAAqBhO,GAC1BmC,GAAG,SAAU,KAEZ7N,EAAGyG,MAAMuT,qBA8CAN,oBAAAA,EAAqBO,mBAjBtC,SAA4BnN,GAC1B,MAAMoN,KAUN,OATKpN,EAAUgB,OAAO,QAAQkB,SAAS,aACrCkL,EAAIxP,KAAKoC,EAAUgB,OAAO,QAAQkB,SAAS,UAExClC,EAAUgB,OAAO,QAAQkB,SAAS,aACrCkL,EAAIxP,KAAKoC,EAAUgB,OAAO,QAAQkB,SAAS,UAExClC,EAAUgB,OAAO,QAAQkB,SAAS,aACrCkL,EAAIxP,KAAKoC,EAAUgB,OAAO,QAAQkB,SAAS,UAEtCkL,IC9JT,SAASC,EAAsBrN,EAAWpB,GACxCoB,EAAUgB,OAAO,YACZW,KACC2L,EAAKrB,gBACLsB,EAAS7O,gBAAgBgB,KAAKvN,GAAKA,EAAEwM,OAASC,EAAM7H,QAAQzE,KAE7DyO,GAAG,SAAU,WACZ,MAAMlO,EAAQya,EAAKd,eAAetZ,EAAG8N,OAAOC,OACtCuM,EAAID,EAASjO,cAAcI,KAAKvN,GAAKA,EAAEG,MAAQO,GAC/Cka,EAAIQ,EAAS7O,gBAAgBgB,KAAKvN,GAAKA,EAAEwM,OAAS6O,EAAE5O,MAAM7H,QAChEiJ,EAAUgB,OAAO,cAAcW,KAAK2L,EAAKrB,gBAAiBc,EAAEza,KAC5D0N,EAAUgB,OAAO,UAAUW,KAAK8L,EAAKb,oBAAqBY,EAAE5O,SAElEoB,EAAUgB,OAAO,cACZD,GAAG,SAAU,WACZ,MAAMlO,EAAQya,EAAKd,eAAetZ,EAAG8N,OAAOC,OACtCtC,EAAO4O,EAAS7O,gBAAgBgB,KAAKvN,GAAKA,EAAEG,MAAQO,GAAO8L,KACjEqB,EAAUgB,OAAO,UAAUA,OAAO,QAC7BkB,SAAS,WAAYvD,EAAO,GAC5B4B,MAAM,UAAW5B,GAAQ,EAAI,KAAO,IACzCqB,EAAUgB,OAAO,UAAUA,OAAO,QAC7BkB,SAAS,WAAqB,IAATvD,GACrB4B,MAAM,UAAoB,IAAT5B,EAAa,KAAO,IAC1CqB,EAAUgB,OAAO,UAAUA,OAAO,QAC7BkB,SAAS,WAAYvD,EAAO,GAC5B4B,MAAM,UAAW5B,GAAQ,EAAI,KAAO,MAE/CqB,EAAUgB,OAAO,UACZW,KAAK8L,EAAKb,oBAAqBhO,GAC/BmC,GAAG,UAAW,KACbf,EAAU6B,SAAS,YAuC3B,SAAS6L,EAAoB1N,EAAWZ,EAAOC,GAC7CW,EAAUgB,OAAO,WACdD,GAAG,SAAU,WACZ,MAAMlO,EAAQya,EAAKd,eAAetZ,EAAG8N,OAAOC,OACtCuM,EAAID,EAASpO,QAAQO,KAAKvN,GAAKA,EAAEG,KAAOO,GAC9CmN,EAAUgB,OAAO,UAAUW,KAAK2L,EAAKrB,gBAAiBuB,EAAEpO,OACxDY,EAAUgB,OAAO,WAAWW,KAAK8L,EAAKd,eAAgBa,EAAEnO,UAE5DW,EAAUgB,OAAO,UACZW,KAAK2L,EAAKrB,gBAAiB7M,GAC3B2B,GAAG,SAAU,KACZf,EAAUgB,OAAO,WAAWa,SAAS,YAE3C7B,EAAUgB,OAAO,WACZW,KAAK8L,EAAKd,eAAgBtN,GAC1B0B,GAAG,SAAU,WACZ,MAAM4M,EAA4D,QAApDL,EAAKd,eAAexM,EAAUgB,OAAO,WAC7C3B,EAASoO,EAAKT,cAAc9Z,EAAG8N,OAAOC,OACtC2M,EAAU/N,GAAK7M,MAAM6M,IAAO8N,GAAS9N,GAAK,EAChD3M,EAAG8N,OAAOC,MAAMD,OAAO,QAClBT,MAAM,mBAAoBqN,EAAQvO,EAAO,IAAM,UAAY,WAChEnM,EAAG8N,OAAOC,MAAMD,OAAO,QAClBT,MAAM,mBAAoBqN,EAAQvO,EAAO,IAAM,UAAY,oBAatEwO,gBA9HF,SAAyB7N,EAAWpH,EAAIkV,EAAUC,EAAYnP,GAC5DoB,EACKE,QAAQ,QAAQ,GACrBF,EAAUG,OAAO,OACZD,QAAQ,WAAW,GACnBA,QAAQ,QAAQ,GAChByB,KAAK2L,EAAKf,aAAc3T,YAAc,gBAAiBkV,EAAU,QACtE9N,EAAUG,OAAO,OACZD,QAAQ,aAAa,GACrBA,QAAQ,QAAQ,GAChByB,KACC2L,EAAKf,aAAc3T,cAAgB,aAAcmV,EACjDR,EAAS7O,gBAAgBgB,KAAKvN,GAAKA,EAAEwM,OAASC,EAAM7H,QAAQzE,KAElE0N,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KAAK8L,EAAKR,iBAAkBrU,UAAY,QAASgG,GACtDoB,EAAU2B,KAAK0L,EAAuBzO,IA4GrByO,sBAAAA,EAAuBW,qBArE1C,SAA8BhO,GAC5B,MAAM7K,EAAOmY,EAAKd,eAAexM,EAAUgB,OAAO,eAC5ClD,EAAS2P,EAAKN,mBAAmBnN,EAAUgB,OAAO,WACxD,OAAKlD,EAAO/G,OAGH+G,EAFAyP,EAAS7O,gBAAgBgB,KAAKvN,GAAKA,EAAEG,MAAQ6C,GAAMyJ,OAkE5DqP,cAvDF,SAAuBjO,EAAWpH,EAAIuG,EAAS+O,EAAY9O,EAAOC,GAChEW,EACKE,QAAQ,QAAQ,GACrBF,EAAUG,OAAO,OACZD,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChByB,KAAK2L,EAAKf,aAAc3T,WAAa,eAAgBuG,EAAS,IACnEa,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KAAK2L,EAAKf,aAAc3T,UAAY,aAAcsV,EAAY9O,GACnEY,EAAUG,OAAO,OACZD,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChByB,KAAK8L,EAAKX,YAAalU,WAAa,SAAUyG,GACnDW,EAAU2B,KAAK+L,EAAqBtO,EAAOC,IAwC5BqO,oBAAAA,EAAqBS,mBATtC,SAA4BnO,GAG1B,OAAQZ,MAFMkO,EAAKd,eAAexM,EAAUgB,OAAO,WAE7B3B,OADPoO,EAAKT,cAAchN,EAAUgB,OAAO,eCvHrD,SAASoN,GAAepO,EAAW8D,GAEjC9D,EAAUG,OAAO,OACZD,QAAQ,QAAQ,GAClBC,OAAO,OACLD,QAAQ,OAAO,GACfyB,KAAKjB,EAAOX,UAAW,gBAAiB,gBAAiB,WAE9D,MAAMsO,EAAYrO,EAAUG,OAAO,OAC9BD,QAAQ,QAAQ,GACnBmO,EAAUlO,OAAO,OACdD,QAAQ,WAAW,GACnBA,QAAQ,QAAQ,GAChByB,KAAKqB,EAAID,SAAU,UAAW,sBAAuBe,EAAMqE,mBAC9DkG,EAAUlO,OAAO,OACdD,QAAQ,YAAY,GACpBA,QAAQ,QAAQ,GAChByB,KAAKqB,EAAID,SAAU,WAAY,uBAAwBe,EAAMwE,oBAElE,MAAMgG,EAAYtO,EAAUG,OAAO,OAC9BD,QAAQ,QAAQ,GACrBoO,EAAUnO,OAAO,OACZD,QAAQ,QAAQ,GAChBA,QAAQ,QAAQ,GAChByB,KAAKqB,EAAIE,UAAW,OAAQ,oBACvBY,EAAM8E,uBAAwB,EAAO,IAAM9E,EAAMkD,kBAC3DsH,EAAUnO,OAAO,OACZD,QAAQ,QAAQ,GAChBA,QAAQ,QAAQ,GAChByB,KAAKqB,EAAIP,YAAa,OAAQ,OAAQ,MAE3C,MAAM8L,EAAWvO,EAAUG,OAAO,OAC7BD,QAAQ,cAAc,GACtBA,QAAQ,YAAY,GACzBqO,EAASpO,OAAO,OACXD,QAAQ,SAAS,GACnBC,OAAO,QACLD,QAAQ,kBAAkB,GAC1BA,QAAQ,qBAAqB,GAC7BA,QAAQ,QAAQ,GAChBrI,KAAK,eACV0W,EAASpO,OAAO,OACXD,QAAQ,UAAU,GACpBC,OAAO,OACLD,QAAQ,eAAe,GACvBA,QAAQ,YAAY,GACtBC,OAAO,OACLD,QAAQ,gBAAgB,GACxBA,QAAQ,QAAQ,GAChBV,KAAK,KAAM,eACXA,KAAK,OAAQ,eACbA,KAAK,gBAAiB,GACtBA,KAAK,gBAAiB,KAC3B+O,EAASpO,OAAO,OACXD,QAAQ,UAAU,GACpBC,OAAO,OACLD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KAAKqB,EAAID,SAAU,cAAe,eAAgBe,EAAMyG,kBAC7DgE,EAASpO,OAAO,OACXD,QAAQ,UAAU,GACpBC,OAAO,OACLD,QAAQ,WAAW,GACnBA,QAAQ,QAAQ,GAChByB,KAAKjB,EAAOX,UAAW,gBAAiB,WAAY,WAEzDC,EAAU2B,KAAK6M,GAAsB1K,GAIvC,SAAS0K,GAAqBxO,EAAW8D,GAEvC9D,EAAUgB,OAAO,aACZD,GAAG,QAAS,WAAc+C,EAAM2K,qBAErCzO,EAAUgB,OAAO,QACZD,GAAG,QAAS,WAAc+C,EAAM0F,gBAErCxJ,EAAUgB,OAAO,YACZW,KAAKqB,EAAIZ,eAAgB0B,EAAMqE,mBAC/BpH,GAAG,SAAU,WACZ+C,EAAMqE,kBAAoBnF,EAAIC,cAAc/P,EAAG8N,OAAOC,OACtD6C,EAAMsE,YAAcpF,EAAIC,cAAc/P,EAAG8N,OAAOC,OAChD6C,EAAMoF,4BAGZlJ,EAAUgB,OAAO,aACZW,KAAKqB,EAAIZ,eAAgB0B,EAAMwE,oBAC/BvH,GAAG,SAAU,WACZ+C,EAAMwE,mBAAqBtF,EAAIC,cAAc/P,EAAG8N,OAAOC,OACvD6C,EAAMyE,aAAevF,EAAIC,cAAc/P,EAAG8N,OAAOC,OACjD6C,EAAMoF,4BAGZlJ,EAAUgB,OAAO,SACZW,KAAKqB,EAAIV,gBAAiBwB,EAAMkD,kBAChCjG,GAAG,SAAU,WACZ,MAAMlO,EAAQmQ,EAAIM,eAAepQ,EAAG8N,OAAOC,OAC3C6C,EAAMkD,iBAAmBnU,EACzBiR,EAAMoF,0BACNpF,EAAM2F,mBACN,MAAMiF,EAAW5K,EAAMoC,MAAMhJ,OAAO/K,GAAKA,EAAEiZ,QAAUvY,GAAOkE,OACtD0R,EAAI3E,EAAMqC,MAAMpP,OAChB4X,EAAelG,GAAKA,EAAI,GAAK,EAC7BmG,EAAO1b,EAAGV,OAAO,MAAVU,CAAiBoB,KAAKua,MAAMH,EAAWC,IACpD3O,EAAUgB,OAAO,SAASW,KAAKqB,EAAIf,cAAe2M,KAEnD/M,SAAS,UAEdiC,EAAM+F,aAAe,CAACiF,IACpB,MAAMC,EAAQD,EAAWC,QACnBC,EAAYD,GAASD,EAAWG,WAChCjW,EAAWkW,SAASF,EAAY,EAAY,IAARD,GAC1C/O,EAAUgB,OAAO,gBACdA,OAAO,iBACLd,QAAQ,aAAc8O,GACtB9O,QAAQ,cAAe8O,GACvBzO,MAAM,WAAYvH,MAClBwG,KAAK,gBAAiBxG,KAE7BgH,EAAUgB,OAAO,UACZW,KAAKqB,EAAIZ,gBAAiB0B,EAAMyG,kBAChCxJ,GAAG,SAAU,WACZ,MAAMlO,EAAQmQ,EAAIC,cAAc/P,EAAG8N,OAAOC,OAC1CjB,EAAUgB,OAAO,gBACZT,MAAM,mBAAoB1N,EAAQ,UAAY,WAChDmO,OAAO,iBACLT,MAAM,QAAS,MACff,KAAK,gBAAiB,GACvB3M,EACFiR,EAAM4F,gBAEN5F,EAAM6F,kBAGd3J,EAAUgB,OAAO,YACZD,GAAG,QAAS,WACXf,EAAUgB,OAAO,UACZW,KAAKqB,EAAIZ,gBAAgB,GACzBP,SAAS,UACdiC,EAAM8F,oBAMd,SAASuF,GAAoBnP,EAAW8D,GACtC9D,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACC2L,EAAKf,UAAW,cAAe,QAC/BzI,EAAM7N,KAAKkQ,MAAMlU,OAAOiL,OAAO/K,GAAiC,SAA5B+D,EAAKzD,SAASN,EAAEK,SACpDsR,EAAM2C,UAAUpK,OAAS,IAE/B2D,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACCyN,EAAMvB,gBAAiB,QAASN,EAASjO,cACzCiO,EAAS7O,gBAAiBoF,EAAM2C,UAAU7H,OAEhDoB,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACCyN,EAAMnB,cAAe,QAASV,EAASpO,QACvCoO,EAASnP,MAAMlB,OAAO/K,GAAe,YAAVA,EAAEG,KAC7BwR,EAAM2C,UAAUrH,MAAO0E,EAAM2C,UAAUpH,QAG7CW,EAAU2B,KAAK0N,GAA2BvL,GAI5C,SAASuL,GAA0BrP,EAAW8D,GAC5C9D,EAAUgB,OAAO,UACdW,KAAK2L,EAAKrB,gBAAiBnI,EAAM2C,UAAUpK,OAC3C0E,GAAG,SAAU,WACZ+C,EAAM2C,UAAUpK,MAAQiR,EAAKd,eAAetZ,EAAG8N,OAAOC,OACtD6C,EAAMuF,2BAEVrJ,EAAUgB,OAAO,UACdW,KAAKyN,EAAM/B,sBAAuBvJ,EAAM2C,UAAU7H,OAClDmC,GAAG,SAAU,WACZ,MAAMjD,EAASsR,EAAMpB,qBAAqB9a,EAAG8N,OAAOC,OACpD6C,EAAM2C,UAAU7H,MAAQd,EACpBA,EAAO/G,OAAS,GAClB+M,EAAM2C,UAAUrH,MAAQ,UACxBY,EAAUgB,OAAO,UAAU8K,UAAU,gBAClC5J,SAAS,YAAY,GACrB3B,MAAM,UAAW,KAEpBP,EAAUgB,OAAO,UAAU8K,UAAU,gBAClC5J,SAAS,YAAY,GACrB3B,MAAM,UAAW,MAEtBuD,EAAMuF,2BAGVrJ,EAAUgB,OAAO,UACdW,KAAKyN,EAAM1B,oBAAqB5J,EAAM2C,UAAUrH,MAAO0E,EAAM2C,UAAUpH,QACvE0B,GAAG,SAAU,WACZ,MAAMjD,EAASsR,EAAMjB,mBAAmBjb,EAAG8N,OAAOC,OAClD6C,EAAM2C,UAAUrH,MAAQtB,EAAOsB,MAC/B0E,EAAM2C,UAAUpH,OAASvB,EAAOuB,OAChCyE,EAAMuF,2BAMZ,SAASiG,GAAmBtP,EAAW8D,GACrC9D,EAAUG,OAAO,OACdD,QAAQ,SAAS,GACjByB,KACC2L,EAAKf,UAAW,aAAc,QAC9BzI,EAAM7N,KAAKkQ,MAAMlU,OAAOiL,OAAO/K,GAAiC,YAA5B+D,EAAKzD,SAASN,EAAEK,SACpDsR,EAAM4C,SAASrK,OAAS,IAE5B2D,EAAUG,OAAO,OACdD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KAAK8L,EAAKX,SAAU,aAAc,QAAShJ,EAAM4C,SAAS9H,OAC7DoB,EAAUG,OAAO,OACdD,QAAQ,SAAS,GACjByB,KACCyN,EAAMnB,cAAe,OACrBV,EAASpO,QAAQjC,OAAO/K,GAAiB,YAAZA,EAAEiN,OAC/BmO,EAASnP,MAAMlB,OAAO/K,GAAe,YAAVA,EAAEG,KAC7BwR,EAAM4C,SAAStH,MAAO0E,EAAM4C,SAASrH,QAEzCW,EAAU2B,KAAK4N,GAA0BzL,GAI3C,SAASyL,GAAyBvP,EAAW8D,GAC3C9D,EAAUgB,OAAO,UACdW,KAAK2L,EAAKrB,gBAAiBnI,EAAM4C,SAASrK,OAC1C0E,GAAG,SAAU,WACZ+C,EAAM4C,SAASrK,MAAQiR,EAAKd,eAAetZ,EAAG8N,OAAOC,OACrD6C,EAAMuF,2BAEVrJ,EAAUgB,OAAO,UACdW,KAAK8L,EAAKd,eAAgB7I,EAAM4C,SAAS9H,OACzCmC,GAAG,SAAU,WACZ+C,EAAM4C,SAAS9H,MAAQ6O,EAAKT,cAAc9Z,EAAG8N,OAAOC,OACpD6C,EAAMuF,2BAEVrJ,EAAUgB,OAAO,UACdW,KAAKyN,EAAM1B,oBAAqB5J,EAAM4C,SAAStH,MAAO0E,EAAM4C,SAASrH,QACrE0B,GAAG,SAAU,WACZ,MAAMjD,EAASsR,EAAMjB,mBAAmBjb,EAAG8N,OAAOC,OAClD6C,EAAM4C,SAAStH,MAAQtB,EAAOsB,MAC9B0E,EAAM4C,SAASrH,OAASvB,EAAOuB,OAC/ByE,EAAMuF,2BAMZ,SAASmG,GAAoBxP,EAAW8D,GAEtC9D,EAAUG,OAAO,OACdA,OAAO,OACLD,QAAQ,WAAW,GACnByB,KAAKqB,EAAID,SAAU,gBAAiB,mBAAoBe,EAAM6C,UAAUpU,SAE7E,MAAMkd,EAAazP,EAAUG,OAAO,OAC/BD,QAAQ,QAAQ,GACrBuP,EAAWtP,OAAO,OACbD,QAAQ,QAAQ,GAChBA,QAAQ,QAAQ,GAChByB,KACC2L,EAAKf,UAAW,aAAc,aAC9BzI,EAAM7N,KAAKkQ,MAAMlU,OAAOiL,OAAO/K,GAAiC,SAA5B+D,EAAKzD,SAASN,EAAEK,SACpDsR,EAAM6C,UAAU9O,MAAQ,IAE9B4X,EAAWtP,OAAO,OACbD,QAAQ,QAAQ,GAChBA,QAAQ,QAAQ,GAChByB,KACCqB,EAAIE,UAAW,aAAc,YAAa,EAAG,IAAK,EAAGY,EAAM6C,UAAUhI,MAG3EqB,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACC2L,EAAKf,UAAW,cAAe,cAC/BzI,EAAM7N,KAAKkQ,MAAMlU,OAAOiL,OAAO/K,GAAiC,SAA5B+D,EAAKzD,SAASN,EAAEK,SACpDsR,EAAM0D,eAAenL,OAAS,IAEpC2D,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACCyN,EAAMvB,gBAAiB,QAASN,EAASjO,cACzCiO,EAAS7O,gBAAiBoF,EAAM0D,eAAe5I,OAErDoB,EAAUG,OAAO,OACZD,QAAQ,SAAS,GACjByB,KACCyN,EAAMnB,cAAe,QAASV,EAASpO,QACvCoO,EAASnP,MAAMlB,OAAO/K,GAAe,YAAVA,EAAEG,KAC7BwR,EAAM0D,eAAepI,MAAO0E,EAAM0D,eAAenI,QAEvDW,EAAU2B,KAAK+N,GAA2B5L,GAI5C,SAAS4L,GAA0B1P,EAAW8D,GAE5C9D,EAAUgB,OAAO,YACZW,KAAKqB,EAAIZ,eAAgB0B,EAAM6C,UAAUpU,SACzCwO,GAAG,SAAU,WACZ+C,EAAM6C,UAAUpU,QAAUyQ,EAAIC,cAAc/P,EAAG8N,OAAOC,OACtD6C,EAAMuF,2BAGZrJ,EAAUgB,OAAO,SACZW,KAAK2L,EAAKrB,gBAAiBnI,EAAM6C,UAAU9O,MAC3CkJ,GAAG,SAAU,WACZ+C,EAAM6C,UAAU9O,KAAOyV,EAAKd,eAAetZ,EAAG8N,OAAOC,OACrD6C,EAAMuF,2BAEZrJ,EAAUgB,OAAO,SACZW,KAAKqB,EAAIV,gBAAiBwB,EAAM6C,UAAUhI,MAC1CoC,GAAG,SAAU,WACZ+C,EAAM6C,UAAUhI,KAAOqE,EAAIM,eAAepQ,EAAG8N,OAAOC,OACpD6C,EAAMuF,2BAGZrJ,EAAUgB,OAAO,UACZW,KAAK2L,EAAKrB,gBAAiBnI,EAAM0D,eAAenL,OAChD0E,GAAG,SAAU,WACZ+C,EAAM0D,eAAenL,MAAQiR,EAAKd,eAAetZ,EAAG8N,OAAOC,OAC3D6C,EAAMuF,2BAEZrJ,EAAUgB,OAAO,UACZW,KAAKyN,EAAM/B,sBAAuBvJ,EAAM0D,eAAe5I,OACvDmC,GAAG,SAAU,WACZ,MAAMjD,EAASsR,EAAMpB,qBAAqB9a,EAAG8N,OAAOC,OACpD6C,EAAM0D,eAAe5I,MAAQd,EACzBA,EAAO/G,OAAS,GAClB+M,EAAM0D,eAAepI,MAAQ,UAC7BY,EAAUgB,OAAO,UAAU8K,UAAU,gBAClC5J,SAAS,YAAY,GACrB3B,MAAM,UAAW,MAEpBuD,EAAM0D,eAAepI,MAAQkO,EAAKd,eAAexM,EAAUgB,OAAO,WAClEhB,EAAUgB,OAAO,UAAU8K,UAAU,gBAClC5J,SAAS,YAAY,GACrB3B,MAAM,UAAW,OAEtBuD,EAAMuF,2BAEZrJ,EAAUgB,OAAO,UACZW,KACCyN,EAAM1B,oBAAqB5J,EAAM0D,eAAepI,MAChD0E,EAAM0D,eAAenI,QAEtB0B,GAAG,SAAU,WACZ,MAAMjD,EAASsR,EAAMjB,mBAAmBjb,EAAG8N,OAAOC,OAClD6C,EAAM0D,eAAepI,MAAQtB,EAAOsB,MACpC0E,EAAM0D,eAAenI,OAASvB,EAAOuB,OACrCyE,EAAMuF,2BAMd,SAASsG,GAAe3P,EAAW8D,GAEjC,MAAM2L,EAAazP,EAAUG,OAAO,OAC/BD,QAAQ,QAAQ,GACrBuP,EAAWtP,OAAO,OACbD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KACCqB,EAAID,SAAU,qBAAsB,yBACpCe,EAAM6D,UAAUpV,SAEtBkd,EAAWtP,OAAO,OACbD,QAAQ,QAAQ,GAChBA,QAAQ,QAAQ,GAChByB,KACCqB,EAAIE,UAAW,kBAAmB,yBAClC,EAAG,IAAK,EAAGY,EAAM6D,UAAUhJ,MAGjC,MAAMiR,EAAa5P,EAAUG,OAAO,OAC/BD,QAAQ,QAAQ,GACrB0P,EAAWzP,OAAO,OACbD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KAAK8L,EAAKX,SAAU,mBAAoB,QAAShJ,EAAM4D,UAAU9I,OACtEgR,EAAWzP,OAAO,OACbD,QAAQ,SAAS,GACjBA,QAAQ,QAAQ,GAChByB,KACC2L,EAAKf,UAAW,mBAAoB,aACpCgB,EAASnP,MAAMlB,OAAO/K,GAAe,YAAVA,EAAEG,KAAoBwR,EAAM4D,UAAUtI,OAEvEwQ,EAAWzP,OAAO,OACbD,QAAQ,UAAU,GAClBA,QAAQ,QAAQ,GAChByB,KAAK8L,EAAKX,SAAU,oBAAqB,SAAUhJ,EAAM4D,UAAUrI,QAG1E,SAASwQ,GAAqB7P,EAAW8D,GAEvC9D,EAAUgB,OAAO,UACZW,KAAKqB,EAAIZ,eAAgB0B,EAAM6D,UAAUpV,SACzCwO,GAAG,SAAU,WACZ+C,EAAM6D,UAAUpV,QAAUyQ,EAAIC,cAAc/P,EAAG8N,OAAOC,OACtD6C,EAAMwF,2BAEZtJ,EAAUgB,OAAO,SACZW,KAAKqB,EAAIV,gBAAiBwB,EAAM6D,UAAUhJ,MAC1CoC,GAAG,SAAU,WACZ+C,EAAM6D,UAAUhJ,KAAOqE,EAAIM,eAAepQ,EAAG8N,OAAOC,OACpD6C,EAAMwF,2BAGZtJ,EAAUgB,OAAO,UACZW,KAAK8L,EAAKd,eAAgB7I,EAAM4D,UAAU9I,OAC1CmC,GAAG,SAAU,WACZ+C,EAAM4D,UAAU9I,MAAQ6O,EAAKT,cAAc9Z,EAAG8N,OAAOC,OACrD6C,EAAMwF,2BAEZtJ,EAAUgB,OAAO,UACZW,KAAK2L,EAAKrB,gBAAiBnI,EAAM4D,UAAUtI,OAC3C2B,GAAG,SAAU,WACZ+C,EAAM4D,UAAUtI,MAAQkO,EAAKd,eAAetZ,EAAG8N,OAAOC,OACtD6C,EAAMwF,2BAEZtJ,EAAUgB,OAAO,WACZW,KAAK8L,EAAKd,eAAgB7I,EAAM4D,UAAUrI,QAC1C0B,GAAG,SAAU,WACZ+C,EAAM4D,UAAUrI,OAASoO,EAAKT,cAAc9Z,EAAG8N,OAAOC,OACtD6C,EAAMwF,2BAKd,SAASwG,GAAgB9P,EAAW+P,EAAOC,GACzChQ,EAAUG,OAAO,OACdA,OAAO,OACLD,QAAQ,OAAO,GACfA,QAAQ,YAAY,GACpBV,KAAK,KAAMuQ,GACXvQ,KAAK,OAAQ,WAClBQ,EAAUG,OAAO,OACZD,QAAQ,eAAe,GACvBA,QAAQ,OAAO,GACfV,KAAK,KAAMwQ,GAIlB,SAASC,GAAcjQ,EAAWpH,EAAIqH,GACpCD,EACKE,QAAQ,YAAY,GACpBA,QAAQ,YAAY,GACpBA,QAAQ,QAAQ,GAChBV,KAAK,QAAS5G,SACd4G,KAAK,cAAe,OACpBA,KAAK,WAAY5G,KACjB4G,KAAK,OAAQ,OACbA,KAAK,gBAAiB5G,GACtB4G,KAAK,gBAAiB,SACtB3H,KAAKoI,GAIZ,SAASiQ,GAAelQ,EAAWpH,GACjCoH,EACKE,QAAQ,YAAY,GACpBA,QAAQ,QAAQ,GAChBA,QAAQ,aAAa,GACrBA,QAAQ,QAAQ,GAChBV,KAAK,KAAM5G,GACX4G,KAAK,OAAQ,YACbA,KAAK,qBAAsB5G,SA8DlC,SAASuX,GAAiBnQ,EAAW8D,GACnC9D,EAAUgB,OAAO,iBACZW,KAAK6M,GAAsB1K,GAChC9D,EAAUgB,OAAO,kBACZW,KAAK0N,GAA2BvL,GACrC9D,EAAUgB,OAAO,iBACZW,KAAK4N,GAA0BzL,GACpC9D,EAAUgB,OAAO,kBACZW,KAAK+N,GAA2B5L,GACrC9D,EAAUgB,OAAO,iBACZW,KAAKkO,GAAsB/L,WAKhCsM,WAzEF,SAAoBpQ,EAAW8D,GAE7B9D,EAAUgB,OAAO,OAAOO,SACxBvB,EAAUgB,OAAO,gBAAgBO,SAEjCvB,EAAU2B,KACRmO,GAAiB,oBAAqB,yBACxC,MAAMO,EAAOrQ,EAAUgB,OAAO,aACxBsP,EAAUtQ,EAAUgB,OAAO,gBAGjCqP,EAAKlQ,OAAO,KACPD,QAAQ,UAAU,GAClBV,KAAK,gBAAiB,QACtBmC,KAAKsO,GAAe,eAAgB,QACzCK,EAAQnQ,OAAO,OACVD,QAAQ,QAAQ,GAChBA,QAAQ,UAAU,GAClBA,QAAQ,gBAAgB,GACxByB,KAAKuO,GAAgB,gBACrBvO,KAAKyM,GAAgBtK,GAG1BuM,EAAKlQ,OAAO,KACPwB,KAAKsO,GAAe,gBAAiB,SAC1CK,EAAQnQ,OAAO,OACVD,QAAQ,iBAAiB,GACzByB,KAAKuO,GAAgB,iBACrBvO,KAAKwN,GAAqBrL,GAG/BuM,EAAKlQ,OAAO,KACPwB,KAAKsO,GAAe,eAAgB,QACzCK,EAAQnQ,OAAO,OACVD,QAAQ,gBAAgB,GACxByB,KAAKuO,GAAgB,gBACrBvO,KAAK2N,GAAoBxL,GAG9BuM,EAAKlQ,OAAO,KACPwB,KAAKsO,GAAe,gBAAiB,SAC1CK,EAAQnQ,OAAO,OACVD,QAAQ,iBAAiB,GACzByB,KAAKuO,GAAgB,iBACrBvO,KAAK6N,GAAqB1L,GAG/BuM,EAAKlQ,OAAO,KACPwB,KAAKsO,GAAe,eAAgB,QACzCK,EAAQnQ,OAAO,OACVD,QAAQ,gBAAgB,GACxByB,KAAKuO,GAAgB,gBACrBvO,KAAKgO,GAAgB7L,GAE1B9D,EAAU2B,KAAKwO,GAAkBrM,IAmBrBqM,iBAAAA,ICjjBd,MAAMI,GAAW,IACXC,GAAY,IAGlB,SAASC,GAAYzQ,EAAW9G,EAASwX,GACvC,MAAMvK,EAAQnG,EAAU8L,UAAU,SAC/B7V,KAAKiD,EAAS2G,GAAKA,EAAE4F,OACxBU,EAAM4F,OAAOxK,SACb,MAAMoP,EAAUxK,EAAM6F,QACnB7L,OAAO,KACLX,KAAK,QAAS,QACdmC,KAAKiP,IACVD,EAAQxQ,OAAO,UACVX,KAAK,QAAS,eACnBmR,EAAQxQ,OAAO,KACVX,KAAK,QAAS,gBACdA,KAAK,0BAA2B+Q,GAAW,MAAMC,GAAY,MAClEG,EAAQxQ,OAAO,QACVX,KAAK,QAAS,cACdA,KAAK,IAAK,GACVA,KAAK,cAAe,UACzB,MAAMqR,EAASF,EAAQG,MAAM3K,GACzBuK,EACFG,EAAO7P,OAAO,iBAAiBgB,KAAKnC,GAAKA,EAAE6F,WAE3CmL,EAAO7P,OAAO,iBAAiBA,OAAO,OAAOO,SAKjD,SAASwP,GAAY/Q,EAAW9G,GAC9B,MAAMgN,EAAQlG,EAAU8L,UAAU,SAC/B7V,KAAKiD,EAAS2G,MAAQA,EAAEuH,UAAUvH,EAAExM,UACvC6S,EAAM6F,OAAOxK,SACb,MAAMoP,EAAUzK,EAAM8F,QACnB7L,OAAO,KACLX,KAAK,QAAS,QACnBmR,EAAQxQ,OAAO,QACVX,KAAK,QAAS,aACde,MAAM,SAAU,QAChBA,MAAM,iBAAkB,IAC7BoQ,EAAQxQ,OAAO,QACVX,KAAK,QAAS,cACdA,KAAK,cAAe,UACpB3H,KAAKgI,GAAKA,EAAEuL,QAEjBuF,EAAQhP,KAAKqP,IAIf,SAASC,GAAgBjR,EAAW8D,GAClC9D,EAAU8L,UAAU,SACjBQ,KAAK,SAAUzM,GACd,MAAMqR,EAAQ9R,EAAMG,cAAcuE,EAAM2C,UAA1BrH,CAAqCS,EAAEiE,EAAM2C,UAAUpK,QAC/DsC,EAAOS,EAAMG,cAAcuE,EAAM4C,SAA1BtH,CAAoCS,EAAEiE,EAAM4C,SAASrK,QAC5D8U,EAAa/R,EAAMG,cAAcuE,EAAM0D,eAA1BpI,CAA0CS,EAAEiE,EAAM0D,eAAenL,QACpFnJ,EAAG8N,OAAOC,MAAMD,OAAO,gBAClBxB,KAAK,IAAKb,GACV4B,MAAM,OAAQ2Q,GACnBhe,EAAG8N,OAAOC,MAAMD,OAAO,eAClBnJ,KAAKgI,IACJ,GAA6B,OAAzBiE,EAAM6C,UAAU9O,KAAe,MAAO,GAC1C,MAAMwE,EAAQyH,EAAM7N,KAAKkQ,MAAMlU,OAAOyN,KAAKvN,GAAKA,EAAEG,MAAQwR,EAAM6C,UAAU9O,MAC1E,MAAqB,cAAjBwE,EAAM7J,OACD0D,EAAKtD,UAAUiN,EAAEiE,EAAM6C,UAAU9O,MAAOwE,EAAM+U,WAEhDvR,EAAEiE,EAAM6C,UAAU9O,QAE1B2H,KAAK,YAAasE,EAAM6C,UAAUhI,MAClCa,KAAK,IAAKvM,WAAW0L,GAAQuQ,SAASpL,EAAM6C,UAAUhI,OACtDa,KAAK,aAAcsE,EAAM6C,UAAUpU,QAAU,UAAY,UACzDgO,MAAM,OAAQ4Q,KAKzB,SAASE,GAAgBrR,EAAW8D,GAClC9D,EAAU8L,UAAU,SAAS9K,OAAO,cACjCT,MAAM,eAAgBV,GAAKT,EAAMG,cAAcuE,EAAM4D,UAA1BtI,CAAqCS,EAAEuL,SACrEpL,EAAU8L,UAAU,SAAS9K,OAAO,eACjCxB,KAAK,aAAcsE,EAAM6D,UAAUpV,QAAU,UAAY,UACzDiN,KAAK,YAAasE,EAAM6D,UAAUhJ,MAIvC,SAASiS,GAAiB5Q,GACxBA,EAAUR,KAAK,YAAaK,gBAAkBA,EAAEiJ,MAAMjJ,EAAEkJ,MAI1D,SAASiI,GAAiBhR,GACxBA,EAAUR,KAAK,YAAaK,gBAAkBA,EAAEqL,OAAOrL,EAAEsL,OACzDnL,EAAUgB,OAAO,cACdxB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMK,GAAKA,EAAEgL,GAAKhL,EAAEqL,IACzB1L,KAAK,KAAMK,GAAKA,EAAEiL,GAAKjL,EAAEsL,IAC5BnL,EAAUgB,OAAO,eACdxB,KAAK,IAAKK,IAAMA,EAAEgL,GAAKhL,EAAEqL,IAAM,GAC/B1L,KAAK,IAAKK,IAAMA,EAAEiL,GAAKjL,EAAEsL,IAAM,GAIpC,SAASmG,GAAYtR,EAAW8D,GAC9B9D,EAAUgB,OAAO,aAAaW,KAAKsP,GAAiBnN,GACpD9D,EAAUgB,OAAO,aAAaW,KAAK0P,GAAiBvN,GA8BtD,SAASyN,GAASvR,EAAW8I,EAAGC,GAC9B/I,EAAUR,KAAK,yBAA0BsJ,MAAMC,MAIjD,SAASyI,GAASxR,EAAWkL,EAAIC,EAAIN,EAAIC,GACvC9K,EAAUR,KAAK,yBAA0B0L,MAAOC,MAChDnL,EAAUgB,OAAO,cACdxB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMqL,EAAKK,GAChB1L,KAAK,KAAMsL,EAAKK,GACnBnL,EAAUgB,OAAO,eACdxB,KAAK,KAAMqL,EAAKK,GAAM,GACtB1L,KAAK,KAAMsL,EAAKK,GAAM,WAkCzBsF,YAAAA,GAAaM,YAAAA,GAAaH,iBAAAA,GAAkBI,iBAAAA,GAC5CC,gBAAAA,GAAiBI,gBAAAA,GAAiBC,YAAAA,GAAaG,iBA3EjD,SAA0BzR,EAAW8D,GACnC,MAAM4N,EAAgB5N,EAAM4N,gBACtBC,EAAWD,EAAc3a,OAC3B+M,EAAMqE,oBACRrE,EAAMsE,YAAcuJ,EAAW7N,EAAMoE,sBAEnCpE,EAAMwE,qBACRxE,EAAMyE,aAAeoJ,EAAW7N,EAAMuE,uBAExC,MAAMuJ,EAAgB9N,EAAMyE,gBAAoBzE,EAAM8N,gBACtD5R,EAAUgB,OAAO,aACdW,KAAK8O,GAAaiB,EAAe5N,EAAMsE,aAC1CpI,EAAUgB,OAAO,aACdW,KAAKoP,GAAaa,GACrB5R,EAAU2B,KAAK2P,GAAaxN,GAExBA,EAAMkF,cACRhJ,EAAU2B,KAAKmC,EAAMkF,cAEnBlF,EAAMmF,cACRjJ,EAAUgB,OAAO,aAAa8K,UAAU,SACrCnK,KAAKmC,EAAMmF,eAuDhB4I,KAhCF,SAAc7R,EAAWkB,EAAM4H,EAAGC,GAChC,MAAMN,EAAIvV,EAAG8N,OAAOE,GAAMS,KAAK4P,GAAUzI,EAAGC,GAAG+I,QAC/C9R,EAAUgB,OAAO,aACd8K,UAAU,SACV5O,OAAO2C,GAAK4I,EAAEC,UAAUxW,IAAIC,GAAKA,EAAE,IAAIQ,SAASkN,EAAE8I,MAClD2D,KAAK,SAAUzM,GACV4I,EAAEhD,QAAU5F,EAAEuH,OAAO3B,OAASgD,EAAEhD,QAAU5F,EAAEuH,OAC9ClU,EAAG8N,OAAOC,MAAMU,KAAK6P,GAAU1I,EAAGC,EAAGlJ,EAAEgL,GAAIhL,EAAEiL,IACpCrC,EAAEhD,QAAU5F,EAAExM,OAAOoS,OAASgD,EAAEhD,QAAU5F,EAAExM,QACrDH,EAAG8N,OAAOC,MAAMU,KAAK6P,GAAU3R,EAAEqL,GAAIrL,EAAEsL,GAAIrC,EAAGC,MAuB9CF,UAjBR,SAAmB7I,EAAW6K,EAAIC,EAAIC,GACpC/K,EAAUgB,OAAO,aACdxB,KAAK,yBAA0BqL,MAAOC,YAAaC,OAerCgH,cAXnB,SAAuB/R,EAAW+F,EAAOC,GACvChG,EAAUR,KAAK,iBAAkBuG,KAASC,KAC1ChG,EAAUgB,OAAO,qBACdxB,KAAK,QAASuG,GACdvG,KAAK,SAAUwG,KC1KpB,SAASgM,GAAOhS,EAAW8D,GACzB,MAAMmO,EAAOjS,EAAUkB,OACvB4C,EAAMoO,WAAWD,EAAKE,YAAaF,EAAKG,cACxCpS,EAAUgB,OAAO,YACdW,KAAK0Q,GAAUN,cAAeE,EAAKE,YAAaF,EAAKG,sBA0DxDE,iBAzEF,SAA0BtS,EAAW8D,GACnC9D,EACGO,MAAM,QAAS,QACfA,MAAM,SAAU,QACnBP,EAAUgB,OAAO,YAAYO,SAC7BvB,EAAUG,OAAO,OACdD,QAAQ,WAAW,GACtBF,EAAU2B,KAAKqQ,GAAQlO,IAkELkO,OAAAA,GAAQO,YAtD5B,SAAqBvS,EAAW8D,GAC9B9D,EACGR,KAAK,sBAAuB,iBAC5BA,KAAK,iBAAkB,OACvBA,KAAK,iBAAkBsE,EAAMqG,QAAQH,SAASlG,EAAMqG,QAAQF,UAC5D1J,MAAM,QAAS,QACfA,MAAM,SAAU,QAGnBP,EAAUgB,OAAO,qBAAqBO,SACtCvB,EAAUgB,OAAO,aAAaO,SAG9BvB,EAAUG,OAAO,QACZD,QAAQ,oBAAoB,GAC5BV,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAASsE,EAAMqG,QAAQH,OAC5BxK,KAAK,SAAUsE,EAAMqG,QAAQF,QAC7BzK,KAAK,OAAQ,WACbA,KAAK,eAAgB,GACrBA,KAAK,SAAU,WACpB,MAAMnD,EAAQ2D,EAAUG,OAAO,KAC1BD,QAAQ,YAAY,GACpBK,MAAM,UAAW,MACtBlE,EAAMmW,aACDC,SAAS,KACTlS,MAAM,UAAW,GACtB,MAAM2F,EAAQ7J,EAAM8D,OAAO,KAAKD,QAAQ,YAAY,GAC9CiG,EAAQ9J,EAAM8D,OAAO,KAAKD,QAAQ,YAAY,GAGpD4D,EAAMoF,wBAA0B,MAC9BlJ,EAAU2B,KAAK0Q,GAAUZ,iBAAkB3N,KAE7CA,EAAMqF,mBAAqB,MACzBhD,EAAMxE,KAAK0Q,GAAU5B,YAAa3M,EAAM4N,mBAE1C5N,EAAMsF,mBAAqB,MACzBlD,EAAMvE,KAAK0Q,GAAUtB,YAAajN,EAAM8N,mBAE1C9N,EAAMuF,uBAAyB,MAC7BlD,EAAMxE,KAAK0Q,GAAUpB,gBAAiBnN,KAExCA,EAAMwF,uBAAyB,MAC7BpD,EAAMvE,KAAK0Q,GAAUhB,gBAAiBvN,KAIxC9D,EAAU2B,KAAK0Q,GAAUZ,iBAAkB3N,KClE7C,SAASmF,GAAajJ,EAAW8D,GAC/B,OAAO5Q,EAAGwf,OACP3R,GAAG,OAAQ,WACVf,EAAU2B,KAAK0Q,GAAUR,KAAM5Q,KAAM/N,EAAGyG,MAAMmP,EAAG5V,EAAGyG,MAAMoP,KAE3DhI,GAAG,MAAO,SAAUlB,GACnBiE,EAAM6O,UAAU9S,EAAE4F,MAAOvS,EAAGyG,MAAMmP,EAAG5V,EAAGyG,MAAMoP,KAKpD,SAASC,GAAahJ,EAAW8D,GAC/B,OAAO5Q,EAAG0f,OACP7R,GAAG,OAAQ,WACV,MAAMgM,EAAI7Z,EAAGyG,MAAMkP,UAGnB,GAFA7I,EAAU2B,KAAK0Q,GAAUxJ,UAAWkE,EAAEjE,EAAGiE,EAAEhE,EAAGgE,EAAEhP,IAE3C+F,EAAMsE,YAAa,CACtB,MAAMoF,EAAI1J,EAAMwG,cACVuI,EAAS9F,EAAEjE,EAAI0E,EAAE1E,EAAI,IAAMiE,EAAEjE,EAAI0E,EAAE1E,EAAI,GACvCgK,EAAS/F,EAAEhE,EAAIyE,EAAEzE,EAAI,IAAMgE,EAAEhE,EAAIyE,EAAEzE,EAAI,GACvCgK,EAAShG,EAAEhP,EAAIyP,EAAEzP,GACnB8U,GAAUC,IAAWC,KACvBjP,EAAMkP,aAAajG,EAAEjE,EAAGiE,EAAEhE,EAAGgE,EAAEhP,GAC/B+F,EAAMwG,eAAiBxB,EAAGiE,EAAEjE,EAAGC,EAAGgE,EAAEhE,EAAGhL,EAAGgP,EAAEhP,GAC5CiC,EACG2B,KAAK0Q,GAAUZ,iBAAkB3N,OAIzC/C,GAAG,MAAO,WACT,MAAMgM,EAAI7Z,EAAGyG,MAAMkP,UACnB/E,EAAMkP,aAAajG,EAAEjE,EAAGiE,EAAEhE,EAAGgE,EAAEhP,GAC/B+F,EAAMwG,eAAiBxB,EAAGiE,EAAEjE,EAAGC,EAAGgE,EAAEhE,EAAGhL,EAAGgP,EAAEhP,GAC5CiC,EACG2B,KAAK0Q,GAAUZ,iBAAkB3N,KA2B1C,SAASmP,GAAIjT,EAAW8D,GACtB,MAAMqG,EAAUnK,EAAUgB,OAAO,qBAAqBE,OAAOgS,UACvDC,EAAehJ,EAAQpE,MAAQoE,EAAQnE,OACvCoN,EAAiBtP,EAAMuG,SAASJ,OAASnG,EAAMuG,SAASN,IACxDsJ,EAAgBvP,EAAMuG,SAASL,MAAQlG,EAAMuG,SAASH,KAEtD9K,EAAQ+T,GADQE,EAAgBD,EAElCjJ,EAAQnE,OAASoN,EACjBjJ,EAAQpE,MAAQsN,EACdxI,GAAM/G,EAAMuG,SAASH,KAAO9K,EAC5B0L,GAAMhH,EAAMuG,SAASN,IAAM3K,EACjC0E,EAAMkP,aAAanI,EAAIC,EAAI1L,GAC3BY,EACK2B,KAAK0Q,GAAUZ,iBAAkB3N,GACjCnC,KAAK0Q,GAAUxJ,UAAWgC,EAAIC,EAAI1L,GAClCuC,KACCzO,EAAG0f,OAAO/J,UACV3V,EAAGogB,aAAaC,UAAU1I,EAAIC,GAAI1L,MAAMA,YAM9C6J,aAAAA,GAAcD,aAAAA,GAAcwK,eA7C9B,SAAwBxT,EAAW8D,GACjCA,EAAMkF,aAAeA,GAAahJ,EAAW8D,GAC7CA,EAAMmF,aAAeA,GAAajJ,EAAW8D,GAC7C9D,EAAU2B,KAAKmC,EAAMkF,cACrBhJ,EAAUgB,OAAO,aACd8K,UAAU,SACRnK,KAAKmC,EAAMmF,cAChBnF,EAAM0F,YAAc,MAClBxJ,EAAU2B,KAAKsR,GAAKnP,KAGtB,MAAMiJ,EAAIjJ,EAAM+E,UAChB7I,EACK2B,KAAK0Q,GAAUxJ,UAAWkE,EAAEjE,EAAGiE,EAAEhE,EAAGgE,EAAEhP,GACtC4D,KACCzO,EAAG0f,OAAO/J,UACV3V,EAAGogB,aAAaC,UAAUxG,EAAEjE,EAAGiE,EAAEhE,GAAG3J,MAAM2N,EAAEhP,KA6BNkV,IAAAA,ICzC9C,SAASQ,GAAIzT,EAAW8O,EAAYhL,GAClC,MAAM+D,EAAS/D,EAAMqC,MAAMjU,IAAIC,KAAO2W,EAAG3W,EAAE2W,EAAGC,EAAG5W,EAAE4W,KACnDjF,EAAM0G,aAAa3C,GACnB7H,EACG2B,KAAK0Q,GAAUZ,iBAAkB3N,GAItC,SAAS4P,GAAM1T,EAAW8O,EAAYhL,GACpCgL,EAAWC,MAAM,GAAG4E,OACpB3T,EAAUgB,OAAO,aAAa8K,UAAU,SACrCQ,KAAKzM,IACJA,EAAE+T,GAAK/T,EAAEiJ,EACTjJ,EAAEgU,GAAKhU,EAAEkJ,IAEbjF,EAAMmF,aAAe6K,GAAY7K,aAAajJ,EAAW8D,GACzD9D,EAAU2B,KAAK8R,GAAK3E,EAAYhL,GAIlC,SAASiQ,GAAQ/T,EAAW8O,EAAYhL,GACtC9D,EAAUgB,OAAO,aAAa8K,UAAU,SACrCQ,KAAKzM,IACJA,EAAE+T,GAAK,KACP/T,EAAEgU,GAAK,OAEX/P,EAAMmF,aA3CR,SAA2BjJ,EAAW8O,EAAYhL,GAChD,OAAO5Q,EAAGwf,OACP3R,GAAG,QAAS,KACN7N,EAAGyG,MAAMqa,QAAQhU,EAAU2B,KAAKsS,GAAOnF,EAAYhL,KAEzD/C,GAAG,OAAQlB,IACVA,EAAE+T,GAAK1gB,EAAGyG,MAAMmP,EAChBjJ,EAAEgU,GAAK3gB,EAAGyG,MAAMoP,IAEjBhI,GAAG,MAAOlB,IACJ3M,EAAGyG,MAAMqa,QAAQlF,EAAWoF,YAAY,GAC7CrU,EAAE+T,GAAK,KACP/T,EAAEgU,GAAK,OA+BUM,CAAkBnU,EAAW8O,EAAYhL,GAG9D,MAAM+D,EAAS/D,EAAMqC,MAAMjU,IAAIC,KAAO2W,EAAG3W,EAAE2W,EAAGC,EAAG5W,EAAE4W,KACnDjF,EAAM0G,aAAa3C,GACnB7H,EACG2B,KAAK0Q,GAAUZ,iBAAkB3N,GAItC,SAASmQ,GAAMjU,EAAW8O,EAAYhL,GACpC9D,EAAU2B,KAAKoS,GAASjF,EAAYhL,GACpCgL,EAAWC,MAAM,IAAKqF,UAIxB,SAASA,GAAQpU,EAAW8O,EAAYhL,GACtC9D,EAAU2B,KAAKoS,GAASjF,EAAYhL,GACpCgL,EAAWC,MAAM,GAAGqF,UAItB,SAASC,GAASrU,EAAW8O,EAAYhL,GACvC,MAAMwQ,EAAaxQ,EAAMoC,MACtBhJ,OAAO/K,GAAKA,EAAEiZ,QAAUtH,EAAMkD,kBACjC8H,EAAW3I,MAAMrC,EAAMqC,OACpBoO,MAAM,QAAQC,MAAMF,WAyCvBG,gBAxIF,SAAyB1O,EAAOC,GAC9B,OAAO9S,EAAGuhB,kBACPF,MAAM,OACLrhB,EAAGwhB,YAAY9b,GAAGiH,GAAKA,EAAE4F,OACtBkP,SAAS,IACTC,SAAS,IACbL,MAAM,SACLrhB,EAAG2hB,gBACAD,UAAU,KACVE,YAAY,IACZC,YAAY,MAChBR,MAAM,UACLrhB,EAAG8hB,eACAC,OAAO,KACXV,MAAM,SACLrhB,EAAGgiB,YAAYnP,EAAQ,EAAGC,EAAS,IACpCuO,MAAM,IACLrhB,EAAGiiB,SACAP,SAAS,OACbL,MAAM,IACLrhB,EAAGkiB,SACAR,SAAS,OACbjB,QAkHc0B,SArCnB,SAAkBrV,EAAW8O,EAAYhL,GACvCgL,EACG/N,GAAG,OAAQ,KACVf,EAAUgB,OAAO,aAAa8K,UAAU,SACrCnK,KAAK0Q,GAAUzB,kBAClB,MAAM/I,EAAS/D,EAAMqC,MAAMjU,IAAIC,KAAO2W,EAAG3W,EAAE2W,EAAGC,EAAG5W,EAAE4W,KACnDjF,EAAM0G,aAAa3C,GACnB7H,EAAUgB,OAAO,aAAa8K,UAAU,SACrCnK,KAAK0Q,GAAUrB,kBAClBlN,EAAM+F,aAAaiF,KAEpB/N,GAAG,MAAO,KACTf,EAAU2B,KAAK8R,GAAK3E,EAAYhL,GAChCA,EAAM+F,aAAaiF,KAEvBhL,EAAM2F,iBAAmB,MACvBzJ,EAAU2B,KAAK0S,GAAUvF,EAAYhL,KAEvCA,EAAM4F,cAAgB,MACpB1J,EAAU2B,KAAK+R,GAAO5E,EAAYhL,KAEpCA,EAAM6F,cAAgB,MACpB3J,EAAU2B,KAAKsS,GAAOnF,EAAYhL,KAEpCA,EAAM8F,gBAAkB,MACtB5J,EAAU2B,KAAKyS,GAAStF,EAAYhL,KAEtCA,EAAM2F,mBACF3F,EAAMyG,iBACRvK,EAAU2B,KAAKyS,GAAStF,EAAYhL,GAEpC9D,EAAU2B,KAAK+R,GAAO5E,EAAYhL,IAMT4P,MAAAA,GAAOO,MAAAA,GAAOG,QAAAA,ICvH3C,SAASkB,GAAS1f,GAChB,OAAOlB,EAAIiB,YAAYC,GACpBY,KAAK0P,GACGxR,EAAIiB,YAAYuQ,EAAMrN,UAAUsN,OACpC3P,KAAK2P,KACID,MAAOA,EAAOC,MAAOA,MAMvC,SAASoP,GAAItf,GAEX,MAEM6N,EAAQ,IAAIkE,EAAa/R,EAFjB,KACC,MAET6Y,EAAayF,GAAME,gBAHX,KACC,MAGDvhB,EAAG8N,OAAO,aACnBW,KAAK1G,GAAKqX,iBAAkBxO,GAC3B9C,OAAO,YACRW,KAAK1G,GAAKsX,YAAazO,GACvBnC,KAAKmS,GAAYN,eAAgB1P,GACjCnC,KAAK4S,GAAMc,SAAUvG,EAAYhL,GACtC5Q,EAAG8N,OAAO,eACLW,KAAK6T,GAAQpF,WAAYtM,GAG9BnQ,OAAO8hB,SAAW,KAChBviB,EAAG8N,OAAO,aAAaW,KAAK1G,GAAK+W,OAAQlO,IAG3C,MAAM4R,EAAUxiB,EAAG8N,OAAO,YAC1B0U,EAAQ5J,UAAU,cAAcvK,SAEhC,MAAMoU,EAAOD,EAAQvV,OAAO,OACvBwB,KAAKjB,EAAOD,mBAAoB,UAAW,UAAW,iBACtDO,OAAO,kBACZ2U,EAAKxV,OAAO,KAAKwB,KAAKiU,EAAgBnS,UACtCkS,EAAKxV,OAAO,KAAKwB,KAAKkU,EAAapS,UACnCkS,EAAKxV,OAAO,KACPwB,KAAKjB,EAAOC,iBAAkB,OAAQ,QACtCI,GAAG,QAAS,WACX,GAAI+C,EAAM7N,KAAKiQ,MAAMtQ,QACnB,OAAOlB,EAAI0B,WAAW0N,EAAM7N,KAAKiQ,MAAMtQ,QAASmD,IAC9CA,EAAKH,GAAK1C,EAAKhC,SACf6E,EAAK1G,KAAOyR,EAAM7N,KAAKiQ,MAAM7T,KAC7B0G,EAAKwN,SAAWzC,EAAMyC,aAEvB/P,KAAK,IAAMf,QAAQ6C,KAAK,mBACpB,CACL,MAAMrC,EAAO6N,EAAMgS,SACnB,OAAOphB,EAAIsB,QAAQC,EAAKkQ,OACrB3P,KAAKZ,IACJK,EAAKiQ,MAAMrN,UAAUsN,MAAQvQ,EACtBlB,EAAIsB,QAAQC,EAAKiQ,SAEzB1P,KAAKZ,IACJjC,OAAOC,4BAA8BgC,SAIjD+f,EAAKxV,OAAO,KACPwB,KAAKjB,EAAOC,iBAAkB,iBAAkB,UAChDI,GAAG,QAAS,KACX,MAAM9K,EAAO6N,EAAMgS,gBAEZ7f,EAAKkQ,MAAMvQ,eACXK,EAAKiQ,MAAMtQ,eACXK,EAAKiQ,MAAMrN,UAAUsN,MAC5B4P,EAAMra,aAAazF,EAAMA,EAAKiQ,MAAM7T,QAEtCyR,EAAM7N,KAAKkQ,MAAMvQ,SAEnB8f,EAAQvV,OAAO,KACVwB,KAAKjB,EAAOL,eAAgB,QAAS,oBAAqB,cAC1Db,KAAK,2BAA4BsE,EAAM7N,KAAKkQ,MAAMvQ,WAClD4J,KAAK,SAAU,UAGtBkW,EAAQvV,OAAO,KACVwB,KAAKjB,EAAOL,eAAgB,YAAa,oBAAqB,WAC9Db,KAAK,OAAQ,kBACbA,KAAK,SAAU,WAEH,UAAW,SAAS7M,SAASmR,EAAM7N,KAAKiQ,MAAM7O,UAE7Dqe,EAAQvV,OAAO,KACVwB,KAAKjB,EAAOL,eAAgB,UAAW,oBAAqB,gBAC5DU,GAAG,QAAS,WACXiV,EAAKtd,cAAcoL,EAAM7N,KAAKiQ,MAAMtQ,SACjCY,KAAK,IAAM8e,GAASxR,EAAM7N,KAAKiQ,MAAMtQ,UACrCY,KAAK+e,MAEdG,EAAQvV,OAAO,KACVwB,KAAKjB,EAAOL,eAAgB,mBAAoB,UAAW,eAC3Db,KAAK,cAAe,SACpBA,KAAK,cAAe,iBACzBkW,EAAQvV,OAAO,QACVD,QAAQ,YAAY,GACtBC,OAAO,YACLX,KAAK,MAAO,KACZA,KAAK,QAASsE,EAAM7N,KAAKiQ,MAAMlN,UAC/BnB,QAAQiM,EAAM7N,KAAKiQ,MAAMlN,cAEhC0c,EAAQvV,OAAO,QACZD,QAAQ,SAAS,GACjBrI,KAAKiM,EAAM7N,KAAKiQ,MAAM7T,MACzBqjB,EAAQvV,OAAO,QACVD,QAAQ,UAAU,GAClBrI,SAASiM,EAAM7N,KAAKiQ,MAAM7O,YAAYyM,EAAM7N,KAAKiQ,MAAMhN,QAAQnC,iCAAiC+M,EAAM7N,KAAKiQ,MAAMjN,kBAGtH,MAAMgd,EAAU/iB,EAAG8N,OAAO,YAC1BiV,EAAQnK,UAAU,OAAOvK,SACzB0U,EAAQ9V,OAAO,OACVD,QAAQ,cAAc,GACtByB,KAAKiU,EAAgB1d,MAC1B+d,EAAQ9V,OAAO,OACVD,QAAQ,WAAW,GACnByB,KAAKkU,EAAa3d,KAAM4L,EAAM7N,KAAKiQ,MAAM7T,MAC9C4jB,EAAQ9V,OAAO,OACVwB,KACCgC,EAAMnC,cAAe,eACrB,wDAEDT,GAAG,SAAU,WACZiV,EAAKtd,cAAcoL,EAAM7N,KAAKiQ,MAAMtQ,QAAS,SAC1CY,KAAK,IAAM8e,GAASxR,EAAM7N,KAAKiQ,MAAMtQ,UACrCY,KAAK+e,MAMhB,SAASW,EAAUpS,GAEjB5Q,EAAG8N,OAAO,SAASnJ,KAAKiM,EAAM7N,KAAKiQ,MAAM7T,MACzCa,EAAG8N,OAAO,YAAYA,OAAO,UAAUnJ,KAAKiM,EAAM7N,KAAKiQ,MAAM7T,MAE7D,MAAM4jB,EAAU/iB,EAAG8N,OAAO,YAE1BiV,EAAQjV,OAAO,YACVW,KAAKkU,EAAahS,WAAYC,GAC9B/C,GAAG,SAAU,WACZ+C,EAAM7N,KAAKiQ,MAAM7T,KAAOwjB,EAAahjB,MAAMK,EAAG8N,OAAOC,OACrDiV,EAAUpS,KAGhBmS,EAAQjV,OAAO,eACVD,GAAG,SAAU,WACZ,MAAMlO,EAAQ+iB,EAAgB/iB,MAAMK,EAAG8N,OAAOC,OACxCkV,EAAUrS,EAAM7N,KAAKkQ,MAAMjN,QAAQhH,IAAIC,GAAKA,EAAEsT,OAC9CS,EAAQpC,EAAM7N,KAAKiQ,MAAMhN,QAC5BgE,OAAO/K,GAAKA,EAAEiZ,QAAUtH,EAAMkD,kBAC3BoP,EAAO7K,EAAUF,mBACrB8K,EAASjQ,GAAQtC,QAAS/Q,EAAM+Q,UAE5B7H,GACJzJ,IAAK,QACL+J,MAAOnG,EAAKlE,yBACRM,IAAKO,EAAMR,KAAMG,OAAQ,YAAa4e,UAAW,OACnD,GACFrV,QAASqa,GAEXC,EAAOpY,MAAM6F,EAAM7N,KAAKkQ,MAAOpK,GAC/B+H,EAAM2C,WACJpK,MAAOxJ,EAAMR,KAAM+M,MAAO,UAAWC,OAAQ,KAC7CT,MAAOQ,EAAMV,gBAAgB,GAAGE,MAChCE,QAASM,EAAMV,gBAAgB,GAAGI,SAEpCwX,EAAE,qBAAqB3S,MAAM,QAC7BzQ,EAAG8N,OAAO,iBAAiBT,MAAM,UAAW,QAC5CgV,GAAIzR,EAAMgS,YA1ChBI,CAAUpS,UAuEVyS,IAxBF,WAEoB5b,SAAS/G,SAAS4iB,SACpB,WAAYC,WAAcA,UAAUC,OADpD,MAEM9gB,EAAUM,EAAKzC,WAAWmF,IAAM,KAChC+d,EAAUzgB,EAAKzC,WAAWG,UAAY,KAC5C,OAAIgC,EAEKogB,EAAKtd,cAAc9C,EAAS,UAChCY,KAAK,IAAM8e,GAAS1f,IACpBY,KAAK+e,IACCoB,EAEFZ,EAAMza,UAAUqb,GACpBngB,KAAK+e,SAERriB,EAAG8N,OAAO,aACPT,MAAM,QAAS,OACf1I,KAAK"}