{"version":3,"file":"main.js","sources":["../src/helper/KArray.js","../src/helper/definition.js","../src/helper/formatValue.js"],"sourcesContent":["\n\nclass KArray extends Array {\n  /**\n   * Return array of object filtered by given unique key\n   */\n  unique(key) {\n    return this.reduce((a, b) => {\n      if (a.find(e => e[key] === b[key]) === undefined) a.push(b);\n      return a;\n    }, new KArray());\n  }\n\n\n  /**\n   * Merge arrays\n   */\n  extend() {\n    return this.reduce((a, b) => {\n      Array.prototype.push.apply(a, b);\n      return a;\n    }, new KArray());\n  }\n\n\n  // Merge arrays(Asynchronous)\n  extendAsync() {\n    return Promise.all(this).then(res => {\n      return res.reduce((a, b) => {\n        Array.prototype.push.apply(a, b);\n        return a;\n      }, new KArray());\n    });\n  }\n\n  toArray() {\n    return new Array(this);\n  }\n\n  toObject() {\n    const obj = {};\n    this.forEach(kv => {\n      obj[kv[0]] = kv[1];\n    });\n    return obj;\n  }\n}\n\nexport default KArray;\n","\n/** @module helper/definition */\n\n\nconst defaultHiddenFields = ['_mw', '_mw_wo_sw', '_logp', '_formula', '_nonH'];\n\n// TODO: timestamp sort\nconst defaultSort = {\n    id: 'text',\n    compound_id: 'text',\n    assay_id: 'text',\n    svg: 'none',\n    json: 'none',\n    plot: 'none',\n    text: 'text',\n    ec50: 'numeric',\n    'active%': 'numeric',\n    'inhibition%': 'numeric',\n    filesize: 'numeric',\n    numeric: 'numeric',\n    count: 'numeric',\n    int: 'numeric',\n    flag: 'numeric',\n    bool: 'numeric',\n    timestamp: 'none',\n    image: 'none',\n    control: 'none',\n    'undefined': 'none'\n};\n\nconst defaultDigit = {\n    id: 'raw',\n    compound_id: 'raw',\n    assay_id: 'raw',\n    svg: 'raw',\n    json: 'raw',\n    plot: 'raw',\n    text: 'raw',\n    ec50: 'scientific',\n    'active%': 'rounded',\n    'inhibition%': 'rounded',\n    filesize: 'si',\n    numeric: 'rounded',\n    count: 'raw',\n    int: 'raw',\n    flag: 'raw',\n    bool: 'raw',\n    timestamp: 'raw',\n    image: 'raw',\n    control: 'raw',\n    'undefined': 'raw'\n};\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = !defaultHiddenFields.includes(e.key);\n    if (!e.hasOwnProperty('sortType')) e.sortType = defaultSort[e.valueType];\n    if (!e.hasOwnProperty('digit')) e.digit = defaultDigit[e.valueType];\n    return e;\n  });\n}\n\nfunction ongoing(data) {\n  return ['running', 'ready'].includes(data.status);\n}\n\n\nexport default {\n  defaultHiddenFields, defaultFieldProperties, ongoing\n};\n","\n/** @module helper/formatValue */\n\nimport d3 from 'd3';\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, type) {\n  const conv = {\n    scientific: \".3e\",\n    si: \".3s\",\n    rounded: \".3r\"\n  };\n  if (type === 'raw') return value;\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(conv[type])(value) : value;\n}\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\nfunction numericAsc(a, b) {\n  const fa = parseFloat(a);\n  const fb = parseFloat(b);\n  if (isNaN(fa) || isNaN(fb)) {\n    return String(b).localeCompare(String(a));\n  }\n  return fb - fa;\n}\n\n\nfunction numericDesc(a, b) {\n  return numericAsc(b, a);\n}\n\n\nfunction textAsc(a, b) {\n  return String(b).localeCompare(String(a));\n}\n\n\nfunction textDesc(a, b) {\n  return textAsc(b, a);\n}\n\n\nexport default {\n  formatNum, partialMatch,\n  numericAsc, numericDesc, textAsc, textDesc\n};\n"],"names":[],"mappings":"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"}