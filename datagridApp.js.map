{"version":3,"file":"datagridApp.js","sources":["../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/common/file.js","../src/common/legacySchema.js","../src/common/mapper.js","../src/common/sw.js","../src/component/button.js","../src/component/modal.js","../src/component/formListBox.js","../src/component/table.js","../src/dialog/fieldConfig.js","../src/common/image.js","../src/datagrid/rowFactory.js","../src/datagrid/state.js","../src/datagrid/component.js","../src/datagrid/view.js","../src/component/formBox.js","../src/datagrid/rowfilter.js","../src/dialog/fieldFetch.js","../src/dialog/fieldFile.js","../src/dialog/fieldInput.js","../src/dialog/formGroup.js","../src/dialog/networkgen.js","../src/dialog/rename.js","../src/datagrid/rowFilter.js","../src/datagrid/sort.js","../src/datagridApp.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction serverStatus() {\n  const response = {};\n  return fetcher.get('server')\n    .then(fetcher.json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => fetcher.get('schema'))\n    .then(fetcher.json)\n    .then(res => {\n      response.schema = res;\n    })\n    .catch(() => {\n      console.info('Server did not respond');\n      response.server = {};\n      response.schema = {\n        resources: [], templates: [], compoundIDPlaceholder: null\n      };\n    })\n    .then(() => response);\n}\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  serverStatus, fetchProgress\n};\n","\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/sw */\n\n\nfunction registerServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker\n      .register('sw.js')\n      .then(reg => {\n        console.info('ServiceWorker registration successful with scope: ', reg.scope);\n      }).catch(err => {\n        console.info('ServiceWorker registration failed: ', err);\n      });\n  } else {\n    console.info('Off-line mode is not supported');\n  }\n}\n\n\nexport default {\n  registerServiceWorker\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon, id) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon, id) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `./assets/icon/${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon, id) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `./assets/icon/${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/table */\n\n// Simple tables\n// use dataGrid.js for interactive and smooth datatable\n\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction render(selection, id, caption, fields, records) {\n  selection\n      .classed('table', true)\n      .classed('table-striped', true)\n      .classed('table-hover', true)\n      .attr('id', id);\n  if (caption) {\n    selection.append('caption').text(caption);\n  }\n  selection.append('thead').append('tr');\n  selection.append('tbody');\n  if (fields) {\n    selection.call(updateHeader, fields, records);\n  }\n}\n\n\nfunction updateHeader(selection, fields, records) {\n  const header = selection.select('thead tr')\n    .selectAll('th')\n      .data(fields);\n  header.exit().remove();\n  header.enter().append('th')\n      .text(d => d.name);\n  if (records) {\n    selection.call(updateContents, records, d => d.key, updateRowFunc(fields));\n  }\n}\n\n\nfunction updateContents(selection, records, keyFunc, rowFactory) {  // TODO: specify key\n  const rows = selection.select('tbody')\n    .selectAll('tr')\n      .data(records, keyFunc);\n  rows.exit().remove();\n  rows.enter().append('tr')\n    .merge(rows)\n      .each(function (d) {\n        d3.select(this).selectAll('td').remove();\n        d3.select(this).call(rowFactory, d);\n      });\n}\n\n\nfunction updateRowFunc(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const value = record[field.key];\n      const cell = selection.append('td')\n        .classed('align-middle', true);\n      if (value === undefined) return;\n      if (field.format === 'd3_format') {\n        cell.text(misc.formatNum(value, field.d3_format));\n      }\n      else if (field.format === 'plot') {\n        cell.text('[plot]');\n      }\n      else if (field.format === 'image') {\n        cell.text('[image]');\n      }\n      else if (field.format === 'control') {\n        cell.call(value);\n      } else {\n        cell.text(value);\n      }\n    });\n  };\n}\n\n\nexport default {\n  render, updateHeader, updateContents\n};\n","\n/** @module dialog/fieldConfig */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldconf-dialog';\nconst title = 'Column setting';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'edittable');\n}\n\n\nfunction updateRowFunc(selection, record) {\n  selection.append('td')\n      .classed('name', true)\n      .text(record.name);\n  selection.append('td')\n      .classed('visible', true)\n    .append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record.visible);\n  const generalFormat = ['text', 'numeric', 'd3_format', 'raw', 'compound_id'];\n  const fs = generalFormat.includes(record.format) ? generalFormat : [record.format];\n  const items = fs.map(e => ({key: e, name: e}));\n  const format = selection.append('td')\n      .classed('format', true);\n  const formatSelect = format.append('select');\n  format.call(lbox.selectBoxItems, items);\n  formatSelect\n      .property('disabled', !generalFormat.includes(record.format))\n      .property('value', record.format);\n  selection.append('td')\n      .classed('d3format', true)\n    .append('input')\n      .attr('size', 10)\n      .property('disabled', record.format === 'd3_format' ? null : true)\n      .property('value', record.d3_format || null);\n  formatSelect\n      .on('change', function () {\n        selection.select('.d3format')\n          .select('input')\n            .property('disabled', this.value !== 'd3_format');\n      });\n}\n\n\nfunction tableRowValue(selection) {\n  const value = {};\n  value.visible = selection.select('.visible')\n    .select('input').property('checked');\n  value.format = selection.select('.format')\n    .select('select').property('value');\n  if (value.format === 'd3_format') {\n    value.d3_format = selection.select('.d3format')\n      .select('input').property('value');\n  }\n  return value;\n}\n\n\nfunction body(selection) {\n  const fields = misc.defaultFieldProperties([\n    {key: 'name', format: 'text'},\n    {key: 'visible', format: 'control'},\n    {key: 'format', format: 'control'},\n    {key: 'd3_format', format: 'control'}\n  ]);\n  selection\n      .call(modal.submitDialog, id, title)\n    .select('.modal-body')\n    .append('table')\n      .classed('field', true)\n      .call(table.render, null, null, fields);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.field')\n      .call(table.updateContents, state.data.fields.slice(), d => d.key, updateRowFunc);\n}\n\n\nfunction value(selection) {\n  const fields = [];\n  selection.select('tbody').selectAll('tr')\n    .each(function (d) {\n      const field = tableRowValue(d3.select(this));\n      field.key = d.key;\n      field.name = d.name;\n      fields.push(field);\n    });\n  return fields;\n}\n\n\nexport default {\n  menuLink, updateRowFunc, body, updateBody, value\n};\n","\n/** @module common/image */\n\nimport vega from 'vega';\n\n\nfunction plotCell(selection, record, field) {\n  new vega.View(vega.parse(record[field.key]))\n    .initialize(selection.node())\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nfunction binaryToDataURI(binary) {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onload = event => {\n      resolve(event.target.result);\n    };\n    reader.readAsDataURL(binary);\n  });\n}\n\n\nexport default {\n  plotCell, plotThumbnail, binaryToDataURI\n};\n","\n/** @module datagrid/rowFactory */\n\nimport {default as misc} from '../common/misc.js';\nimport {default as img} from '../common/image.js';\n\n\nfunction d3Format(selection, record, field) {\n  selection.text(misc.formatNum(record[field.key], field.d3_format));\n}\n\n\nfunction text(selection, record, field) {\n  selection.text(record[field.key]);\n}\n\n\nfunction html(selection, record, field) {\n  selection.html(record[field.key]);\n}\n\n\nfunction compound_id(selection, record, field) {\n  selection.append('a')\n      .attr('href',`profile.html?compound=${record[field.key]}`)\n      .attr('target', '_blank')\n      .text(record[field.key]);\n}\n\n\nfunction image(selection, record, field) {\n  selection.append('img')\n      .attr('width', 180)\n      .attr('height', 180)\n      .attr('src', record[field.key]);\n}\n\nfunction checkbox(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record[field.key])\n      .property('disabled', field.disabled ? record[field.disabled] : false)\n      .on('click', function () {\n        record[field.key] = this.checked;\n      });\n}\n\nfunction textField(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'text')\n      .style('width', '90%')\n      .property('value', record[field.key])\n      .on('change', function () {\n        record[field.key] = this.value;\n      });\n}\n\nfunction call(selection, value) {\n  selection.call(value);\n}\n\n\nconst cellFunc = {\n  numeric: text,\n  text: text,\n  raw: text,\n  d3_format: d3Format,\n  compound_id: compound_id,\n  assay_id: text,\n  list: text,\n  plot: img.plotCell,\n  image: image,\n  checkbox: checkbox,\n  text_field: textField,\n  control: call,\n  svg: html,\n  html: html\n};\n\n\nfunction rowFactory(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const cell = selection.append('div')\n        .classed('dg-cell', true)\n        .classed('align-middle', true)\n        .classed('text-truncate', true)\n        .style('display', 'inline-block')\n        .style('width', `${field.width}%`);\n      if (!record.hasOwnProperty(field.key)) return;\n      cell.call(cellFunc[field.format], record, field);\n    });\n  };\n}\n\n\nexport default {\n  d3Format, text, html, compound_id, image, checkbox, textField, call, rowFactory\n};\n","\n/** @module datagrid/state */\n\nimport _ from 'lodash';\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as factory} from './rowFactory.js';\n\n\nexport default class DatagridState {\n  constructor(data) {\n    this.data = data;\n\n    this.visibleFields = null;\n    this.sortedRecords = null;\n    this.filteredRecords = null;\n\n    // Snapshot\n    const snp = this.data.snapshot || {sortOrder: [], filterText: null};\n    this.sortOrder = snp.sortOrder || [];\n    this.filterText = snp.filterText || null;\n\n    this.defaultColumnHeight = {\n      numeric: 40,\n      text: 40,\n      none: 200\n    };\n    this.scrollBarSpace = 20;\n    this.keyFunc = d => d.index;\n\n    // Size\n    this.rowHeight = null;\n    this.contentWidth = null;\n    this.bodyHeight = null;\n\n    // Viewport\n    this.viewportHeight = null;\n    this.numViewportRows = null;\n    this.previousNumViewportRows = null;\n    this.viewportTop = null;\n    this.previousVieportTop = null;\n    this.viewportBottom = null;\n    this.currentScrollTop = 0;\n\n    this.fixedViewportHeight = null;\n\n    // Event notifier\n    this.updateContentsNotifier = null;\n    this.updateFilterNotifier = null;\n\n    this.rowFactory = () => factory.rowFactory(this.visibleFields);\n\n    // Initialize\n    this.applyData();\n  }\n\n  setViewportSize(height) {\n    this.viewportHeight = this.fixedViewportHeight || height;\n    this.previousNumViewportRows = this.numViewportRows;\n    this.numViewportRows = Math.ceil(this.viewportHeight / this.rowHeight) + 1;\n  }\n\n  setScrollPosition(position) {\n    this.previousViewportTop = this.viewportTop;\n    this.viewportTop = position;\n    this.viewportBottom = Math.min(\n      this.viewportTop + this.numViewportRows, this.filteredRecords.length);\n  }\n\n  setSortOrder(key, order) {\n    const ki  = this.sortOrder.findIndex(e => e.key);\n    const obj = {key: key, order: order};\n    if (ki !== -1) this.sortOrder.splice(ki, 1);\n    this.sortOrder.splice(0, 0, obj);\n    this.applyOrder(key, order);\n  }\n\n  setFilterText(text) {\n    this.filterText = text;\n    this.applyFilter();\n  }\n\n  joinFields(mapping) {\n    mapper.apply(this.data, mapping);\n    this.applyData();\n  }\n\n  applyData() {\n    this.visibleFields = this.data.fields.filter(e => e.visible);\n    const widthfSum = this.visibleFields.reduce((a, c) => a + (c.widthf || 1), 0);\n    this.visibleFields = this.visibleFields.map(e => {\n      const field = {\n        width: (e.widthf || 1) / widthfSum * 100,\n        height: e.height || this.defaultColumnHeight[misc.sortType(e.format)]\n      };\n      return Object.assign(field, e);\n    });\n    this.rowHeight = this.visibleFields\n      .reduce((a, b) => a.height > b.height ? a : b).height;\n    this.applyOrder();\n  }\n\n  applyOrder(key, order) {\n    if (key) {\n      this.sortedRecords = _.orderBy(this.data.records.slice(), [key], [order]);\n    } else {\n      const keys = this.sortOrder.map(e => e.key);\n      const orders = this.sortOrder.map(e => e.order);\n      if (keys) {\n        this.sortedRecords = _.orderBy(this.data.records.slice(), keys, orders);\n      }\n    }\n    this.applyFilter();\n  }\n\n  applyFilter() {\n    if (this.filterText === null) {\n      this.filteredRecords = this.sortedRecords.slice();\n    } else {\n      const fields = this.visibleFields\n        .filter(e => misc.sortType(e.format) !== 'none')\n        .map(e => e.key);\n      this.filteredRecords = this.sortedRecords.filter(row => {\n        return fields.some(f => misc.partialMatch(this.filterText, row[f]));\n      });\n    }\n    this.bodyHeight = this.filteredRecords.length * this.rowHeight;\n  }\n\n  recordsToShow() {\n    return this.filteredRecords.slice(this.viewportTop, this.viewportBottom);\n  }\n\n  export() {\n    this.data.id = misc.uuidv4();\n    return this.data;\n  }\n\n}\n","\n/** @module datagrid/component */\n\nimport d3 from 'd3';\n\n\nfunction updateHeader(selection, state) {\n  const header = selection.select('.dg-header');\n  header.selectAll('.dg-hcell').remove();\n  header.selectAll('.dg-hcell').data(state.visibleFields)\n    .enter().append('div')\n      .classed('dg-hcell', true)\n      .style('display', 'inline-block')\n      .style('width', d => `${d.width}%`)\n      .text(d => d.name);\n  selection\n      .style('width', '100%')\n      .dispatch('resize');\n  const pos = Math.floor(state.currentScrollTop / state.rowHeight);\n  state.setScrollPosition(pos);\n  selection.call(updateRows, state);\n}\n\n\nfunction updateRows(selection, state) {\n  selection.select('.dg-body')\n    .style('height', `${state.bodyHeight}px`);\n  const rows = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(state.recordsToShow(), state.keyFunc);\n  rows.exit().remove();\n  rows.enter()\n    .append('div')\n      .attr('class', 'dg-row')\n      .style('position', 'absolute')\n      .style('width', '100%')\n    .merge(rows)\n      .style('height', `${state.rowHeight}px`)\n      .each(function (d, i) {\n        const rowIndex = state.viewportTop + i;\n        const rowPos = rowIndex * state.rowHeight;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (rowIndex) % 2 === 0);\n        d3.select(this).selectAll('.dg-cell').remove();\n        d3.select(this).call(state.rowFactory(), d, rowIndex);\n      });\n}\n\n\nfunction resizeViewport(selection, state) {\n  selection.select('.dg-viewport').style('height', `${state.viewportHeight}px`);\n}\n\n\nexport default {\n  updateHeader, updateRows, resizeViewport\n};\n","\n/** @module datagrid/view */\n\nimport {default as component} from './component.js';\n\n\nfunction resize(selection, state) {\n  const viewport = selection.select('.dg-viewport');\n  const viewportTop = viewport.node().getBoundingClientRect().top;\n  state.setViewportSize(window.innerHeight - viewportTop - 5);\n  selection.call(component.resizeViewport, state);\n}\n\n\nfunction datagrid(selection, state) {\n  selection.selectAll('div').remove();\n  selection.on('resize', () => selection.call(resize, state));\n  selection.append('div')\n      .classed('dg-header', true);\n  selection.append('div')\n      .classed('dg-viewport', true)\n      .style('overflow-y', 'auto')\n      .on('scroll', function () {\n        const pos = Math.floor(this.scrollTop / state.rowHeight);\n        state.currentScrollTop = this.scrollTop;\n        if (pos !== state.previousViewportTop) {\n          state.setScrollPosition(pos);\n          selection.call(component.updateRows, state);\n        }\n      })\n    .append('div')\n      .classed('dg-body', true)\n      .style('position', 'relative');\n  state.updateContentsNotifier = () => {\n    state.applyData();\n    selection.call(component.updateHeader, state);\n  };\n  state.updateFilterNotifier = value => {\n    state.setFilterText(value);\n    state.setScrollPosition(0);\n    selection.call(component.updateRows, state);\n    selection.select('.dg-viewport').node().scrollTop = 0;\n  };\n  state.updateContentsNotifier();\n}\n\n\nexport default {\n  resize, datagrid\n};\n","\n/** @module component/formBox */\n\n\nimport d3 from 'd3';\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorBox(selection, label, value) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n    .append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .attr('type', 'color');\n  selection\n      .call(updateColorBox, value)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\n\nfunction colorBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  colorBox, updateColorBox, colorBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module datagrid/rowFilter */\n\nimport {default as box} from '../component/formBox.js';\n\n\nfunction setFilter(selection, state) {\n  const searchBox = selection\n      .classed('row', true)\n      .classed('justify-content-end', true)\n    .append('div')\n      .classed('col-5', true)\n      .call(box.textBox, null, 'Search', 40, null);\n  searchBox.select('label').classed('text-right', true);\n  searchBox.select('input')\n    .on('keyup', function () {\n      state.updateFilterNotifier(box.textBoxValue(searchBox));\n    });\n}\n\n\nexport default {\n  setFilter\n};\n","\n/** @module dialog/fieldFetch */\n\nimport _ from 'lodash';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport DatagridState from '../datagrid/state.js';\nimport {default as component} from '../datagrid/component.js';\nimport {default as view} from '../datagrid/view.js';\nimport {default as rowf} from '../datagrid/rowfilter.js';\n\n\nconst id = 'fieldfetch-dialog';\nconst title = 'Append assays';\nlet fdstate = null;\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'addassay');\n}\n\n\nfunction body(selection, schema) {\n  const rsrcs = schema.resources.filter(e => e.domain === 'assay');\n  const assays = _(rsrcs.map(e => e.data)).flatten()\n    .flatMap(rcd => rcd.value_types.map(e => {\n      const copy = Object.assign({}, rcd);\n      copy.value_type = e.key;\n      return copy;\n    }))\n    .value();\n  const data = {\n    fields: misc.defaultFieldProperties([\n      {key: 'check', name: 'Check', format: 'checkbox',\n       widthf: 0.5, height: 40, disabled: 'check_d'},\n      {key: 'assay_id', name: 'Assay ID', format: 'assay_id'},\n      {key: 'name', name: 'Name', format: 'text'},\n      {key: 'value_type', name: 'Value type', format: 'text'},\n      {key: 'tags', name: 'Tags', format: 'list', widthf: 2}\n    ]),\n    records: assays.map(e => {\n      e.check = false;\n      return e;\n    })\n  };\n  const dialog = selection.call(modal.submitDialog, id, title);\n  dialog.select('.modal-dialog').classed('modal-lg', true);\n  fdstate = new DatagridState(data);\n  const body = dialog.select('.modal-body');\n  const filter = body.append('div').classed('fetchd-filter', true);\n  const dg = body.append('div').classed('fetchd-dg', true);\n  dg.call(view.datagrid, fdstate);\n  filter.call(rowf.setFilter, fdstate);\n  fdstate.fixedViewportHeight = 300;\n  dg.call(component.resizeViewport, fdstate);\n}\n\n\nfunction updateBody(selection) {\n  fdstate.data.records.forEach(e => {\n    if (e.check) {\n      e.check_d = true;\n    }\n  });\n  fdstate.updateContentsNotifier();\n}\n\n\nfunction queries(selection, targets, compounds) {\n  return fdstate.data.records\n    .filter(e => e.check && !e.check_d)\n    .map(e => {\n      return {\n        workflow: 'activity',\n        targets: targets,\n        assay_id: e.assay_id,\n        condition: {\n          compounds: compounds,\n          value_types: [e.value_type]\n        }\n      };\n    });\n}\n\n\n\nexport default {\n  menuLink, body, updateBody, queries\n};\n","\n/** @module dialog/fieldFile */\n\nimport {default as mapper} from '../common/mapper.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as himg} from '../common/image.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as table} from '../component/table.js';\n\n\nconst id = 'fieldfile-dialog';\nconst title = 'Append JSON fields';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'addfile');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const fileInput = dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'fieldfile-file', 'File', '.json,.csv');\n  const preview = dialog.select('.modal-body').append('div')\n      .classed('preview', true)\n      .call(table.render);\n  fileInput\n      .on('change', () => {\n        const file = box.fileInputBoxValue(fileInput);\n        const isCsv = file.name.split('.').pop() === 'csv';\n        hfile.readFile(file)\n          .then(res => {\n            const mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n            const tbl = mapper.mappingToTable(mapping);\n            preview.call(table.updateHeader, tbl.fields, tbl.records.slice(0, 5));\n          });\n      });\n}\n\n\nfunction readFile(selection) {\n  const file = box.fileInputBoxValue(selection.select('.file'));\n  const isCsv = file.name.split('.').pop() === 'csv';\n  return hfile.readFile(file)\n    .then(res => {\n      let mapping = isCsv ? mapper.csvToMapping(res) : JSON.parse(res);\n      if (mapping.hasOwnProperty('field')) {\n        mapping = mapper.singleToMulti(mapping);\n      }\n      const plotCols = [];\n      mapping.fields.forEach((e, i) => {\n        if (e.format === 'plot') {\n          mapping.fields[i].format = 'image';\n          plotCols.push(i);\n        }\n      });\n      if (plotCols.length > 0) {\n        const ps = [];\n        Object.entries(mapping.mapping).forEach(m => {\n          plotCols.forEach(e => {\n            const p = himg.plotThumbnail(m[1][e])\n              .then(img => {\n                mapping.mapping[m[0]][e] = img;\n              });\n            ps.push(p);\n          });\n        });\n        return Promise.all(ps).then(() => mapping);\n      } else {\n        return mapping;\n      }\n    });\n}\n\n\nexport default {\n  menuLink, body, readFile\n};\n","\n/** @module dialog/fieldInput */\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'fieldinput-dialog';\nconst title = 'Append input field';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'addcheckbox');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  const body = dialog.select('.modal-body');\n  body.append('div')\n      .classed('key', true)\n      .call(box.textBox, null, 'Field key', 40, null);\n  const options = [\n    {key: 'checkbox', name: 'Checkbox'},\n    {key: 'text_field', name: 'Text field'}\n  ];\n  body.append('div')\n      .classed('type', true)\n      .call(lbox.selectBox, null, 'Type', options, 'checkbox');\n\n}\n\n\nfunction updateBody(selection) {\n  selection.select('.key')\n      .call(box.updateTextBox, null);\n  selection.select('.type')\n      .call(lbox.updateSelectBox, 'checkbox');\n}\n\n\nconst defaultValues = {\n  checkbox: false,\n  text_field: ''\n};\n\n\nfunction value(selection) {\n  const key = box.textBoxValue(selection.select('.key'));\n  const type = lbox.selectBoxValue(selection.select('.type'));\n  return {\n    field: {key: key, name: key, format:type},\n    default: defaultValues[type]\n  };\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module dialog/formGroup */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction queryMolGroup(selection, id, resources) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('format', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-format`, 'Format',\n            [\n              {key: 'molfile', name: 'MDL Molfile'},\n              {key: 'dbid', name: 'Compound ID'}\n            ], 'molfile');\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.append('div')\n      .classed('source', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-source`, 'Source', res, null);\n  selection.append('div')\n      .classed('textquery', true)\n      .classed('mb-1', true)\n      .call(box.textBox, `${id}-textquery`, 'Query', null, '');\n  selection.append('div')\n      .classed('areaquery', true)\n      .classed('mb-1', true)\n      .call(box.textareaBox, `${id}-areaquery`, 'Query', 6, null, '');\n  // Popover\n  $(function () {\n    $('[data-toggle=\"popover\"]')\n      .popover({html: true, trigger: 'focus'});\n  });\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('preview', true)\n      .attr('data-toggle', 'popover')\n      .attr('data-html', 'true')\n      .attr('data-content', '<div id=\"previmg\"></div>')\n      .call(button.menuButton, 'Structure preview', 'primary');\n  selection.call(updateQueryMolGroup);\n}\n\nfunction updateQueryMolGroup(selection) {\n  selection.select('.format')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      selection.select('.source')\n        .select('select')\n          .property('disabled', value !== 'dbid');\n      selection.select('.textquery')\n          .property('hidden', value !== 'dbid');\n      selection.select('.areaquery')\n          .property('hidden', value !== 'molfile');\n    })\n    .dispatch('change');\n  selection.select('.preview')\n    .on('click', function () {\n      const query = queryMolGroupValue(selection);\n      return fetcher.get('strprev', query)\n        .then(fetcher.text)\n        .then(res => d3.select('#previmg').html(res), fetcher.error);\n    });\n}\n\nfunction queryMolGroupValue(selection) {\n  const format = lbox.selectBoxValue(selection.select('.format'));\n  const source = lbox.selectBoxValue(selection.select('.source'));\n  const textquery = box.textBoxValue(selection.select('.textquery'));\n  const areaquery = box.textareaBoxLines(selection.select('.areaquery'));\n  return {\n    format: format,\n    source: format === 'dbid' ? source : null,\n    value: format === 'molfile' ? areaquery : textquery\n  };\n}\n\n\nfunction simOptionGroup(selection, id) {\n  selection\n      .classed('mb-3', true)\n    .append('p')\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text('Optional parameters');\n  const collapse = selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true);\n  collapse.append('div')\n      .classed('ignoreh', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, `${id}-ignoreh`, 'Ignore explicit hydrogens', true);\n  collapse.append('div')\n      .classed('timeout', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-timeout`, 'Timeout', 1, 999, 1, 2);\n  collapse.append('div')\n      .classed('diam', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-diam`, 'Diameter (MCS-DR/GLS)', 4, 999, 1, 8);\n  collapse.append('div')\n      .classed('tree', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, `${id}-tree`, 'Max tree size (MCS-DR/GLS)', 20, 999, 1, 40);\n  collapse.selectAll('label.col-form-label')\n      .classed('col-4', false)\n      .classed('col-6', true);\n  collapse.selectAll('input.form-control')\n      .classed('col-8', false)\n      .classed('col-6', true);\n}\n\nfunction simOptionGroupValue(selection) {\n  const timeout = selection.select('.timeout');\n  const diam = selection.select('.diam');\n  const tree = selection.select('.tree');\n  const query = {\n    ignoreHs: box.checkBoxValue(selection.select('.ignoreh'))\n  };\n  if (!timeout.select('input').property('disabled')) {\n    query.timeout = box.numberBoxValue(timeout);\n  }\n  if (!diam.select('input').property('disabled')) {\n    query.diameter = box.numberBoxValue(diam);\n  }\n  if (!tree.select('input').property('disabled')) {\n    query.maxTreeSize = box.numberBoxValue(tree);\n  }\n  return query;\n}\n\n\nexport default {\n  queryMolGroup, updateQueryMolGroup, queryMolGroupValue,\n  simOptionGroup, simOptionGroupValue\n};\n","\n/** @module dialog/networkgen */\n\nimport d3 from 'd3';\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'networkgen-dialog';\nconst title = 'Generate similarity network';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'network');\n}\n\n\nfunction body(selection, rdk) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Similarity measure\n  const measures = [\n    {key: 'gls', name: 'Graph-based local similarity(GLS)'}\n  ];\n  if (rdk) {\n    measures.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    measures.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  dialog.select('.modal-body').append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'networkgen-measure', 'Measure', measures, 'gls');\n  // Threshold\n  dialog.select('.modal-body').append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'networkgen-thld', 'Threshold',\n            0.5, 1, 0.01, 0.5);\n  // Similarity search options\n  dialog.select('.modal-body').append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup, 'networkgen');\n  // Events\n  dialog.select('.measure')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        dialog.selectAll('.diam, .tree')\n          .select('input')\n            .property('disabled', value !== 'gls');\n        dialog.select('.timeout')\n          .select('input')\n            .property('disabled', !['gls', 'rdfmcs'].includes(value));\n      })\n      .dispatch('change');\n}\n\n\nfunction queryParams(selection) {\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  const params = group.simOptionGroupValue(selection.select('.option'));\n  if (!measure.select('select').property('disabled')) {\n    params.measure = lbox.selectBoxValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.numberBoxValue(thld);\n  }\n  return params;\n}\n\n\n\nexport default {\n  menuLink, body, queryParams\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'edittext');\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module datagrid/rowFilter */\n\nimport {default as box} from '../component/formBox.js';\n\n\nfunction setFilter(selection, state) {\n  const searchBox = selection\n      .classed('row', true)\n      .classed('justify-content-end', true)\n    .append('div')\n      .classed('col-5', true)\n      .call(box.textBox, null, 'Search', 40, null);\n  searchBox.select('label').classed('text-right', true);\n  searchBox.select('input')\n    .on('keyup', function () {\n      state.updateFilterNotifier(box.textBoxValue(searchBox));\n    });\n}\n\n\nexport default {\n  setFilter\n};\n","\n/** @module datagrid/sort */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as component} from './component.js';\n\n\nfunction setSort(selection, state) {\n  selection.select('.dg-header').selectAll('.dg-hcell')\n    .filter(d => misc.sortType(d.format) !== 'none')\n    .append('span').append('a')\n      .attr('id', d => `sort-${d.key}`)\n      .text('^v')\n      .style('display', 'inline-block')\n      .style('width', '30px')\n      .style('text-align', 'center')\n    .on('click', d => {\n      const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n      d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n      state.setSortOrder(d.key, isAsc ? 'desc' : 'asc');\n      selection.call(component.updateRows, state);\n    });\n  state.updateContentsNotifier = () => {\n    state.applyData();\n    selection.call(component.updateHeader, state)\n      .call(setSort, state);\n  };\n}\n\n\nexport default {\n  setSort\n};\n","\n/** @module datagridApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from './common/core.js';\nimport {default as fetcher} from './common/fetcher.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as legacy} from './common/legacySchema.js';\nimport {default as mapper} from './common/mapper.js';\nimport {default as misc} from './common/misc.js';\nimport {default as sw} from './common/sw.js';\n\nimport {default as button} from './component/button.js';\nimport {default as modal} from './component/modal.js';\n\nimport {default as fieldConfigDialog} from './dialog/fieldConfig.js';\nimport {default as fieldFetchDialog} from './dialog/fieldFetch.js';\nimport {default as fieldFileDialog} from './dialog/fieldFile.js';\nimport {default as fieldInputDialog} from './dialog/fieldInput.js';\nimport {default as networkgenDialog} from './dialog/networkgen.js';\nimport {default as renameDialog} from './dialog/rename.js';\n\nimport DatagridState from './datagrid/state.js';\nimport {default as rowf} from './datagrid/rowFilter.js';\nimport {default as sort} from './datagrid/sort.js';\nimport {default as view} from './datagrid/view.js';\n\n\nfunction app(data, serverStatus, schema) {\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();  // Clean up\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n\n  const state = new DatagridState(legacy.convertTable(data));\n  state.serverStatus = serverStatus;\n  state.resourceSchema = schema;\n\n  // Datagrid view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, 'Datagrid', 'primary', 'table-white')\n      .select('.dropdown-menu');\n  menu.append('a').call(fieldConfigDialog.menuLink);\n  menu.append('a')\n      .classed('online-command', true)\n      .call(fieldFetchDialog.menuLink);\n  menu.append('a').call(fieldFileDialog.menuLink);\n  menu.append('a').call(fieldInputDialog.menuLink);\n  menu.append('a')\n      .classed('online-command', true)\n      .call(networkgenDialog.menuLink);\n  menu.append('a').call(renameDialog.menuLink);\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Save', 'save')\n      .on('click', function () {\n        if (state.data.storeID) {\n          return idb.updateItem(state.data.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.name;\n            item.fields = state.data.fields;\n            item.records = state.data.records;\n          })\n          .then(() => console.info('Datagrid saved'));\n        } else {\n          return idb.putItem(state.export())\n            .then(storeID => {\n              window.location = `datagrid.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .call(button.dropdownMenuItem, 'Download JSON', 'export')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.storeID;\n        hfile.downloadJSON(data, data.name);\n      });\n  menu.append('a')\n      .classed('online-command', true)\n      .call(button.dropdownMenuItem, 'Download Excel', 'exportexcel')\n      .on('click', () => {\n        const data = state.export();\n        const formData = new FormData();\n        formData.append('contents', new Blob([JSON.stringify(data)]));\n        return fetcher.post('xlsx', formData)\n          .then(fetcher.blob)\n          .then(blob => hfile.downloadDataFile(blob, `${data.name}.xlsx`));\n      });\n  // Open control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, 'Dashboard', 'outline-secondary', 'db-gray')\n      .attr('href', 'dashboard.html')\n      .attr('target', '_blank');\n  // Fetch control\n  menubar.append('a')\n      .classed('refresh', true)\n      .call(button.menuButtonLink, 'Refresh', 'outline-secondary', 'refresh-gray')\n      .on('click', function () {\n        return core.fetchProgress(state.data.storeID)\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => {\n            state.data = item;\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n  menubar.append('a')\n      .classed('abort', true)\n      .call(button.menuButtonLink, 'Abort server job', 'warning', 'delete-gray')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', '#abort-dialog');\n  menubar.append('span').classed('progress', true)\n    .append('progress')\n      .attr('max', 100);\n  menubar.append('span').classed('title', true);\n  menubar.append('span').classed('status', true);\n\n  // Dialogs\n  dialogs.append('div')\n      .classed('fieldconfd', true)\n      .call(fieldConfigDialog.body);\n  dialogs.append('div')\n      .classed('fieldfetchd', true)\n      .call(fieldFetchDialog.body, schema, state.fetchedAssays);\n  dialogs.append('div')\n      .classed('fieldfiled', true)\n      .call(fieldFileDialog.body);\n  dialogs.append('div')\n      .classed('fieldinputd', true)\n      .call(fieldInputDialog.body);\n  dialogs.append('div')\n      .classed('netgend', true)\n      .call(networkgenDialog.body, serverStatus.rdkit);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n\n  // Contents\n  d3.select('#datagrid')\n      .call(view.datagrid, state)\n      .call(sort.setSort, state);\n  d3.select('#dg-search')\n      .call(rowf.setFilter, state);\n\n  // Resize window\n  d3.select('#datagrid').dispatch('resize');\n  window.onresize = () => d3.select('#datagrid').dispatch('resize');\n\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  d3.select('#loading-icon').style('display', 'none');\n\n  // Title\n  d3.select('title').text(state.data.name);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.select('.title').text(state.data.name);\n  menubar.select('.status')\n      .text(`(${state.data.status} - ${state.data.records.length} records found in ${state.data.execTime} sec.)`);\n  menubar.select('.progress').select('progress')\n      .attr('value', state.data.progress)\n      .text(`${state.data.progress}%`);\n\n  // disable on-line commands\n  if (!state.serverStatus.instance) {\n    menubar.selectAll('.online-command')\n      .attr('data-target', null)\n      .classed('disabled', true)\n      .on('click', null);\n  }\n\n  // hide fetch commands\n  const ongoing = ['running', 'ready'].includes(state.data.status);\n  menubar.selectAll('.progress, .refresh, .abort')\n    .style('display', ongoing ? null : 'none');\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.select('.fieldconfd')\n      .call(fieldConfigDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.fields = fieldConfigDialog.value(d3.select(this));\n        state.updateContentsNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.fieldfetchd')\n      .call(fieldFetchDialog.updateBody)\n      .on('submit', function () {\n        const targets = state.resourceSchema.resources\n          .filter(e => e.domain === 'activity').map(e => e.id);\n        const compounds = state.data.records.map(e => e.compound_id);\n        const queries = fieldFetchDialog.queries(d3.select(this), targets, compounds);\n        const futures = queries.map(q => {\n          return fetcher.get(q.workflow, q)\n            .then(fetcher.json)\n            .then(data => {\n              return mapper.tableToMapping(\n                data, 'compound_id', ['index', 'assay_id']);\n            });\n        });\n        Promise.all(futures).then(mps => {\n          mps.forEach(mp => state.joinFields(mp));\n          state.updateContentsNotifier();\n          updateApp(state);\n        });\n      });\n  dialogs.select('.fieldfiled')\n      .on('submit', function () {\n        return fieldFileDialog.readFile(d3.select(this))\n          .then(data => {\n            state.joinFields(data);\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n  dialogs.select('.fieldinputd')\n      .on('submit', function () {\n        const value = fieldInputDialog.value(d3.select(this));\n        const field = misc.defaultFieldProperties([value.field])[0];\n        state.data.fields.push(field);\n        state.data.records.forEach(e => {\n          e[field.key] = value.default;\n        });\n        state.applyData();\n        state.updateContentsNotifier();\n        updateApp(state);\n      });\n  dialogs.select('.netgend')\n      .on('submit', function () {\n        const formData = new FormData();\n        const params = networkgenDialog.queryParams(d3.select(this));\n        formData.append('params', JSON.stringify(params));\n        formData.append('contents', new Blob([JSON.stringify(state.export())]));\n        return fetcher.post(`${params.measure}net`, formData)\n          .then(fetcher.json)\n          .then(data => {\n            data.reference.nodes = state.data.storeID;\n            data.fields = misc.defaultFieldProperties(data.fields);\n            return data;\n          })\n          .then(idb.putItem)\n          .then(storeID => {\n            d3.select('#loading-icon').style('display', 'none');\n            window.open(`network.html?id=${storeID}`, '_blank');\n          });\n      });\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n  });\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.storeID, 'abort')\n          .then(() => idb.getItemByID(state.data.storeID))\n          .then(item => {\n            state.data = item;\n            state.updateContentsNotifier();\n            updateApp(state);\n          });\n      });\n}\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  if (debug) {\n    console.info('Off-line mode is disabled for debugging');\n  } else {\n    sw.registerServiceWorker();\n  }\n  return core.serverStatus()\n    .then(response => {\n      const storeID = misc.URLQuery().id || null;\n      const dataURL = misc.URLQuery().location || null;\n      if (storeID) {\n        // Load from IndexedDB store\n        core.fetchProgress(storeID, 'update')\n          .then(() => idb.getItemByID(storeID))\n          .then(item => app(item, response.server, response.schema));\n      } else if (dataURL) {\n        // Fetch via HTTP\n        hfile.fetchJSON(dataURL)\n          .then(item => app(item, response.server, response.schema));\n      } else {\n        d3.select('#datagrid')\n          .style('color', 'red')\n          .text('ERROR: invalid URL');\n      }\n    });\n}\n\n\nexport default {\n  run\n};\n"],"names":["defaultFieldProperties","fields","map","e","hasOwnProperty","name","key","visible","format","sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","partialMatch","query","target","toString","toUpperCase","indexOf","URLQuery","pairs","window","location","search","substring","split","_","fromPairs","uuidv4","replace","c","r","Math","random","schema","items","idb","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","console","error","getItemByID","storeID","first","deleteItem","delete","putItem","data","misc","put","updateItem","updateFunc","modify","reset","then","baseURL","get","url","q","Object","keys","length","JSON","stringify","fetch","credentials","res","status","Promise","reject","Error","statusText","resolve","json","response","text","blob","post","formdata","method","body","serverStatus","fetcher","server","info","resources","templates","compoundIDPlaceholder","fetchProgress","command","id","reference","workflow","item","progress","execTime","records","readFile","file","sizeLimit","reader","FileReader","truncated","slice","onload","event","result","onerror","readAsArrayBuffer","readAsText","parseJSON","compressed","pako","inflate","to","parse","downloadDataFile","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","downloadJSON","compress","str","gzip","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","columns","sort","dataType","schemaVersion","revision","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","created","startDate","responseDate","v10_nodes","convertTable","forEach","i","index","structure","_structure","_index","v08_nodes","$schema","width","height","convertNetwork","edges","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","column","domain","range","unknown","size","nodeContent","label","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","singleToMulti","mapping","newMapping","entries","m","mappingToTable","mp","keyField","concat","entry","rcd","f","tableToMapping","table","ignore","Date","filter","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","push","line","values","k","Array","apply","fd","uniqBy","registerServiceWorker","navigator","serviceWorker","register","reg","scope","buttonBox","selection","classed","append","attr","menuButton","menuButtonLink","icon","style","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","accept","on","select","this","node","click","dropdownMenuFileValue","files","dialogBase","remove","confirmDialog","message","base","call","footer","dispatch","submitDialog","title","html","selectBoxItems","options","selectAll","d","exit","enter","updateSelectBox","property","checklistBoxItems","listitems","form","updateChecklistBox","each","selectBox","selectBoxValue","checklistBox","checklistBoxValue","updateHeader","updateContents","record","cell","undefined","d3_format","updateRowFunc","keyFunc","rowFactory","rows","merge","render","caption","generalFormat","formatSelect","lbox","menuLink","modal","updateBody","state","tableRowValue","plotCell","vega","View","initialize","run","plotThumbnail","vegaSpec","toImageURL","binaryToDataURI","binary","readAsDataURL","d3Format","compound_id","image","checkbox","disabled","checked","textField","cellFunc","numeric","raw","assay_id","list","plot","img","text_field","control","svg","DatagridState","[object Object]","visibleFields","sortedRecords","filteredRecords","sortOrder","filterText","defaultColumnHeight","none","scrollBarSpace","rowHeight","contentWidth","bodyHeight","viewportHeight","numViewportRows","previousNumViewportRows","viewportTop","previousVieportTop","viewportBottom","currentScrollTop","fixedViewportHeight","updateContentsNotifier","updateFilterNotifier","factory","applyData","ceil","position","previousViewportTop","min","order","ki","findIndex","obj","splice","applyOrder","applyFilter","mapper","widthfSum","reduce","widthf","assign","b","orders","some","updateRows","recordsToShow","rowIndex","rowPos","pos","floor","setScrollPosition","resizeViewport","resize","getBoundingClientRect","top","setViewportSize","innerHeight","component","datagrid","scrollTop","setFilterText","updateTextBox","updateTextareaBox","updateCheckBox","updateNumberBox","updateColorBox","textBox","textBoxValue","readonlyBox","textareaBox","placeholder","textareaBoxValue","textareaBoxLines","checkBox","box","checkBoxValue","numberBox","max","step","numberBoxValue","colorBox","stopPropagation","colorBoxValue","fileInputBox","fileInputBoxValue","setFilter","searchBox","fdstate","rsrcs","assays","flatten","flatMap","value_types","copy","value_type","check","dialog","dg","rowf","check_d","queries","targets","compounds","condition","fileInput","preview","isCsv","pop","hfile","tbl","plotCols","ps","p","himg","all","defaultValues","default","updateQueryMolGroup","queryMolGroupValue","textquery","areaquery","queryMolGroup","$","popover","trigger","simOptionGroup","collapse","simOptionGroupValue","timeout","diam","tree","ignoreHs","diameter","maxTreeSize","rdk","measures","group","queryParams","measure","thld","setSort","isAsc","setSortOrder","app","menubar","dialogs","legacy","resourceSchema","menu","fieldConfigDialog","fieldFetchDialog","fieldFileDialog","fieldInputDialog","networkgenDialog","renameDialog","export","formData","FormData","core","updateApp","fetchedAssays","rdkit","onresize","instance","ongoing","futures","mps","joinFields","open","protocol","onLine","debug","sw","dataURL"],"mappings":"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"}