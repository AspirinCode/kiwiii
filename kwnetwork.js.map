{"version":3,"file":"kwnetwork.js","sources":["../src/common/file.js","../src/common/legacySchema.js","../src/network/component.js","../src/network/view.js","../src/common/mapper.js","../src/component/modal.js","../src/component/formBox.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/formBoxGroup.js","../src/network/controlBox.js","../src/network/interaction.js","../src/network/force.js","../src/network/networkApp.js","../src/common/KArray.js","../src/common/misc.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/core.js","../src/component/button.js","../src/network/state.js","../src/common/scale.js","../src/dialog/community.js","../src/dialog/rename.js","../src/network/communityDetection.js","../src/network.js"],"sourcesContent":["\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const c = compress ? 'c' : 'r';\n  const ext = json.hasOwnProperty('edges') ? `.gf${c}` :  `.nd${c}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\nimport {default as misc} from './misc.js';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: misc.defaultFieldProperties([\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ]),\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nexport default {\n  convertTable, convertNetwork\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke', '#999')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle')\n      .text(d => d.weight);\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  selection.selectAll('.node')\n    .each(function (d) {\n      const color = scale.scaleFunction(state.nodeColor)(d[state.nodeColor.field]);\n      const size = scale.scaleFunction(state.nodeSize)(d[state.nodeSize.field]);\n      const labelColor = scale.scaleFunction(state.nodeLabelColor)(d[state.nodeLabelColor.field]);\n      d3.select(this).select('.node-symbol')\n          .attr('r', size)\n          .style('fill', color);\n      d3.select(this).select('.node-label')\n          .text(d => {\n            if (state.nodeLabel.text === null) return '';\n            const field = state.data.nodes.fields.find(e => e.key === state.nodeLabel.text);\n            if (field.format === 'd3_format') {\n              return misc.formatNum(d[state.nodeLabel.text], field.d3_format);\n            }\n            return d[state.nodeLabel.text];\n          })\n          .attr('font-size', state.nodeLabel.size)\n          .attr('y', parseFloat(size) + parseInt(state.nodeLabel.size))\n          .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n          .style('fill', labelColor);\n    });\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke-width', d => scale.scaleFunction(state.edgeWidth)(d.weight));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .attr('font-size', state.edgeLabel.size);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n  // Rebind event listeners\n  if (state.zoomListener) {\n    selection.call(state.zoomListener);\n  }\n  if (state.dragListener) {\n    selection.select('.nw-nodes').selectAll('.node')\n      .call(state.dragListener);\n  }\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.nw-field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resizeViewBox(selection, width, height) {\n  selection.attr('viewBox', `0 0 ${width} ${height}`);\n  selection.select('.nw-view-boundary')\n    .attr('width', width)\n    .attr('height', height);\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, transform, resizeViewBox\n};\n","\n/** @module network/view */\n\nimport {default as component} from './component.js';\n\n\nfunction networkViewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.nw-view').remove(); // Clean up\n  selection.append('svg')\n    .classed('nw-view', true);\n  selection.call(resize, state);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  state.setViewBox(area.offsetWidth, area.offsetHeight);\n  selection.select('.nw-view')\n    .call(component.resizeViewBox, area.offsetWidth, area.offsetHeight);\n}\n\n\nfunction networkView(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.nw-view-boundary').remove();\n  selection.select('.nw-field').remove();\n\n  // Render\n  selection.append('rect')\n      .classed('nw-view-boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  const field = selection.append('g')\n      .classed('nw-field', true)\n      .style('opacity', 1e-6);\n  field.transition()\n      .duration(1000)\n      .style('opacity', 1);\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Set notifiers\n  state.updateComponentNotifier = () => {\n    selection.call(component.updateComponents, state);\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(component.updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(component.updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(component.updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(component.updateEdgeAttrs, state);\n  };\n\n  // Update graph components\n  selection.call(component.updateComponents, state);\n}\n\n\nexport default {\n  networkViewFrame, resize, networkView\n};\n","\n/** @module common/mapper */\n\nimport KArray from './KArray.js';\nimport {default as misc} from './misc.js';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: misc.defaultFieldProperties([keyField].concat(mp.fields)),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(table.fields\n      .filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key))),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: misc.defaultFieldProperties(fields),\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields = KArray.from(data.fields)\n    .concat(misc.defaultFieldProperties(mp.fields))\n    .unique('key').toArray();\n}\n\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.select('.modal-dialog').remove();  // Clean up\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id, message) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true)\n      .text(message);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('OK')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('data-target', `${id}-submit`)\n      .text('Submit')\n      .on('click', () => {\n        d3.select('#loading-icon').style('display', 'inline');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, submitDialog\n};\n","\n/** @module component/formBox */\n\n\nfunction textBox(selection, id, label, size, value) {  // TODO: remove size\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .attr('size', size);\n  selection.call(updateTextBox, value);\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, id, label, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'text')\n      .property('readonly', true);\n  selection.call(updateTextBox, value);\n}\n\n\nfunction textareaBox(selection, id, label, rows, placeholder, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .attr('id', id);\n  selection.call(updateTextareaBox, value);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, id, label, checked) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox')\n      .attr('id', id);\n  box.append('span')\n      .text(label);\n  selection.call(updateCheckBox, checked);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, id, label, min, max, step, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n  selection.call(updateNumberBox, value);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, id, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .attr('for', id)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept)\n    .attr('id', id);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberBoxValue,\n  fileInputBox, fileInputBoxValue\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, id, label, fields, value) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .attr('for', id)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(selectBoxItems, fields);\n    selection.call(updateSelectBox, value);\n  }\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, id, label, fields, values) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('id', id);\n  if (fields) {\n    selection.call(checklistBoxItems, fields);\n    selection.call(updateChecklistBox, values);\n  }\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-from`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text')\n      .attr('id', `${id}-to`);\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.call(updateRangeBox, range);\n}\n\n\nfunction updateRangeBox(selection, range) {\n  // TODO: validation\n  // not null, undef, text\n  // min <= max\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n}\n\n\nfunction rangeBoxValue(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorScaleBox(selection, id, label, range) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-from`)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-from`);\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-mid`)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-mid`);\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .attr('for', `${id}-to`)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color')\n      .attr('id', `${id}-to`);\n  selection\n      .call(updateColorScaleBox, range)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorScaleBox(selection, range) {\n  let rangeArray;\n  if (range.length == 2) {\n    rangeArray = [range[0], null, range[1]];\n  } else if (range.length == 3) {\n    rangeArray = [range[0], range[1], range[2]];\n  } else {\n    rangeArray = [null, null, null];\n  }\n  selection.select('.min')\n      .property('value', rangeArray[0])\n      .property('disabled', rangeArray[0] === null)\n      .style('opacity', rangeArray[0] === null ? 0.3 : null);\n  selection.select('.mid')\n      .attr('value', rangeArray[1])\n      .property('disabled', rangeArray[1] === null)\n      .style('opacity', rangeArray[1] === null ? 0.3 : null);\n  selection.select('.max')\n      .property('value', rangeArray[2])\n      .property('disabled', rangeArray[2] === null)\n      .style('opacity', rangeArray[2] === null ? 0.3 : null);\n}\n\n\nfunction colorScaleBoxValue(selection) {\n  const arr = [];\n  if (!selection.select('.min').property('disabled')) {\n    arr.push(selection.select('.min').property('value'));\n  }\n  if (!selection.select('.mid').property('disabled')) {\n    arr.push(selection.select('.mid').property('value'));\n  }\n  if (!selection.select('.max').property('disabled')) {\n    arr.push(selection.select('.max').property('value'));\n  }\n  return arr;\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValue,\n  colorScaleBox, updateColorScaleBox, colorScaleBoxValue\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as scaledef} from '../common/scale.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, id, palettes, rangeTypes, range) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('palette', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-palette`, 'Color palette', palettes, 'hoge');\n  selection.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, `${id}-rangetype`, 'Range type', rangeTypes,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      );\n  selection.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorScaleBox, `${id}-range`, 'Range', range);\n  selection.call(updateColorRangeGroup, range);\n}\n\n\nfunction updateColorRangeGroup(selection, range) {\n  selection.select('.palette')\n      .call(\n        lbox.updateSelectBox,\n        scaledef.colorRangeTypes.find(e => e.size === range.length).key\n      )\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const p = scaledef.colorPalettes.find(e => e.key === value);\n        const t = scaledef.colorRangeTypes.find(e => e.size === p.range.length);\n        selection.select('.rangetype').call(lbox.updateSelectBox, t.key);\n        selection.select('.range').call(rbox.updateColorScaleBox, p.range);\n      });\n  selection.select('.rangetype')\n      .on('change', function () {\n        const value = lbox.selectBoxValue(d3.select(this));\n        const size = scaledef.colorRangeTypes.find(e => e.key === value).size;\n        selection.select('.range').select('.min')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n        selection.select('.range').select('.mid')\n            .property('disabled', size !== 3)\n            .style('opacity', size === 3 ? null : 0.3);\n        selection.select('.range').select('.max')\n            .property('disabled', size > 3)\n            .style('opacity', size <= 3 ? null : 0.3);\n      });\n  selection.select('.range')\n      .call(rbox.updateColorScaleBox, range)\n      .on('focusin', () => {\n        selection.dispatch('change');\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const type = lbox.selectBoxValue(selection.select('.rangetype'));\n  const values = rbox.colorScaleBoxValue(selection.select('.range'));\n  if (!values.length) {\n    return scaledef.colorRangeTypes.find(e => e.key === type).range;\n  } else {\n    return values;\n  }\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection, id, presets, scaleTypes, scale, domain) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('preset', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-preset`, 'Scale preset', presets, '');\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, `${id}-scale`, 'Scale type', scaleTypes, scale);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, `${id}-domain`, 'Domain', domain);\n  selection.call(updateScaleBoxGroup, scale, domain);\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.preset')\n    .on('change', function () {\n      const value = lbox.selectBoxValue(d3.select(this));\n      const p = scaledef.presets.find(e => e.key == value);\n      selection.select('.scale').call(lbox.updateSelectBox, p.scale);\n      selection.select('.domain').call(rbox.updateRangeBox, p.domain);\n    });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale)\n      .on('change', () => {\n        selection.select('.domain').dispatch('change');\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('change', function () {\n        const isLog = lbox.selectBoxValue(selection.select('.scale')) === 'log';\n        const domain = rbox.rangeBoxValue(d3.select(this));\n        const invalid = d => isNaN(d) || (isLog && d <= 0);\n        d3.select(this).select('.min')\n            .style('background-color', invalid(domain[0]) ? '#ffcccc' : '#ffffff');\n        d3.select(this).select('.max')\n            .style('background-color', invalid(domain[1]) ? '#ffcccc' : '#ffffff');\n      });\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValue(selection.select('.domain'));\n  return {scale: scale, domain: domain};\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue\n};\n","\n/** @module network/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as scaledef} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as button} from '../component/button.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'fit-to-screen', 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'focused', 'Enable focused view', state.enableFocusedView);\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'overlook', 'Enable overlook view', state.enableOverlookView);\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'thld', 'Network threshold',\n            state.networkThresholdCutoff, 1.000, 0.01, state.networkThreshold);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logd', 'logD', null);\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'stick-nodes', 'Stick nodes', !state.simulationOnLoad);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'restart-force', 'Activate', 'warning');\n\n  selection.call(updateMainControlBox, state);\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Snapshot\n  selection.select('.snapshot')\n      .on('click', function () { state.snapshotNotifier(); });\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  selection.select('.thld')\n      .call(box.updateNumberBox, state.networkThreshold)\n      .on('change', function () {\n        const value = box.numberBoxValue(d3.select(this));\n        state.networkThreshold = value;\n        state.updateComponentNotifier();\n        state.setForceNotifier();\n        const numEdges = state.edges.filter(e => e.weight >= value).length;\n        const n = state.nodes.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        selection.select('.logd').call(box.updateTextBox, logD);\n      })\n      .dispatch('change');\n  // Force layout\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.simulationOnLoad)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        if (value) {\n          state.stickNotifier();\n          selection.select('.progress')\n            .style('background-color', '#a3e4d7');\n        } else {\n          state.relaxNotifier();\n          selection.select('.progress')\n            .style('background-color', '#e9ecef');\n        }\n      });\n  selection.select('.restart')\n      .on('click', function () { state.restartNotifier(); });\n}\n\n\n\nfunction nodeColorControlBox(selection, state) {\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'color-field', 'Field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'color', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'color', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeColor.scale, state.nodeColor.domain\n      );\n\n  selection.call(updateNodeColorControlBox, state);\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeColor.field)\n    .on('change', function () {\n      state.nodeColor.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(group.updateColorRangeGroup, state.nodeColor.range)\n    .on('change', function () {\n      const values = group.colorRangeGroupValue(d3.select(this));\n      state.nodeColor.range = values;\n      if (values.length > 3) {\n        state.nodeColor.scale = 'ordinal';\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', true)\n          .style('opacity', 0.3);\n      } else {\n        selection.select('.scale').selectAll('select,input')\n          .property('disabled', false)\n          .style('opacity', null);\n      }\n      state.updateNodeAttrNotifier();\n    }\n  );\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeColor.scale, state.nodeColor.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeColor.scale = values.scale;\n      state.nodeColor.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeSizeControlBox(selection, state) {\n  selection.append('div')\n    .classed('field', true)\n    .call(\n      lbox.selectBox, 'size-field', 'Field',\n      state.data.nodes.fields.filter(e => misc.sortType(e.format) === 'numeric'),\n      state.nodeSize.field || ''\n    );\n  selection.append('div')\n    .classed('range', true)\n    .classed('mb-3', true)\n    .call(rbox.rangeBox, 'size-range', 'Range', state.nodeSize.range);\n  selection.append('div')\n    .classed('scale', true)\n    .call(\n      group.scaleBoxGroup, 'size',\n      scaledef.presets.filter(e => e.scale !== 'ordinal'),\n      scaledef.types.filter(e => e.key !== 'ordinal'),\n      state.nodeSize.scale, state.nodeSize.domain\n    );\n  selection.call(updateNodeSizeControlBox, state);\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  selection.select('.field')\n    .call(lbox.updateSelectBox, state.nodeSize.field)\n    .on('change', function () {\n      state.nodeSize.field = lbox.selectBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.range')\n    .call(rbox.updateRangeBox, state.nodeSize.range)\n    .on('change', function () {\n      state.nodeSize.range = rbox.rangeBoxValue(d3.select(this));\n      state.updateNodeAttrNotifier();\n    });\n  selection.select('.scale')\n    .call(group.updateScaleBoxGroup, state.nodeSize.scale, state.nodeSize.domain)\n    .on('change', function () {\n      const values = group.scaleBoxGroupValue(d3.select(this));\n      state.nodeSize.scale = values.scale;\n      state.nodeSize.domain = values.domain;\n      state.updateNodeAttrNotifier();\n    }\n  );\n}\n\n\nfunction nodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'label-visible', 'Show node labels', state.nodeLabel.visible);\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'label-text', 'Text field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabel.text || ''\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'label-size', 'Font size', 6, 100, 1, state.nodeLabel.size\n      );\n  // nodeLabelColor\n  selection.append('div')\n      .classed('field', true)\n      .call(\n        lbox.selectBox, 'label-field', 'Color field',\n        state.data.nodes.fields.filter(e => misc.sortType(e.format) !== 'none'),\n        state.nodeLabelColor.field || ''\n      );\n  selection.append('div')\n      .classed('range', true)\n      .call(\n        group.colorRangeGroup, 'label', scaledef.colorPalettes,\n        scaledef.colorRangeTypes, state.nodeLabelColor.range\n      );\n  selection.append('div')\n      .classed('scale', true)\n      .call(\n        group.scaleBoxGroup, 'label', scaledef.presets,\n        scaledef.types.filter(e => e.key !== 'ordinal'),\n        state.nodeLabelColor.scale, state.nodeLabelColor.domain\n      );\n  selection.call(updateNodeLabelControlBox, state);\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, state.nodeLabel.visible)\n      .on('change', function () {\n        state.nodeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabel\n  selection.select('.text')\n      .call(lbox.updateSelectBox, state.nodeLabel.text)\n      .on('change', function () {\n        state.nodeLabel.text = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.nodeLabel.size)\n      .on('change', function () {\n        state.nodeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  // nodeLabelColor\n  selection.select('.field')\n      .call(lbox.updateSelectBox, state.nodeLabelColor.field)\n      .on('change', function () {\n        state.nodeLabelColor.field = lbox.selectBoxValue(d3.select(this));\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, state.nodeLabelColor.range)\n      .on('change', function () {\n        const values = group.colorRangeGroupValue(d3.select(this));\n        state.nodeLabelColor.range = values;\n        if (values.length > 3) {\n          state.nodeLabelColor.scale = 'ordinal';\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', true)\n            .style('opacity', 0.3);\n        } else {\n          state.nodeLabelColor.scale = lbox.selectBoxValue(selection.select('.range'));\n          selection.select('.scale').selectAll('select,input')\n            .property('disabled', false)\n            .style('opacity', null);\n        }\n        state.updateNodeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(\n        group.updateScaleBoxGroup, state.nodeLabelColor.scale,\n        state.nodeLabelColor.domain\n      )\n      .on('change', function () {\n        const values = group.scaleBoxGroupValue(d3.select(this));\n        state.nodeLabelColor.scale = values.scale;\n        state.nodeLabelColor.domain = values.domain;\n        state.updateNodeAttrNotifier();\n      }\n    );\n}\n\n\nfunction edgeControlBox(selection, state) {\n  // edgeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('label', true)\n      .classed('mb-1', true)\n      .call(\n        box.checkBox, 'edge-label-visible', 'Show edge weight label',\n        state.edgeLabel.visible\n      );\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(\n        box.numberBox, 'edge-label-size', 'Weight label font size',\n        6, 100, 1, state.edgeLabel.size\n      );\n  // edgeWidth\n  const widthGroup = selection.append('div')\n      .classed('mb-3', true);\n  widthGroup.append('div')\n      .classed('range', true)\n      .classed('mb-3', true)\n      .call(rbox.rangeBox, 'edge-width-range', 'Range', state.edgeWidth.range);\n  widthGroup.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(\n        lbox.selectBox, 'edge-width-scale', 'Scale type',\n        scaledef.types.filter(e => e.key !== 'ordinal'), state.edgeWidth.scale\n      );\n  widthGroup.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'edge-width-domain', 'Domain', state.edgeWidth.domain);\n}\n\nfunction updateEdgeControlBox(selection, state) {\n  // edgeLabel\n  selection.select('.label')\n      .call(box.updateCheckBox, state.edgeLabel.visible)\n      .on('change', function () {\n        state.edgeLabel.visible = box.checkBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.size')\n      .call(box.updateNumberBox, state.edgeLabel.size)\n      .on('change', function () {\n        state.edgeLabel.size = box.numberBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  // edgeWidth\n  selection.select('.range')\n      .call(rbox.updateRangeBox, state.edgeWidth.range)\n      .on('change', function () {\n        state.edgeWidth.range = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, state.edgeWidth.scale)\n      .on('change', function () {\n        state.edgeWidth.scale = lbox.selectBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, state.edgeWidth.domain)\n      .on('change', function () {\n        state.edgeWidth.domain = rbox.rangeBoxValue(d3.select(this));\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(controlBoxItem, 'control-color')\n      .call(nodeColorControlBox, state);\n\n  // Size\n  tabs.append('a')\n      .call(controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(controlBoxItem, 'control-size')\n      .call(nodeSizeControlBox, state);\n\n  // Label\n  tabs.append('a')\n      .call(controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(controlBoxItem, 'control-label')\n      .call(nodeLabelControlBox, state);\n\n  // Edge\n  tabs.append('a')\n      .call(controlBoxNav, 'control-edge', 'Edge');\n  content.append('div')\n      .classed('control-edge', true)\n      .call(controlBoxItem, 'control-edge')\n      .call(edgeControlBox, state);\n\n  selection.call(updateControlBox, state);\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edge')\n      .call(updateEdgeControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(component.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          selection\n            .call(component.updateComponents, state);\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      selection\n        .call(component.updateComponents, state);\n    });\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  selection.call(state.zoomListener);\n  selection.select('.nw-nodes')\n    .selectAll('.node')\n      .call(state.dragListener);\n  state.fitNotifier = () => {\n    selection.call(fit, state);\n  };\n  // Resume zoom event\n  const t = state.transform;\n  selection\n      .call(component.transform, t.x, t.y, t.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(t.x, t.y).scale(t.k)\n      );\n\n}\n\n\nfunction fit(selection, state) {\n  const viewBox = selection.select('.nw-view-boundary').node().getBBox();\n  const viewBoxRatio = viewBox.width / viewBox.height;\n  const boundaryHeight = state.boundary.bottom - state.boundary.top;\n  const boundaryWidth = state.boundary.right - state.boundary.left;\n  const boundaryRatio = boundaryWidth / boundaryHeight;\n  const scale = viewBoxRatio >= boundaryRatio\n    ? viewBox.height / boundaryHeight\n    : viewBox.width / boundaryWidth;\n  const tx = -state.boundary.left * scale;\n  const ty = -state.boundary.top * scale;\n  state.setTransform(tx, ty, scale);\n  selection\n      .call(component.updateComponents, state)\n      .call(component.transform, tx, ty, scale)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tx, ty).scale(scale)\n      );\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction, fit\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nfunction forceSimulation(width, height) {\n  return d3.forceSimulation()\n    .force('link',\n      d3.forceLink().id(d => d.index)\n        .distance(60)\n        .strength(1))\n    .force('charge',\n      d3.forceManyBody()\n        .strength(-600)\n        .distanceMin(15)\n        .distanceMax(720))\n    .force('collide',\n      d3.forceCollide()\n        .radius(90))\n    .force('center',\n      d3.forceCenter(width / 2, height / 2))\n    .force('x',\n      d3.forceX()\n        .strength(0.002))\n    .force('y',\n      d3.forceY()\n        .strength(0.002))\n    .stop();\n}\n\n\nfunction showTemperature(simulation) {\n  const alpha = simulation.alpha();\n  const isStopped = alpha <= simulation.alphaMin();\n  // TODO: select temperature indicator\n  const progress = parseInt(isStopped ? 0 : alpha * 100);\n  d3.select('#temperature')\n    .classed('bg-success', isStopped)\n    .classed('bg-warning', !isStopped)\n    .style('width', `${progress}%`)\n    .attr('aria-valuenow', progress);\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) selection.call(relax, simulation, state);\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction end(selection, simulation, state) {\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n  showTemperature(simulation);\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  selection.call(end, simulation, state);\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  // Render all nodes and do not render edges\n  // TODO: edge rendering behavior should be changed by data size or setting\n  const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n  state.setAllCoords(coords);\n  selection\n    .call(component.updateComponents, state);\n}\n\n\nfunction relax(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(0.1).restart();\n}\n\n\nfunction restart(selection, simulation, state) {\n  selection.call(unstick, simulation, state);\n  simulation.alpha(1).restart();\n}\n\n\nfunction setForce(selection, simulation, state) {\n  const forceEdges = state.edges\n    .filter(e => e.weight >= state.networkThreshold);\n  simulation.nodes(state.nodes)\n    .force('link').links(forceEdges);\n}\n\nfunction activate(selection, simulation, state) {\n  selection.call(setForce, simulation, state);\n  simulation\n    .on('tick', () => {\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      const coords = state.nodes.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      showTemperature(simulation);\n    })\n    .on('end', () => selection.call(end, simulation, state));\n  state.setForceNotifier = () => {\n    selection.call(setForce, simulation, state);\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(relax, simulation, state);\n  };\n  state.restartNotifier = () => {\n    selection.call(restart, simulation, state);\n  };\n  if (state.simulationOnLoad) {\n    selection.call(restart, simulation, state);\n  } else {\n    selection.call(stick, simulation, state);\n  }\n}\n\n\nexport default {\n  forceSimulation, activate, stick, relax, restart\n};\n","\n/** @module network/networkApp */\n\nimport d3 from 'd3';\n\nimport {default as core} from '../common/core.js';\nimport {default as hfile} from '../common/file.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as mapper} from '../common/mapper.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\n\nimport {default as communityDialog} from '../dialog/community.js';\nimport {default as renameDialog} from '../dialog/rename.js';\n\nimport {default as view} from './view.js';\nimport {default as control} from './controlBox.js';\nimport {default as interaction} from './interaction.js';\nimport {default as force} from './force.js';\nimport {default as community} from './communityDetection.js';\nimport NetworkState from './state.js';\n\n\nfunction getGraph(storeID) {\n  return idb.getItemByID(storeID)\n    .then(edges => {\n      return idb.getItemByID(edges.reference.nodes)\n        .then(nodes => {\n          return {edges: edges, nodes: nodes};\n        });\n    });\n}\n\n\nfunction app(data) {\n  // TODO: define field size according to the data size\n  const width = 1200;\n  const height = 1200;\n  const state = new NetworkState(data, width, height);\n  const simulation = force.forceSimulation(width, height);\n  const frame = d3.select('#nw-frame')\n      .call(view.networkViewFrame, state);\n  frame.select('.nw-view')\n      .call(view.networkView, state)\n      .call(interaction.setInteraction, state)\n      .call(force.activate, simulation, state);\n  d3.select('#nw-control')\n      .call(control.controlBox, state);\n\n  // Resize window\n  window.onresize = () =>\n    d3.select('#nw-frame').call(view.resize, state);\n\n  // Menubar\n  const menubar = d3.select('#menubar');\n  menubar.selectAll('div,span,a').remove();\n  // Network view control\n  const menu = menubar.append('div')\n      .call(button.dropdownMenuButton, null, 'View control', 'primary')\n      .select('.dropdown-menu');\n  menu.append('a')\n      .classed('communityd', true)\n      .call(communityDialog.menuLink);\n  menu.append('a')\n      .classed('renamed', true)\n      .call(renameDialog.menuLink);\n  menu.append('a')\n      .classed('saveview', true)\n      .call(button.dropdownMenuItem, null, 'Save to local storage')\n      .on('click', function () {\n        if (state.data.edges.storeID) {\n          return idb.updateItem(state.data.edges.storeID, item => {\n            item.id = misc.uuidv4();\n            item.name = state.data.edges.name;\n            item.snapshot = state.snapshot();\n          })\n          .then(() => console.info('Snapshot saved'));\n        } else {\n          const data = state.export();\n          return idb.putItem(data.nodes)\n            .then(storeID => {\n              data.edges.reference.nodes = storeID;\n              return idb.putItem(data.edges);\n            })\n            .then(storeID => {\n              window.location = `network.html?id=${storeID}`;\n            });\n        }\n      });\n  menu.append('a')\n      .call(button.dropdownMenuItem, null, 'Export to JSON')\n      .on('click', () => {\n        const data = state.export();\n        // Delete local store information\n        delete data.nodes.storeID;\n        delete data.edges.storeID;\n        delete data.edges.reference.nodes;\n        hfile.downloadJSON(data, data.edges.name);\n      });\n  if (state.data.nodes.storeID) {\n    // Node datagrid link\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Node datagrid', 'outline-secondary')\n        .attr('href', `datagrid.html?id=${state.data.nodes.storeID}`)\n        .attr('target', '_blank');\n  }\n  // Control panel\n  menubar.append('a')\n      .call(button.menuButtonLink, null, 'Control panel', 'outline-secondary')\n      .attr('href', 'control.html')\n      .attr('target', '_blank');\n  // Fetch control\n  const ongoing = ['running', 'ready'].includes(state.data.edges.status);\n  if (ongoing) {\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Refresh', 'outline-secondary')\n        .on('click', function () {\n          core.fetchProgress(state.data.edges.storeID)\n            .then(() => getGraph(state.data.edges.storeID))\n            .then(app);\n        });\n    menubar.append('a')\n        .call(button.menuButtonLink, null, 'Abort server job', 'warning')\n        .attr('data-toggle', 'modal')\n        .attr('data-target', '#abort-dialog');\n    menubar.append('span')\n        .classed('progress', true)\n      .append('progress')\n        .attr('max', 100)\n        .attr('value', state.data.edges.progress)\n        .text(`${state.data.edges.progress}%`);\n  }\n  menubar.append('span')\n    .classed('title', true)\n    .text(state.data.edges.name);\n  menubar.append('span')\n      .classed('status', true)\n      .text(`(${state.data.edges.status} - ${state.data.edges.records.length} connections created in ${state.data.edges.execTime} sec.)`);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.selectAll('div').remove();  // Clean up\n  dialogs.append('div')\n      .classed('communityd', true)\n      .call(communityDialog.body);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body, state.data.edges.name);\n  dialogs.append('div')\n      .classed('abortd', true)\n      .call(\n        modal.confirmDialog, 'abort-dialog',\n        'Are you sure you want to abort this calculation job?'\n      );\n  updateApp(state);\n}\n\n\nfunction updateApp(state) {\n  // Title\n  d3.select('title').text(state.data.edges.name);\n  d3.select('#menubar').select('.title').text(state.data.edges.name);\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  // Rename dialog\n  dialogs.select('.renamed')\n      .call(renameDialog.updateBody, state)\n      .on('submit', function () {\n        state.data.edges.name = renameDialog.value(d3.select(this));\n        updateApp(state);\n      });\n  // Abort dialog\n  dialogs.select('.abortd')\n      .on('submit', function () {\n        core.fetchProgress(state.data.edges.storeID, 'abort')\n          .then(() => getGraph(state.data.edges.storeID))\n          .then(app);\n      });\n  // Community dialog\n  dialogs.select('.communityd')\n      .on('submit', function () {\n        const value = communityDialog.value(d3.select(this));\n        const nodeIds = state.data.nodes.records.map(e => e.index);\n        const edges = state.data.edges.records\n          .filter(e => e.weight >= state.networkThreshold);\n        const comm = community.communityDetection(\n          nodeIds, edges, {nulliso: value.nulliso}\n        );\n        const mapping = {\n          key: 'index',\n          field: misc.defaultFieldProperties(\n            [{key: value.name, format: 'd3_format', d3_format: 'd'}]\n          )[0],\n          mapping: comm\n        };\n        mapper.apply(state.data.nodes, mapping);\n        state.nodeColor = {\n          field: value.name, scale: 'ordinal', domain: null,\n          range: d3.schemeCategory10, unknown: '#cccccc'\n        };\n        $('#community-dialog').modal('hide');  // TODO:\n        d3.select('#loading-icon').style('display', 'none');\n        app(state.export());\n      });\n}\n\n\nexport default {\n  getGraph, app, updateApp\n};\n","\n/** @module common/KArray */\n\n\nclass KArray extends Array {\n  /**\n   * Return array of object filtered by given unique key\n   */\n  unique(key) {\n    return this.reduce((a, b) => {\n      if (a.find(e => e[key] === b[key]) === undefined) a.push(b);\n      return a;\n    }, new KArray());\n  }\n\n\n  /**\n   * Merge arrays\n   */\n  extend() {\n    return this.reduce((a, b) => {\n      Array.prototype.push.apply(a, b);\n      return a;\n    }, new KArray());\n  }\n\n\n  // Merge arrays(Asynchronous)\n  extendAsync() {\n    return Promise.all(this).then(res => {\n      return res.reduce((a, b) => {\n        Array.prototype.push.apply(a, b);\n        return a;\n      }, new KArray());\n    });\n  }\n\n  toArray() {\n    return Array.from(this);\n  }\n\n  toObject() {\n    const obj = {};\n    this.forEach(kv => {\n      obj[kv[0]] = kv[1];\n    });\n    return obj;\n  }\n}\n\nexport default KArray;\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\n\nimport KArray from './KArray.js';\n\n\nfunction defaultFieldProperties(fields) {\n  return fields.map(e => {\n    if (!e.hasOwnProperty('name')) e.name = e.key;\n    if (!e.hasOwnProperty('visible')) e.visible = true;\n    if (e.hasOwnProperty('d3_format')) e.format = 'd3_format';\n    if (!e.hasOwnProperty('format')) e.format = 'raw';\n    return e;\n  });\n}\n\n\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id'].includes(fmt)) return 'text';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\nfunction URLQuery() {\n  return KArray.from(window.location.search.substring(1).split(\"&\"))\n    .map(e => e.split('=')).toObject();\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  defaultFieldProperties, sortType, formatNum, partialMatch, URLQuery, uuidv4\n};\n","\n/** @module common/idb */\n\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\n\n\nconst schema = {\n  items: 'storeID, dataType, created'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('created')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by data type\n * @param {string} type - 'nodes' or 'edges'\n * @return {array} data store objects\n */\nfunction getItemsByDataType(type) {\n  return idb.items\n    .where('dataType')\n    .equals(type)\n    .reverse()\n    .sortBy('created')\n    .catch(err => {\n      console.error(`IDBError: Unexpected dataType: ${type}`, err);\n    });\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItemByID(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction putItem(data) {\n  if (!data.storeID) {\n    data.storeID = misc.uuidv4();\n  }\n  return idb.items.put(data);\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\nexport default {\n  getAllItems, getItemsByDataType, getItemByID,\n  deleteItem, putItem, updateItem, reset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\n\nexport default {\n  get, json, text, blob, post, error\n};\n","\n/** @module common/core */\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as misc} from './misc.js';\n\n\nfunction fetchProgress(storeID, command='update') {\n  return idb.getItemByID(storeID)\n    .then(data => {\n      if (!data) return Promise.reject(`Store: ${storeID} is not available`);\n      if (!['ready', 'running'].includes(data.status)) return;\n      const query = {id: data.reference.workflow, command: command};\n      return fetcher.get('progress', query)\n        .then(fetcher.json)\n        .then(data => {\n          if (data.status === 'failure') {  // No data found on server\n            return idb.updateItem(storeID, item => {\n              item.status = 'failure';\n            });\n          }\n          return idb.updateItem(storeID, item => {\n            item.status = data.status;\n            item.progress = data.progress;\n            item.execTime = data.execTime;\n            item.fields = misc.defaultFieldProperties(data.fields);\n            item.records = data.records;\n          });\n        });\n    });\n}\n\n\nexport default {\n  fetchProgress\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\n\nfunction buttonBox(selection, id, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButton(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, id, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#')\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, id, label, type, target) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .attr('id', id)\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, id, label, type) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true)\n      .attr('id', id);\n  selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, id, label) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, id, label, target) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`)\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, id, label, accept) {\n  selection.classed('dropdown-item', true)\n      .attr('id', id)\n      .text(label)\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      })\n    .append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module network/state */\n\nimport d3 from 'd3';\n\nimport {default as legacy} from '../common/legacySchema.js';\nimport {default as misc} from '../common/misc.js';\n\n\nexport default class NetworkState {\n  constructor(data, width, height) {\n    // View modes\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    // Import from legacy format data\n    this.data = legacy.convertNetwork(data);\n\n    this.nodes = JSON.parse(JSON.stringify(this.data.nodes.records));  // Working copy\n    this.edges = JSON.parse(JSON.stringify(this.data.edges.records));  // Working copy\n\n    // Adjacency\n    // Assuming that the network is undirected graph and\n    // source index < target index\n    this.nodes.forEach(n => {\n      n.adjacency = [];\n    });\n    this.edges.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.nodes[e.source].adjacency.push([e.target, i]);\n      this.nodes[e.target].adjacency.push([e.source, i]);\n    });\n\n    // Snapshot\n    const snp = this.data.edges.snapshot || {\n      nodeColor: {}, nodeSize: {}, nodeLabel: {}, nodeLabelColor: {},\n      edgeWidth: {}, edgeLabel: {}\n    };\n\n    // Node attributes\n    // this.nodeContentVisible = snp.nodeContentVisible || true;\n\n    // nodeColor\n    this.nodeColor = {};\n    this.nodeColor.field = snp.nodeColor.field || null;\n    this.nodeColor.scale = snp.nodeColor.scale || 'linear';\n    this.nodeColor.domain = snp.nodeColor.domain || [0, 1];\n    this.nodeColor.range = snp.nodeColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeColor.unknown = snp.nodeColor.unknown || ['#7fffd4'];\n\n    // nodeSize\n    this.nodeSize = {};\n    this.nodeSize.field = snp.nodeSize.field || null;\n    this.nodeSize.scale = snp.nodeSize.scale || 'linear';\n    this.nodeSize.domain = snp.nodeSize.domain || [1, 1];\n    this.nodeSize.range = snp.nodeSize.range || [40, 40];\n    this.nodeSize.unknown = snp.nodeSize.unknown || 40;\n\n    // nodeLabel\n    this.nodeLabel = {};\n    this.nodeLabel.text = snp.nodeLabel.text || null;\n    this.nodeLabel.size = snp.nodeLabel.size || 12;\n    this.nodeLabel.visible = snp.nodeLabel.visible || false;\n\n    // nodeLabelColor\n    this.nodeLabelColor = {};\n    this.nodeLabelColor.field = snp.nodeLabelColor.field || null;\n    this.nodeLabelColor.scale = snp.nodeLabelColor.scale || 'linear';\n    this.nodeLabelColor.domain = snp.nodeLabelColor.domain || [1, 1];\n    this.nodeLabelColor.range = snp.nodeLabelColor.range || ['#7fffd4', '#7fffd4'];\n    this.nodeLabelColor.unknown = snp.nodeLabelColor.unknown || ['#333333'];\n\n    // Edge attributes\n    // this.edgeVisible = snp.edgeVisible || true;\n    this.networkThresholdCutoff = data.edges.query.params.threshold;\n    this.networkThreshold = snp.networkThreshold || data.edges.query.params.threshold;\n\n    // edgeWidth\n    this.edgeWidth = {};\n    this.edgeWidth.scale = snp.edgeWidth.scale || 'linear';\n    this.edgeWidth.domain = snp.edgeWidth.domain || [0.5, 1];\n    this.edgeWidth.range = snp.edgeWidth.range || [1, 5];\n    this.edgeWidth.unknown = snp.edgeWidth.unknown || 1;\n\n    // edgeLabel\n    this.edgeLabel = {};\n    this.edgeLabel.size = snp.edgeLabel.size || 12;\n    this.edgeLabel.visible = snp.edgeLabel.visible || false;\n\n    // Transform\n    this.transform = snp.fieldTransform || {x: 0, y: 0, k: 1};\n\n    // Event listener\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Update notifier\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    // Snapshot\n    this.snapShotNotifier = null;\n    // Zoom control\n    this.fitNotifier = null;\n    // Force control\n    this.setForceNotifier = null;\n    this.stickNotifier = null;\n    this.relaxNotifier = null;\n    this.restartNotifier = null;\n\n    // Working memory\n    this.forceField = {top: 0, right: width, bottom: height, left: 0};\n    this.viewBox = {top: 0, right: width, bottom: height, left: 0};\n    this.focusArea = {};\n    this.boundary = {};\n    this.prevTransform = {\n      x: this.transform.x, y: this.transform.y, k: this.transform.k\n    };\n\n    if (snp.coords) {\n      this.simulationOnLoad = false;\n      // Set default state\n      this.setAllCoords(snp.coords);\n      this.setFocusArea();\n      this.setBoundary();\n    } else {\n      this.simulationOnLoad = true;\n    }\n  }\n\n  setBoundary() {\n    const xs = this.nodes.map(e => e.x);\n    const ys = this.nodes.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = 50;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setAllCoords(coordsList) {\n    this.nodes.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.edges can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.edges[edge].sx = coordsList[n.index].x;\n          this.edges[edge].sy = coordsList[n.index].y;\n        } else {\n          this.edges[edge].tx = coordsList[n.index].x;\n          this.edges[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.nodes[n].x = x;\n    this.nodes[n].y = y;\n    this.nodes[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.edges[edge].sx = x;\n        this.edges[edge].sy = y;\n      } else {\n        this.edges[edge].tx = x;\n        this.edges[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.nodes.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  edgesToRender() {\n    return this.edges.filter(\n      e => e.weight >= this.networkThreshold\n        && this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  snapshot() {\n    return {\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      networkThreshold: this.networkThreshold,\n      networkThresholdCutoff: this.networkThresholdCutoff,\n      fieldTransform: this.transform,\n      coords: this.nodes.map(e => ({x: e.x, y: e.y}))\n    };\n  }\n\n  export() {\n    this.data.edges.id = misc.uuidv4();\n    this.data.edges.snapshot = this.snapshot();\n    return JSON.parse(JSON.stringify(this.data));\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showBoundary() {\n    d3.select('#debug-boundary')\n      .text(JSON.stringify(this.boundary));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n","\n/** @module common/scale */\n\n\nimport d3 from 'd3';\n\n\nconst presets = [\n  {key: 'activity', name: 'Activity', scale: 'log', domain: [1e-4, 1e-6]},\n  {key: 'percent', name: 'Percent', scale: 'linear', domain: [0, 100]},\n  {key: 'tf', name: 'True/False', scale: 'quantize', domain: [1, 0]},\n  {key: 'mw', name: 'MW', scale: 'linear', domain: [200, 600]},\n  {key: 'logp', name: 'LogP', scale: 'linear', domain: [-2, 8]}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear()},\n  {key: 'log', name: 'Log', func: d3.scaleLog()},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize()},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal()}  // not for sizeScale\n];\n\n\nconst colorPalettes = [\n  {key: 'aquamarine', name: 'Aquamarine',\n   range: ['#778899', '#7fffd4'], unknown: '#696969'},\n  {key: 'chartreuse', name: 'Chartreuse',\n   range: ['#778899', '#7fff00'], unknown: '#696969'},\n  {key: 'salmon', name: 'Salmon',\n   range: ['#778899', '#fa8072'], unknown: '#696969'},\n  {key: 'violet', name: 'Violet',\n   range: ['#778899', '#ee82ee'], unknown: '#696969'},\n  {key: 'temperature', name: 'Temperature',\n   range: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#696969'},\n  {key: 'spectrum', name: 'Spectrum',\n   range: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#696969'}\n];\n\n\n// TODO: Remove gray (for unknown) from categorical 20 and 40\nconst colorRangeTypes = [\n  {key: 'continuous', name: 'Continuous', size: 2},\n  {key: 'two-piece', name: 'Two-piece', size: 3},\n  {key: 'category10', name: 'Category 10', size: 10,\n   range: d3.schemeCategory10, unknown: '#cccccc'},\n  {key: 'category20', name: 'Category 20', size: 20,\n   range: d3.schemeCategory20, unknown: '#cccccc'},\n  {key: 'category40', name: 'Category 40', size: 40,\n   range: d3.schemeCategory20b.concat(d3.schemeCategory20c), unknown: '#cccccc'}\n];\n\n\nfunction scaleFunction(attr) {\n  let sf = types.find(e => e.key == attr.scale).func;\n  let domain = attr.domain;\n  if (attr.range.length == 3) {\n    const mid = (parseFloat(attr.domain[0]) + parseFloat(attr.domain[1])) / 2;\n    domain = [attr.domain[0], mid, attr.domain[1]];\n  }\n  if (attr.scale !== 'ordinal') {\n    sf = sf.domain(domain);\n  }\n  sf = sf.range(attr.range);\n  if (['linear', 'log'].includes(attr.scale)) {\n    sf = sf.clamp(true);\n  }\n  return d => {\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return attr.unknown;  // invalid values\n    }\n    if (attr.scale !== 'ordinal' && parseFloat(d) != d) {\n      return attr.unknown;  // texts\n    }\n    if (attr.scale === 'log' && d <= 0) {\n      return attr.unknown;  // negative values in log scale\n    }\n    const result = sf(d);\n    if (result === undefined) {\n      return attr.unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nexport default {\n  presets, types, colorPalettes, colorRangeTypes,\n  scaleFunction\n};\n","\n/** @module dialog/community */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'community-dialog';\nconst title = 'Comunity detection';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'community', title, id);\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  // Name\n  dialog.select('.modal-body').append('div')\n      .classed('name', true)\n      .call(box.textBox, 'comm-name', 'New name', 40, 'comm_');\n  // Assign null to isolated nodes\n  dialog.select('.modal-body').append('div')\n      .classed('nulliso', true)\n      .call(box.checkBox, 'comm-nulliso', 'Assign null to isolated nodes', true);\n}\n\n\nfunction value(selection) {\n  return {\n    name: box.textBoxValue(selection.select('.name')),\n    nulliso: box.checkBoxValue(selection.select('.nulliso'))\n  };\n}\n\n\nexport default {\n  menuLink, body, value\n};\n","\n/** @module dialog/rename */\n\n\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename view';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, 'rename', title, id);\n}\n\n\nfunction body(selection, name) {\n  selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'rename', 'New name', 40, name);\n}\n\n\nfunction updateBody(selection, state) {\n  selection.select('.rename')\n      .call(box.updateTextBox, state.data.name);\n}\n\n\nfunction value(selection) {\n  return box.textBoxValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module network/communityDetection */\n\nimport jLouvain from 'jLouvain';\n\n\nexport function communityDetection(nodes, edges, option) {\n  // TODO: partition resolution setting\n  // TODO: Error at edges.length 0\n  if (!edges.length) {\n    const community = {};\n    nodes.forEach(e => { community[e] = option.nulliso ? null : e; });\n    return community;\n  }\n  const clusters = {};\n  const community = jLouvain().nodes(nodes).edges(edges)();\n  Object.entries(community).forEach(e => {\n    if (!clusters.hasOwnProperty(e[1])) {\n      clusters[e[1]] = [];\n    }\n    clusters[e[1]].push(e[0]);\n  });\n  // Sort by cluster size\n  Object.entries(clusters)\n    .sort((a, b) => a[1].length < b[1].length)\n    .forEach((cluster, i) => {\n      if (cluster[1].length === 1) {\n        community[cluster[1][0]] = option.nulliso ? null : i;\n      } else {\n        cluster[1].forEach(e => {\n          community[e] = i;\n        });\n      }\n    });\n  return community;\n}\n\n\nexport default {\n  communityDetection\n};\n","\n/** @module network */\n\nimport d3 from 'd3';\n\nimport {default as core} from './common/core.js';\nimport {default as hfile} from './common/file.js';\nimport {default as misc} from './common/misc.js';\n\nimport {default as button} from './component/button.js';\n\nimport {default as state} from './network/state.js';\nimport {default as view} from './network/view.js';\nimport {default as networkApp} from './network/networkApp.js';\n\n\nfunction run() {\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  const storeID = misc.URLQuery().id || null;\n  const dataURL = misc.URLQuery().location || null;\n  if (storeID) {\n    // Load from IndexedDB store\n    return core.fetchProgress(storeID, 'update')\n      .then(() => networkApp.getGraph(storeID))\n      .then(networkApp.app);\n  } else if (dataURL) {\n    // Fetch via HTTP\n    return hfile.fetchJSON(dataURL)\n      .then(networkApp.app);\n  } else {\n    // New network\n    const menubar = d3.select('#menubar');\n    menubar.selectAll('div,a').remove();\n    const menu = menubar.append('div')\n        .call(button.dropdownMenuButton, null, '+ New network', 'primary')\n        .select('.dropdown-menu');\n    menu.append('a')\n        .call(button.dropdownMenuFile, 'import', 'Import view', '.gfc,.gfr,.json,.gz')\n        .on('change', function () {\n          const file = button.dropdownMenuFileValue(d3.select(this));\n          hfile.loadJSON(file).then(networkApp.app);\n        });\n    menubar.append('a')\n        .call(button.menuButton, null, 'Control panel', 'outline-secondary')\n        .attr('href', 'control.html')\n        .attr('target', '_blank');\n  }\n}\n\n\nexport default {\n  state, view, run\n};\n"],"names":["readFile","file","sizeLimit","blob","Promise","resolve","reject","reader","FileReader","truncated","slice","onload","event","target","result","onerror","error","readAsArrayBuffer","readAsText","parseJSON","data","compressed","text","pako","inflate","to","JSON","parse","downloadDataFile","name","url","window","URL","createObjectURL","Blob","a","document","createElement","download","href","dispatchEvent","MouseEvent","view","bubbles","cancelable","e","v07_to_v08_nodes","json","fields","columns","map","sort","format","id","dataType","dataTypeConv","schemaVersion","revision","status","statusConv","records","query","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","updateNodes","selection","showStruct","nodes","selectAll","d","index","exit","remove","entered","enter","append","attr","call","updateNodeCoords","svgWidth","svgHeight","merged","merge","select","html","structure","updateEdges","edges","source","style","weight","updateEdgeCoords","updateNodeAttrs","state","each","color","scale","scaleFunction","nodeColor","field","size","nodeSize","labelColor","nodeLabelColor","d3","this","nodeLabel","find","key","misc","formatNum","d3_format","parseFloat","parseInt","visible","updateEdgeAttrs","edgeWidth","edgeLabel","x","y","sx","sy","tx","ty","updateAttrs","moveNode","moveEdge","resize","area","node","setViewBox","offsetWidth","offsetHeight","component","resizeViewBox","singleToMulti","mapping","newMapping","Object","entries","forEach","m","dialogBase","classed","updateTextBox","value","property","updateTextareaBox","updateCheckBox","checked","updateNumberBox","selectBoxItems","items","options","updateSelectBox","checklistBoxItems","listitems","form","updateChecklistBox","values","includes","updateRangeBox","range","updateColorScaleBox","rangeArray","length","updateColorRangeGroup","lbox","scaledef","colorRangeTypes","on","selectBoxValue","p","colorPalettes","t","rbox","dispatch","updateScaleBoxGroup","domain","presets","isLog","rangeBoxValue","invalid","isNaN","mainControlBox","button","buttonBox","viewModes","box","checkBox","enableFocusedView","enableOverlookView","thldGroup","numberBox","networkThresholdCutoff","networkThreshold","readonlyBox","forceBox","simulationOnLoad","updateMainControlBox","snapshotNotifier","fitNotifier","checkBoxValue","focusedView","updateComponentNotifier","overlookView","numberBoxValue","setForceNotifier","numEdges","filter","n","combinations","logD","Math","log10","stickNotifier","relaxNotifier","restartNotifier","nodeColorControlBox","selectBox","sortType","group","colorRangeGroup","scaleBoxGroup","types","updateNodeColorControlBox","updateNodeAttrNotifier","colorRangeGroupValue","scaleBoxGroupValue","nodeSizeControlBox","rangeBox","updateNodeSizeControlBox","nodeLabelControlBox","labelGroup","updateNodeLabelControlBox","edgeControlBox","widthGroup","updateEdgeControlBox","updateEdgeAttrNotifier","controlBoxFrame","navID","contentID","controlBoxNav","label","controlBoxItem","updateControlBox","dragListener","drag","move","setCoords","zoomListener","zoom","transform","k","prevTransform","xMoved","yMoved","zoomIn","setTransform","updateComponents","fit","viewBox","getBBox","viewBoxRatio","width","height","boundaryHeight","boundary","bottom","top","boundaryWidth","right","left","zoomIdentity","translate","showTemperature","simulation","alpha","isStopped","alphaMin","end","coords","setAllCoords","stick","stop","fx","fy","interaction","unstick","active","relax","alphaTarget","forceDragListener","restart","setForce","forceEdges","force","links","getGraph","storeID","idb","getItemByID","then","app","NetworkState","forceSimulation","networkViewFrame","networkView","setInteraction","activate","control","controlBox","onresize","menubar","menu","dropdownMenuButton","communityDialog","menuLink","renameDialog","dropdownMenuItem","updateItem","item","uuidv4","snapshot","console","info","export","putItem","location","hfile","downloadJSON","menuButtonLink","core","fetchProgress","dialogs","body","modal","confirmDialog","updateApp","updateBody","nodeIds","comm","community","communityDetection","nulliso","defaultFieldProperties","mapper","apply","schemeCategory10","unknown","$","KArray","Array","[object Object]","reduce","b","undefined","push","prototype","all","res","from","obj","kv","hasOwnProperty","fmt","d3format","Number","partialMatch","toString","toUpperCase","indexOf","URLQuery","search","substring","split","toObject","replace","c","r","random","schema","Dexie","version","stores","getAllItems","orderBy","reverse","toArray","getItemsByDataType","type","where","equals","sortBy","catch","err","first","deleteItem","delete","put","updateFunc","modify","reset","baseURL","get","q","keys","stringify","fetch","credentials","Error","statusText","response","post","formdata","method","command","workflow","fetcher","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","compress","str","gzip","menuButton","menuModalLink","dropdownMenuModal","dropdownMenuFile","accept","click","dropdownMenuFileValue","files","Queued","In progress","Aborting","Aborted","Completed","Failure","datatable","connection","convertTable","i","_structure","_index","v08_nodes","$schema","convertNetwork","nodeFields","snp","fieldTransform","nodePositions","edge","column","nodeContent","nodeTableId","v07_to_v08_edges","nodesID","idx_converter","v08_graph","nodeContentVisible","schemeCategory20","edgeVisible","threshold","params","v10_edges","focusedViewThreshold","overlookViewThreshold","legacy","adjacency","num","updateNodeNotifier","updateEdgeNotifier","snapShotNotifier","forceField","focusArea","setFocusArea","setBoundary","xs","ys","min","max","tk","coordsList","nbr","func","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","schemeCategory20b","concat","schemeCategory20c","sf","mid","clamp","nodesToRender","numNodes","edgesToRender","datum","transition","duration","mappingToTable","mp","keyField","entry","rcd","f","tableToMapping","table","ignore","Date","row","csvToMapping","csvString","lines","header","shift","now","headerIdx","h","line","fd","unique","message","base","footer","submitDialog","title","textBox","textBoxValue","textareaBox","rows","placeholder","textareaBoxValue","textareaBoxLines","step","fileInputBox","fileInputBoxValue","dialog","checklistBox","checklistBoxValue","colorScaleBox","stopPropagation","colorScaleBoxValue","arr","palettes","rangeTypes","scaleTypes","tabs","content","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceCenter","forceX","forceY","option","clusters","jLouvain","cluster","run","protocol","navigator","onLine","dataURL","networkApp"],"mappings":"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"}